{"_id":"formidable","_rev":"533-2aea1f22720f072492e2f5ac0ef0505a","name":"formidable","dist-tags":{"latest":"3.5.1","legacy":"1.2.6","v1":"1.2.6","v2-latest":"2.1.2"},"versions":{"0.3.0":{"name":"formidable","version":"0.3.0","dependencies":{"gently":">=0.6.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.3.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.3.0.tgz","shasum":"84112d39db3d5889651d212c6b2e40a4fc93c7c1","integrity":"sha512-UWpbo7BC6H2FL/YAbH0QjqauqboVPL99f28jvG28BYNa96asebMwBYYJX9R8n8UoL56vlRXCtAL6T8OaxA+0mA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDpXHl7XjHrERERdsvqoUjQEEkKNYvVJsXcXXvq1M2z4QIhAM75cYVLK9JNZupitFHyGNUGzO1QleyIUNbT9I6v6ocg"}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.4.0":{"name":"formidable","version":"0.4.0","dependencies":{"gently":">=0.6.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.4.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.4.0.tgz","shasum":"32c899dd32440552c18d27cdd2854693c6eeb1bf","integrity":"sha512-u/Hy9sJwtNEUTTDojpv/LZHmiy8Xo/obXtpZYzoQUA5UZ24Tjgn47k8tKbKT5BgGk/xe+VuKh3noG6Rzp9yK4Q==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDT5NA85YBJKuCCX19NpuMNVn61+gQoWBPgGAAUY+6nHAiEAqKDBpXZ7vLhAQ2tOhH+yo6Wd00KoWgdFTsWbJ91Pm6U="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.5.0":{"name":"formidable","version":"0.5.0","dependencies":{"gently":">=0.6.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.5.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.5.0.tgz","shasum":"81e605321b2aefb01bb5063d827f6567aac2303d","integrity":"sha512-XaxIA8dY2QikM9kw4DrtQE+/zEN9Exe+eV2C8X8N7R2R662KTfcu2sTtID5bC0smuENvFHUTDX2Tthey+a72oA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDKhaXKdW4dUbDJLOUpT07Rvub54KHy62UBALDhz880pgIgcs3QoTxsuhow1b/MGMwIWOxGLFrUp8mCINT79hIg1xE="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.6.0":{"name":"formidable","version":"0.6.0","dependencies":{"gently":">=0.6.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.6.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.6.0.tgz","shasum":"99cc8bf984a41eacdf4c6192f26a6a13a753f521","integrity":"sha512-nuQy38Ts7LMSqiFyGu/vF4RQsPny8b7VbxfD+CST3mRSEwRYpF0NLr4mA17prXQEdgqS7yqNs5WxrjzSXX4VvA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGyPHSLs6bJEKJXnxE7tH9z/7W3x6MBIikxIwnIdk1c+AiB1mQz0ffS9zswrUWEZXHNu4Up9nuzP8h00SY4/xIoz7Q=="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.7.0":{"name":"formidable","version":"0.7.0","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.7.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.7.0.tgz","shasum":"c0c164916777dc6cee4850d01b9f766ac776a106","integrity":"sha512-Fenx7YU/0gUlOb5r+Cqbi7SEz8LPD+w3i7q3eToleAzw6t84NdMwdB/6yuV0QBqPzT63amvZR1Rr6oxRBKv7JA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC3rMK9i+trrzmjhVUUEeZH3SdE6MeXiHrzC1Y6yi7n1AIhALuv4EQCVb5NPb4hfyPrUJoYdZb7QbfVullXbI8K9FKW"}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.8.0":{"name":"formidable","version":"0.8.0","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.8.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.8.0.tgz","shasum":"bd6f383b7e32a3fa298c953c536885716caa942a","integrity":"sha512-DoeHa6RF3iQwKtoSFOZXay4IwQMhA7m2px18kuzMLu/r/r0DGT0Stjt2Ik29CZndkQw9/Cgje4IP5/IUj4/w2w==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEa1+AJLm/68tYexOZvRpneXCvUrxocLgWIpNs0TZjfSAiAhIR22P97YiYzKs2T3KVV8QaUJr/j8ISssODnBztCmeA=="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.0":{"name":"formidable","version":"0.9.0","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.0","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.0.tgz","shasum":"389a5f00d712a9c410254867cee98c3fccfd6300","integrity":"sha512-1g+ZG70+Qb2hpO9agK75+5ATCQMlCkaJjWhsgHG9Z97RCQLMUvdYV/rknisHb49c74p3OclnGgnsOfuTuPNqBw==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGLzniSb+oCXdgyKRjGmcDP2oHLVw1oBjivnQrSxZvBUAiEA65hj0O1qifPKPEQ0Ie19uKFCrRP30gvctY9MDrOWi0o="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.1":{"name":"formidable","version":"0.9.1","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.1","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.1.tgz","shasum":"a3a43b494d5c430b82006419ff2dd78be22fa3e8","integrity":"sha512-YNEf3+e+FcaLHDOWUP4/z1DCKr3CWAFsZugMmYxcjDGkwGSXoWc4AtC4iHiMGGejqqxfFdkqny+EFxXX+abDGg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCHzvDQdk4et5QLiduHTKgL27B7S/KNKV0dnD31HW5lQsCIQCM3R3g9B7elnoF5mt1tcuVDlq8e+OluI+b3PE9otviDw=="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.2":{"name":"formidable","version":"0.9.2","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.2","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.2.tgz","shasum":"caab8a47526da68d97da6461c30691cff80fa9a8","integrity":"sha512-byGluR8fIGJqdrceRchA4RT7pbH3ChIA11EEq5dYoE7/c6x0wSgt2N/4q3hyab4N9gw/X/rTIA9jps7QO+c4Pw==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCWbMWrbasGLol5daz32IX0pb5yTVZGLNmYVgS7/y9+pgIhAOTvhIvkOcfGIQdxoryRgtn0W86a2lKTqHUe3+ouoe0U"}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.3":{"name":"formidable","version":"0.9.3","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.3","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.3.tgz","shasum":"af4bb633aee0f4a84d5785a82d478e7089c1e33f","integrity":"sha512-jehqQm1QK5zkmH19F+RviZoON4lyVkcvoWctP7yWOoVsysSfGZN1UUoZzubZrLqc2q1ILlHyv/2Gf0Q/tEoNVQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD2dtibiAebAEu8W22TFLBO+msSME3iTeg1UpteGer//gIgZ36PiiMxg6dTu7A3GSByguqG4R+UcJ851auqEH0cBqs="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.4":{"name":"formidable","version":"0.9.4","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.4","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.4.tgz","shasum":"d29f656139734264f2a433fc91a2c60a1aa3d7d5","integrity":"sha512-++VZ6zCNfGi8+nBoUFuvpSUDDX4GjXl3sWnV3aCWm/0cjT/xBZjBLSafX+4LE+sPei+MpJFwGrEaegv8NAKJJg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBw0Z3XOKdlXWqQwMvEoOjlgCA0o4/7dsXqLZTrXBoveAiBhEPSGjwpPU/cWpOnZMRFbCbrccfCNy21R/27Z9rXStQ=="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.5":{"name":"formidable","version":"0.9.5","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.5","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.5.tgz","shasum":"b42433bd4d94991551225a96c2ab4f449a13b462","integrity":"sha512-edyhgUuPrft3yJjWel02Yt84pB4dTk5vu1pb9c1oUcAvpjBdh1r825fH2j3KAOoO6x0UFdUiUk/awfVK1jsHMw==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCsu7ps5hOW6DOs/NS4LW51ykSWGqa63BUgWLGeslZ44QIgWCPweB8LwPoYI1QzOy8seY0Q8oFZkHstwXj7NKI1NQQ="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.6":{"name":"formidable","version":"0.9.6","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.6","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.6.tgz","shasum":"20af6ec6b0e9302c106733247f5abda5dc8a0d48","integrity":"sha512-IjYjU5zUu06WSleJYUVwYmM5fXdyIM3J/4Ba0AEc9i2mTglc38JH7Se88qsprma1EiBYOUBki+tnp/bldlnXZA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAsyC82LT5Yud48wVPyjbwU++ty4s+E46s2ZwQg7c4eUAiBMd1kvDfWcY5b+3PdOcqisDe7cAQDHpcH31eTvSxyDsg=="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.7":{"name":"formidable","version":"0.9.7","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.7","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.7.tgz","shasum":"62b150c2be0d0f535ea0616d3a07810b58888f18","integrity":"sha512-FzItCbHJXYm7NPK3IBofaBBTPREA0BHUhk4hZPzF5B7jXCsa+cRiEESQ3SbASF/MRQuiYCXz7jpgFhXlFucu3g==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIARQdVScIjggZmeyKRu4K7a9esypyQ6dDhr719IdEsYcAiEA5ka3wXIMsv+lhL6uE0vFk3AaxryoDedPY7GnXNBSTTw="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.8":{"name":"formidable","version":"0.9.8","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.8","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.8.tgz","shasum":"8920c32c033b5fe52d4100dff73bb990a211b647","integrity":"sha512-ujVP1aZKPUfsgBvUVANDiOMEZm+UT7XwZATePdlkM6AujTuDaAfGklxoG7in4Kh6i/+qlUiUDQ5al7GksZ4prg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDMUj9pwShSkJcxRBviuxt/Mqc24pjNHF3NzASFrqnsmwIgUv9zNyFREA/eu2DlZIKnz0aTLnPVXkleg7pmBQfKkYY="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.9":{"name":"formidable","version":"0.9.9","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.9","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.9.tgz","shasum":"d30dd36176f022c59bee94a8daaa0476f6435bf2","integrity":"sha512-85pgXLFzcu7lAA8bo7FzlLcgn3mkIpf92/y/csy/tS52CZm0Iy1QyQyJAw72BXF99hhB9tz1vzv2UH6ehu3yvQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGOmWqUIJe3iWlCs4dEdthr7BSxyh4dhdMh3INSG3eytAiEA7hGMAIfPb2gwqbHprcVNQ7qmMDhD3uIiN6TloN2YBuU="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.10":{"name":"formidable","version":"0.9.10","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.10","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.10-1","_nodeVersion":"v0.3.2-pre","dist":{"shasum":"cee802aa5fb11024cca112a7ee2e2e89956aeb80","tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.10.tgz","integrity":"sha512-hwcXGaijt5G1OvWOZIYF0xGesHn1Dx/q0N2MTYJLKANpwQd/cNCKH25+EDu9LE5wfnxPI9JREY3th2Y6FedZtg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC+c4d5BnVfspQGRe84JK6hA+lIGkOD2rFrMZl3RtZ8KgIgNDr8TmDgu1LuhyGb1+gX4WpTvJlHAFplV5Dj6qtwjgA="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"0.9.11":{"name":"formidable","version":"0.9.11","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","_id":"formidable@0.9.11","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.10-1","_nodeVersion":"v0.3.5-pre","dist":{"shasum":"35285f3c2c5f115742a13717e2f0c1556994c4f3","tarball":"https://registry.npmjs.org/formidable/-/formidable-0.9.11.tgz","integrity":"sha512-O9ufVba3p1OhGfPwxOTeb23vssZD3/a0Dfr2P+8Cpy5qS+m7wfTzr42bIKhYX21ocYbwpGj06CGwCb/1OEgYCQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIH7hBwWddHEQW9bWehJLIm+TVUs0K/B4vN2FPFoHgScnAiEA+4aPYroDZevOTRlv0XZcKtSChZei/BqA5kFVjAXfGUM="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.0":{"name":"formidable","version":"1.0.0","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib/formidable"},"main":"./lib/formidable/index","engines":{"node":"*"},"_id":"formidable@1.0.0","_engineSupported":true,"_npmVersion":"1.0.1rc4","_nodeVersion":"v0.4.6-pre","_defaultsLoaded":true,"dist":{"shasum":"4eb41d5d99c99fd54773a0132075c11822ca103f","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.0.tgz","integrity":"sha512-muEr8cDayJyQIBukeBnqfiQwyS0QhE6K1i5pZN4SaHK4xunc5lwQ1das/Lr69v7nfekyrUQUJQ+q1RyZz2WAxQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDwFxI/9Ru8MpTPPoWIPGyhb0Rj9cD8YEnZPGZDNN2uOQIgOio+Yt41AdRoLd9N7hpARAPzVwu2wgG/5LuON3kiK70="}]},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.1":{"name":"formidable","version":"1.0.1","dependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"devDependencies":{},"_id":"formidable@1.0.1","_engineSupported":true,"_npmVersion":"1.0.3","_nodeVersion":"v0.4.8-pre","_defaultsLoaded":true,"dist":{"shasum":"d9fe626c303e8cbca9d29115497a47da6eff29e9","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.1.tgz","integrity":"sha512-4LNUzCCVhEWcndAFaoxLV+pwZGsVBQGfJlXLCOzEeab41BfwT4AiGjPbMIL/VzfB6GXJgOK5zhb3zswsuuzsCA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGimR2TjH+UY7YZ4x1rUCeDdI6WFWjXE5p7ka2t/wVNwAiEAyIlJargF13J5xQEzS4/9p4MAkwizx/njeXbuSpZhyko="}]},"scripts":{},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.2":{"name":"formidable","version":"1.0.2","dependencies":{},"devDependencies":{"gently":">=0.7.0"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"_id":"formidable@1.0.2","_engineSupported":true,"_npmVersion":"1.0.3","_nodeVersion":"v0.4.9-pre","_defaultsLoaded":true,"dist":{"shasum":"6e7887db43be310c57970143671dfc91d46f939d","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.2.tgz","integrity":"sha512-ZtvD8BzvbWb1C6Bp9NMGCEwuQoU0O2OgPEYateUz7eR0ylWoENK38mvXBuJiU2uIgoOa3XJn6B9FQurVxtxH4w==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDn1LkTcyt18n9FTydztWyQvb51CvL0XNi55ywhwTHbvgIhANkJ+ewX6sh8eml9oMnpSZU73kda7jC+BUB5XxbbZ/3H"}]},"scripts":{},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.3":{"name":"formidable","version":"1.0.3","dependencies":{},"devDependencies":{"gently":"0.8.0","far":"0.0.7","fast-or-slow":"0.0.5","findit":"0.1.1","hashish":"0.0.4"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"_npmJsonOpts":{"file":"/Users/felix/.npm/formidable/1.0.3/package/package.json","wscript":false,"contributors":false,"serverjs":false},"_id":"formidable@1.0.3","_engineSupported":true,"_npmVersion":"1.0.26","_nodeVersion":"v0.4.10-pre","_defaultsLoaded":true,"dist":{"shasum":"55c314201245f4d21b0f0c58373d30c85e53d6e9","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.3.tgz","integrity":"sha512-r4r9xUKk82WR8kYZuYk1u2drZXZYpwEgGIqVk1voH0Lu8lk43Q7VHc5FizbiCEMAWrXc1jqPUPE0Q88JW1rYnw==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDFumqBYKWj2o2fGuJ5YEYnlzTie6SAucpe5MQiR/p/0QIgfalcrtwg+NB8zLxosPj8N8vrJtUmEZgCBHPSADRFs3M="}]},"scripts":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.4":{"name":"formidable","version":"1.0.4","dependencies":{},"devDependencies":{"gently":"0.8.0","far":"0.0.7","fast-or-slow":"0.0.5","findit":"0.1.1","hashish":"0.0.4"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"_npmJsonOpts":{"file":"/Users/felix/.npm/formidable/1.0.4/package/package.json","wscript":false,"contributors":false,"serverjs":false},"_id":"formidable@1.0.4","_engineSupported":true,"_npmVersion":"1.0.26","_nodeVersion":"v0.4.10-pre","_defaultsLoaded":true,"dist":{"shasum":"e2447795406a95b30b4b5b58ac572abb207fae4a","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.4.tgz","integrity":"sha512-6bEM0SXAfrSlbeICPCDWgt7x8VKcnFVqJ3PhqGQYjvpxIsA7G5LVjNzyK7i/W5QveuTrNWPjNRNXDOhA+dvHYw==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCXfMeU/zPRZhJDQoThwBBtH/V6Sm71v0qHetwkOBgKbwIhAKsWw/1LFdg7jIsrY1CGmKPKGYELv3jyZFGy82SxB9fG"}]},"scripts":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.5":{"name":"formidable","version":"1.0.5","dependencies":{},"devDependencies":{"gently":"0.8.0","far":"0.0.7","fast-or-slow":"0.0.5","findit":"0.1.1","hashish":"0.0.4"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"_npmJsonOpts":{"file":"/Users/felix/.npm/formidable/1.0.5/package/package.json","wscript":false,"contributors":false,"serverjs":false},"_id":"formidable@1.0.5","_engineSupported":true,"_npmVersion":"1.0.26","_nodeVersion":"v0.4.10-pre","_defaultsLoaded":true,"dist":{"shasum":"55e60b34931f3bb03eedbb6777312177eb6f87b4","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.5.tgz","integrity":"sha512-qmkP6EvGoX1G7qYjBxRvyr0cn2XV+36tiPdL2esOnEPh4Nk/lx0l4LParKEXN66JV+af2Lv32nkkGwiGPt4b5w==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGc1MehYajTvJGM/PC/OD2kzPpFxLKekVcCiDAVOATusAiEAhXjp5czazIBGHgo5rI7lix5zkOTbAFZb2eFnUzCGyMQ="}]},"scripts":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.6":{"name":"formidable","version":"1.0.6","dependencies":{},"devDependencies":{"gently":"0.8.0","far":"0.0.7","fast-or-slow":"0.0.5","findit":"0.1.1","hashish":"0.0.4"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"_npmJsonOpts":{"file":"/Users/felix/.npm/formidable/1.0.6/package/package.json","wscript":false,"contributors":false,"serverjs":false},"_id":"formidable@1.0.6","_engineSupported":true,"_npmVersion":"1.0.26","_nodeVersion":"v0.4.10-pre","_defaultsLoaded":true,"dist":{"shasum":"fb92046525c6e5781d9683c54324afd36edd24a0","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.6.tgz","integrity":"sha512-pTlYLSjt4YK25PLASVY5xrMFA2vLiVOPnCXc1vNNhBnBKJsVJBrww/URDutmh3FWsLOHakHo9wvlTybY/2f3qg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBeQk8o7Irp69HZeN05vnKmoUn7s2hYYQBTnq15CcQbbAiEA9NDrlWd8xIUlTkzcX99tlPwC0+f01eJ2fsVP3Ega2V0="}]},"scripts":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.7":{"name":"formidable","version":"1.0.7","dependencies":{},"devDependencies":{"gently":"0.8.0","far":"0.0.7","fast-or-slow":"0.0.5","findit":"0.1.1","hashish":"0.0.4"},"directories":{"lib":"./lib"},"main":"./lib/index","engines":{"node":"*"},"_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"_id":"formidable@1.0.7","_engineSupported":true,"_npmVersion":"1.0.101","_nodeVersion":"v0.4.13-pre","_defaultsLoaded":true,"dist":{"shasum":"ac9f74432f222199d685555d5197e19212972992","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.7.tgz","integrity":"sha512-Lnj4PYS/6WNKHXubENFd1n33Ht3Apl29fpdZNKm88SF3j97xyWSg9aa8UaQleSMu5dY0W6HrAVUXc4338YGy+w==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICn+dr7y/8T3GCueGtyhVATu8+3TbqZmHC5n23Hah45QAiAmcpFyWE394riUouIhu7QBGQv/NTw5RhPcr8bKn7wANA=="}]},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.8":{"name":"formidable","version":"1.0.8","dependencies":{},"devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"0.0.4","utest":"0.0.3"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"make test"},"engines":{"node":"*"},"_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"_id":"formidable@1.0.8","_engineSupported":true,"_npmVersion":"1.0.106","_nodeVersion":"v0.4.13-pre","_defaultsLoaded":true,"dist":{"shasum":"ac119ceaf039a288d57649aeec38f03b6269bbce","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.8.tgz","integrity":"sha512-pxNI3asmYaavbTRYKPUivaz7oxXvIPjCIMUDklTAIy4Ln+P33j/8p8NDwq7GNKTy95PZc5h2KsRD+GO8Hn5Amg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDHzdPP6gCt1tABcHhOosSLH/GFrCTEPyfu0U49O5bDnwIgMHhItRvNukk3vwbxXRgUJ5oqipivdKKmkxPjap2TcXM="}]},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.9":{"name":"formidable","version":"1.0.9","dependencies":{},"devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"0.0.4","utest":"0.0.3"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"make test"},"engines":{"node":"*"},"_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"_id":"formidable@1.0.9","optionalDependencies":{},"_engineSupported":true,"_npmVersion":"1.1.1","_nodeVersion":"v0.6.11","_defaultsLoaded":true,"dist":{"shasum":"419e3bccead3e8874d539f5b3e72a4c503b31a98","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.9.tgz","integrity":"sha512-tDcFwwnfKheIxsMcKzYjEz4jrcDfHWfyVg5Y9AxPG/YfmkGdOdcHCMDWNg1iIOaSN3VhVD0kCkwayiG9/Drg4Q==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDJZL0oEshXoBsZTKwtDTEY38yYSNcDsIaT6xXSP0xW+gIgZWAWAuFB8YDhz6A8O7Jt9A6oDBtFgvGEAIIHUkeH5U0="}]},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.10":{"name":"formidable","version":"1.0.10","dependencies":{},"devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"0.0.4","utest":"0.0.3"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"make test"},"engines":{"node":"*"},"optionalDependencies":{},"_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"_id":"formidable@1.0.10","_engineSupported":true,"_npmVersion":"1.1.21","_nodeVersion":"v0.6.18-pre","_defaultsLoaded":true,"dist":{"shasum":"96a2bcee5d9059aa0c60fc847ea506b998e7e5dc","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.10.tgz","integrity":"sha512-5afatVYUVJvdy7ZyL4vHc+z/mVjawTgIneFqZ209OP9zF/dSzB3X+A32zSe3PRepiGsaiYzkHp/irDvHXnFNUQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD6O1R1keRe614l2RNRdIIESvi7Givb/QFL2uZMNgCuxgIhAJlP2kHkVh/gPkpMjbo/4Ohwe4ihNCqIBm1z7Yo17kzO"}]},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.11":{"name":"formidable","version":"1.0.11","dependencies":{},"devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"0.0.4","utest":"0.0.3"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"make test"},"engines":{"node":"*"},"optionalDependencies":{},"_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"_id":"formidable@1.0.11","_engineSupported":true,"_npmVersion":"1.1.21","_nodeVersion":"v0.6.18-pre","_defaultsLoaded":true,"dist":{"shasum":"68f63325a035e644b6f7bb3d11243b9761de1b30","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.11.tgz","integrity":"sha512-ZG3xz6afuCmpLGNtTI/W8HDKWisPv/iZgtEvfB1nF3vJHDJ2M4hpU/HDLJQYnTVqErpaLphweqOMULwP/Ls6cg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDOQ7Jwc4i35qqtOxNgGqq/uA0SSuKY57g2joFdYwrlDwIgMQDdTcymKk7FWMg4M2EkuUjj6aGWSeCFKgZ96PQYZuU="}]},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.12":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","version":"1.0.12","devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"~0.0.6","utest":"0.0.3","request":"~2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":">=0.8.0 <0.10.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"_id":"formidable@1.0.12","dependencies":{},"dist":{"shasum":"4fc17fea578db88e4cd45799e6dbbddf92f82a10","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.12.tgz","integrity":"sha512-hYh1K8x2sE5UJSkl/0icW1jqmwoHWnLUC0UcncmGiPg4AcaCJQXK+aySp88/i9rmTD/ONOXdDwGpmkdUtukqlA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCID1gLQtzkFL7Wn2D5h4iOPAAveuyagHcmSSY+nkyDM9zAiBBy8gQfacssU2zc8ovM7FZRjSYTueDGFf9cFeREcshig=="}]},"_npmVersion":"1.1.69","_npmUser":{"name":"svnlto","email":"me@svenlito.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"superjoe","email":"superjoe30@gmail.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.13":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","version":"1.0.13","devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"~0.0.6","utest":"0.0.3","request":"~2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":"<0.9.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"_id":"formidable@1.0.13","dependencies":{},"dist":{"shasum":"70caf0f9d69692a77e04021ddab4f46b01c82aea","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.13.tgz","integrity":"sha512-xFFIqHBxGtkKUIMocMh+Bebykl3bSBNccYVYVwts7WQBr0jpawTUwqk55kg43Lhj8EkMSMoJVKOwSVvayq2DFA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAlCAE4fw1NZsaXAPF4sCQxLWoPvTVAgTRkUEaE1GpJ3AiEA6CESB9g3iEkxePYJLteCfjk0Y+gd74tNa0YuGaqhpzY="}]},"_from":".","_npmVersion":"1.2.12","_npmUser":{"name":"svnlto","email":"me@svenlito.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"superjoe","email":"superjoe30@gmail.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.14":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","version":"1.0.14","devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"~0.0.6","utest":"0.0.3","request":"~2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":">=0.8.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"_id":"formidable@1.0.14","dependencies":{},"dist":{"shasum":"2b3f4c411cbb5fdd695c44843e2a23514a43231a","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.14.tgz","integrity":"sha512-aOskFHEfYwkSKSzGui5jhQ+uyLo2NTwpzhndggz2YZHlv0HkAi+zG5ZEBCL3GTvqLyr/FzX9Mvx9DueCmu2HzQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDCpHO0tO7CyXZVseiRjW9h++XzqEUt5PwuajgFbV+JLQIhANax69jqxBZzVUsuL7doYARLZtiWxtNJL1waAR1PimcI"}]},"_from":".","_npmVersion":"1.2.18","_npmUser":{"name":"tim-smart","email":"tim@fostle.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"tim-smart","email":"tim@fostle.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.15":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","version":"1.0.15","devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"~0.0.6","utest":"0.0.3","request":"~2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":">=0.8.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"dependencies":{},"_id":"formidable@1.0.15","dist":{"shasum":"91363d59cc51ddca2be84ca0336ec0135606c155","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.15.tgz","integrity":"sha512-6VjHL7H9tVX3d0e8pZ2xUNXvNZRtr0BKqzoXZMVmxfk56/nie3cOP0YwK4Vktuu0mu/jncIRRVYStuaYCdLVOA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHhoUOy8vAG09cxR3HyeNEgi2TDuRUzb1Fti7yd6yj7uAiAITEL/6jfZXcHolXP7EShc/PVaMWCk5Kb+45p/cMz+PA=="}]},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"tim-smart","email":"tim@fostle.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.16":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","version":"1.0.16","devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"~0.0.6","utest":"0.0.3","request":"~2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":">=0.8.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"dependencies":{},"_id":"formidable@1.0.16","dist":{"shasum":"4916cfdfc4cbed020b257a6a9505a9ab38c2cd0e","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.16.tgz","integrity":"sha512-zMKfVZpWdU14Wvnbbcy8rKhHpkuyes3aupfz8LPljtc7xi521dkabb77pjh6kgwhkkwngyjdzTFhw/4zI13Xaw==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGDeKw9/bFyNeLXbCo+QxXOq4qUctlCg6jF+qX27H0ipAiEAwK1PmKEyBu3JPVcyV+ijcja/TveLFy+u/ojJ0X2Zyvc="}]},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"tim-smart","email":"tim@fostle.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.0.17":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","version":"1.0.17","devDependencies":{"gently":"0.8.0","findit":"0.1.1","hashish":"0.0.4","urun":"~0.0.6","utest":"0.0.3","request":"~2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":">=0.8.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"dependencies":{},"_id":"formidable@1.0.17","dist":{"shasum":"ef5491490f9433b705faa77249c99029ae348559","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.0.17.tgz","integrity":"sha512-95MFT5qipMvUiesmuvGP1BI4hh5XWCzyTapiNJ/k8JBQda7rPy7UCWYItz2uZEdTgGNy1eInjzlL9Wx1O9fedg==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAvxH/qqnCUJ2et1dxwMHRhPtxI8KyAZCYk9HlGa37FRAiBXWatqYTJwgPm9LTmbM47kZVnsaVSIE7QBRZ3uxIANgQ=="}]},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"felixge","email":"felix@debuggable.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"tim-smart","email":"tim@fostle.com"}],"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.1.1":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","license":"MIT","version":"1.1.1","devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"engines":{"node":">=0.8.0"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"gitHead":"7a36a8e932044252fe648c81dbd8cf837d0178d0","dependencies":{},"_id":"formidable@1.1.1","_shasum":"96b8886f7c3c3508b932d6bd70c4d3a88f35f1a9","_from":".","_npmVersion":"4.0.5","_nodeVersion":"7.2.1","_npmUser":{"name":"kornel","email":"pornel@pornel.net"},"dist":{"shasum":"96b8886f7c3c3508b932d6bd70c4d3a88f35f1a9","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.1.1.tgz","integrity":"sha512-JHWvnUXVLZ6gZRggImTzYDdqIEHRXLKZt74HMK0DQskHIBGXW0aEXydyuLtc7f2KbyFc2ScRy2m6bxvDbQuStQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFO0hRZDUTo529TfZalOV4vZ4fo0Fqo6aH5WRmvJhuhTAiBP2sccK2N4BXPpgkRUh16pUPkmjh2NSjVeH+r22XCZkA=="}]},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"pornel@pornel.net"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"tim-smart","email":"tim@fostle.com"},{"name":"tunnckocore","email":"mameto_100@mail.bg"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/formidable-1.1.1.tgz_1484514649272_0.35996662196703255"},"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.2.0":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","license":"MIT","version":"1.2.0","devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"gitHead":"02fe17120037a2c54b4af005a14dc93b4881c0bc","dependencies":{},"_id":"formidable@1.2.0","_npmVersion":"5.6.0","_nodeVersion":"9.6.1","_npmUser":{"name":"kornel","email":"pornel@pornel.net"},"dist":{"integrity":"sha512-hr9aT30rAi7kf8Q2aaTpSP7xGMhlJ+MdrUDVZs3rxbD3L/K46A86s2VY7qC2D2kGYGBtiT/3j6wTx1eeUq5xAQ==","shasum":"ce291bfec67c176e282f891ece2c37de0c83ae84","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.0.tgz","fileCount":13,"unpackedSize":143530,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDFAgB2MXzP4+tNko4Lcgpho5zP8DKeg7dqTE4EsLKoZwIgPx96sz4kiAE4lLOSQftwsmrskR0quk8if3t11TqcLPE="}]},"maintainers":[{"name":"chalker","email":"chalkerx@gmail.com"},{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"pornel@pornel.net"},{"name":"olstenlarck","email":"mameto_100@mail.bg"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"tim-smart","email":"tim@fostle.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.0_1520428291722_0.6406727940388302"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.2.1":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","license":"MIT","version":"1.2.1","devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"directories":{"lib":"./lib"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"gitHead":"bd73dde95316d6d3bd1934ce5740aae867dd5af1","dependencies":{},"_id":"formidable@1.2.1","_npmVersion":"5.6.0","_nodeVersion":"9.6.1","_npmUser":{"name":"kornel","email":"pornel@pornel.net"},"dist":{"integrity":"sha512-Fs9VRguL0gqGHkXS5GQiMCr1VhZBxz0JnJs4JmMp/2jL18Fmbzvv7vOFRU+U8TBkHEE/CX1qDXzJplVULgsLeg==","shasum":"70fb7ca0290ee6ff961090415f4b3df3d2082659","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.1.tgz","fileCount":13,"unpackedSize":143711,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD1WoHJDU5In4tiuYoZh3HTpzFBbXO8Wf6RXvtkkPgaJwIgCB8KHeLy/QRnV7/R/v8FsFYvYpgHd9hEAFiJTNiSq2c="}]},"maintainers":[{"name":"chalker","email":"chalkerx@gmail.com"},{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"pornel@pornel.net"},{"name":"olstenlarck","email":"mameto_100@mail.bg"},{"name":"superjoe","email":"superjoe30@gmail.com"},{"name":"svnlto","email":"me@svenlito.com"},{"name":"tim-smart","email":"tim@fostle.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.1_1521559805623_0.44607140694001024"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200129.2":{"name":"formidable","version":"2.0.0-canary.20200129.2","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"cleanup":"rm -rf test/tmp","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup","test":"mkdir test/tmp && node test/run.js"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.11.4","urun":"^0.0.6","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![npm version][npmv-img]][npmv-url]\n[![build status][build-img]][build-url]\n[![chat on gitter][chat-img]][chat-url]\n[![MIT license][license-img]][license-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is provided, all fields and files are collected and passed to the callback:\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If hash calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n## Ports\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n\n## Credits\n\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[build-img]: https://badgen.net/travis/node-formidable/node-formidable/master?label=build&icon=travis\n[build-url]: https://travis-ci.org/node-formidable/node-formidable.svg?branch=master\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n","readmeFilename":"README.md","gitHead":"2a12a8b2eecd12386235f4543409bafb45daad0b","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200129.2","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-qv0BWu52bC2uyP2OXgYJUZktbNWaKHmqC74HrG1GNO+smachFOBdJ0Tqq1GJebTHbe2y9sz7CQxzL56MQ3sczQ==","shasum":"4063e14d4b7f904e1fb90bf9afc319478b8bf3e2","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200129.2.tgz","fileCount":12,"unpackedSize":49909,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMQYCCRA9TVsSAnZWagAAzOMP+gK/3GOdfMNFE1WRGvp1\nBrfwIX6dtnhxKy1lUZGs+LBwJ9pn/Te8YIGwcLZmXNpNDWyanPtSdVyn2vSq\nLtxYPcJzb8yg0apg8nwxo4uHLgIPcIsKHNYkMELiz+/qv+cDq5uXx67NJuqu\nZKQKyTgHR/BNzYJJAWkKl8yKk6DKywwWGMcIzbJpP4qzloYa6jGYJS7w0On5\n3VllM8fjvZ9xe91tNxGmUycc7KZ4wULZsF2wzFOjW8vKn/Xd9kF9GhgBLzfw\nniX1bgZ2LBtV8bijY60UVxUc0YhKCjdcRuXOrTrhsspwIMXtn6qZTXAJynmU\nAHjNlcxxhdiHYOAXk2WPhTN17o+3f+TC1neK/Pv8X2i0k27vi0/hgseiqVa3\nooVz07Mu6iwjUGm82DT5+bfUqUza9PxJNsY2mR3+DG57C3pn2yB7IsSGRkob\nqya7piCR/it2weOLo+KMigrQz+YOzpQusUMXKySFdT9DgUjENkXunOTwjY6M\n40JPpCyYXjCbhD1QjpSYmXy0ugMsU4kjq3PmNeP9oquFspC5yo99crI1rVUe\nHnsbXpHJP/tZkTCKbgwDbr9N+Ad4Ds28Xrq3Y3zlNFarSD1jQW/UAmt4bVWO\nV4cu39JEuTnRS7DeCiq1nA8KhKM6Eh7uIwAe+Cg+vLktbFGhn106Oz5y2D2p\nsnuQ\r\n=/mDE\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC6z7DKnSGW3fbbPSNo0Fg/qnx9If1IjPfxa2iAF4qQVAIgO4JzgLq/a7G2lMp+x7Ayzw7CbwCShUapvNZpPxsSVfk="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200129.2_1580271106336_0.9408618621921363"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200129.3":{"name":"formidable","version":"2.0.0-canary.20200129.3","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"cleanup":"rm -rf test/tmp","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup","test":"mkdir test/tmp && node test/run.js"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.11.4","urun":"^0.0.6","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![npm version][npmv-img]][npmv-url]\n[![build status][build-img]][build-url]\n[![chat on gitter][chat-img]][chat-url]\n[![MIT license][license-img]][license-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data.\nIf `callback` is provided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\nIn the example below, we listen on couple of events and direct them to the `data` listener,\nso you can do whatever you choose there, based on whether its before the file been emitted,\nthe header value, the header name, on field, on file and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit later.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n## Ports\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n\n## Credits\n\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[build-img]: https://badgen.net/travis/node-formidable/node-formidable/master?label=build&icon=travis\n[build-url]: https://travis-ci.org/node-formidable/node-formidable.svg?branch=master\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n","readmeFilename":"README.md","gitHead":"26b764086a9b756247597e1a9189ce7ec0e7156d","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200129.3","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-AK40O/TRSzj+hFABivCYRVBlPq7S6+dzJbOljWA1c+mJEdtEcqPWnjUIeAQJwqC5p46jTjSJi4GnMV4ceJ9saA==","shasum":"ee7722dde69733e45ce909b74e02c85ad2b4bf04","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200129.3.tgz","fileCount":12,"unpackedSize":51292,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMQ1WCRA9TVsSAnZWagAAlmcQAJR78H1Ryqy1pk8v0rpi\nCBHKfeZUm1NF2Ojkb6NZy84K0BF1z5Alx2Pwty3I3sD96wyic3ZTBLnJQmZl\nsY5Bgxk8LrJVsIJp7J5m1qCGc/5yBXjDp+5EZqaj84i5KIsZo/h3LFs1udZ9\ngAcND8ryDXVNFvxzBR3+tf13o0enuuw7+Y2A4qU7SEWYk3ItTaRUSnK/5Wii\nyrbqaag5simUnLn1xcMNoV62goj8n16mwTpHbvsVEQfbzNHWzcE4DfLfGV8R\nSsk3JKIEgfzDgI79wYSZyoN4Dk0tHOamyMMNAPFjkUASn0x4/EIlXlRBzA0P\n2UbUQu4jYOaP8fHgGZSkvLXkNTDdD9fLPCrPjj0Ea3CBe7pP6FwciOJDpp9e\n3nbAS0LbLuOVyF66YiYc7w8drL627hpEGKtVPtawvclMIZtmiU5WjCg7oJAV\nyb+FIe9MgAtxjt1Ct/PSTu4CvBVBAfE/3+oQL1HsB/RFYij0adUCbiT2DoIj\n1SCJOuqOO2tX9vlxqDnSyeg7EbNv08OjsT8WrqD6nj4z5h8+LMAA1MMFisBh\nCII62lNLW+KyK2WsIxdLi6yyd483NMxW6dlIoRml+sTcA4OvS4ziRjDcL4It\nurPtSVTjpkBpTOPw+uyeFfdzjJ+7ycbKsAJIRiAq3GYWc1b0LtwEG62qx9eS\ngzyU\r\n=Wy7I\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEEIBQGgQaBvHcGMssuQURmWBrKKaHe+Fm4dg2mWm3Q0AiEAr3OhXlzE+bfKbE4xxT6AY3SvQZR8jmqBJWUcEsz7HyY="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200129.3_1580272981767_0.6598663981597537"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200129.4":{"name":"formidable","version":"2.0.0-canary.20200129.4","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"cleanup":"rm -rf test/tmp","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup","test":"mkdir test/tmp && node test/run.js"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.11.4","urun":"^0.0.6","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![npm version][npmv-img]][npmv-url]\n[![build status][build-img]][build-url]\n[![chat on gitter][chat-img]][chat-url]\n[![MIT license][license-img]][license-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data.\nIf `callback` is provided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\nIn the example below, we listen on couple of events and direct them to the `data` listener,\nso you can do whatever you choose there, based on whether its before the file been emitted,\nthe header value, the header name, on field, on file and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit later.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n## Ports\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n\n## Credits\n\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[build-img]: https://badgen.net/travis/node-formidable/node-formidable/master?label=build&icon=travis\n[build-url]: https://travis-ci.org/node-formidable/node-formidable.svg?branch=master\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n","readmeFilename":"README.md","gitHead":"8ea22e020b3ede2184c417de8592d052e288384c","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200129.4","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-9QIPQc48W8+PGg9r/1YxkXjKYpSXMC72LHwl8HEQGIVn7jxKi/n1cPI+DYJTn6ZUp/fTCc98wbLF0WMYk1GUXg==","shasum":"2099fcdba9347002275bd87c0e6e00e8a959a860","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200129.4.tgz","fileCount":12,"unpackedSize":51325,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMQ/TCRA9TVsSAnZWagAA3RsP/0uTnzMmARFeQX5W7BPv\nfhUoilwdNhtgrJIetKCXArnA/ZxrtjZREXxhuIm5nlXeLlywnOGghTXwKf1W\n7/dp7+a+yscASOeR3zImSvrWSn1mFgGLzYsbl0ItC4a8ulW9E+7QlwS/JS6Y\nuXBNgynunx9YazH+0xlCJO97XwNBwIMJL+SciAcu3Y7TJ2XtQIvAvoi8tBIs\nNfI2WZZzJ0/3RVyXIP6i5RVuzVu4Jm8HGfbqBbIzfG9FgLiId/d6ZBiBMuOs\nQ89lLD3YHPLDVY6crVOMzKODQdVi17rVx9b00IQ9xTTOkPwKSAAbZJdtc7/A\nyMz1dN7RQji5I1IuifE87fwsKjsBDiq+cJrESSj1QDSAyvVnrRpL+mWERuV5\ndrbsiyBBLD+w59Z4JYCsXSgbnsssoTA5lADiBH718ApYLBrRY1DKT9v2t2fS\nJcnZEpytu0Ywyhw2khhsqG4TRbQN5YWhGXCVjrftqe2EA5a2T3GyDTc08Acb\npfyDqP+ImrHrCm7JtNkPUdz73T1pnS1cXoE7LNAK2vWBH5HMSkZnCJxUOBYR\n7XYFzpTeaucHHT7Y3/PAkKAZQpk/+6ZyLTCvVh/wi2V28FX/2fFXy36CBzVd\nsSIj8t0p0RfvexcDSBV4n/+OXfE4UYTOU9GKuNtPE9ngtbIrJ7jWicweKpMy\n4eVC\r\n=+ejB\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHpvCnQGlfh61g57k5o86cbHx5hJhfDfUGlmENeaIoLBAiAiSNQMnk7GYIivFUa82/wSmsI/jCGeif/8/XVqI1HXmA=="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200129.4_1580273619199_0.0764005023952623"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200129.5":{"name":"formidable","version":"2.0.0-canary.20200129.5","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"cleanup":"rm -rf test/tmp","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup","test":"mkdir test/tmp && node test/run.js"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.88.0","urun":"^0.0.8","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![npm version][npmv-canary-img]][npmv-url]\n[![build status][build-img]][build-url]\n[![chat on gitter][chat-img]][chat-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data.\nIf `callback` is provided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\nIn the example below, we listen on couple of events and direct them to the `data` listener,\nso you can do whatever you choose there, based on whether its before the file been emitted,\nthe header value, the header name, on field, on file and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit later.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n## Ports\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n\n## Credits\n\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[build-img]: https://badgen.net/travis/node-formidable/node-formidable/master?label=build&icon=travis\n[build-url]: https://travis-ci.org/node-formidable/node-formidable.svg?branch=master\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n","readmeFilename":"README.md","gitHead":"7c8e9e0e43dfd404425f97462e337cb998a68c71","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200129.5","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-OhODaJxPr3zdGoJqnPUWpNO+9Zj0NUr9Es0kXnULrfWOkC5gkl4DhxuzqsjYYfPc6LM+DW/KhST3Ac6h5qMOcA==","shasum":"1720b0f6c16a633b458dc6b241abac4baa4b2d20","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200129.5.tgz","fileCount":12,"unpackedSize":51440,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMR7iCRA9TVsSAnZWagAApCcP/0G6KTDaTTQtC7HdHX6k\nr02h88uTBUJVM1G27k0kr7o0THdz3Sh2hRTK2j21a5Mz4vbxC8gfj/ieF8lV\npCKW1CVy8vAGCR00x/0iZocXXYCGg0Fbxfq24nJjxRDFENy0CH0jAeW51jgc\ndCHnOrziJvudCI2WcP1e4wCz7JvJVkWpCnSlVNQmO3w+QSlrm857eI+3Dizx\n8wnSz7F3UsbK+0rZQIODvgtp2GqNSRabeSg3BfKnGyLcYzKfmRB8+iJSOXcK\nG0NdJvfbfHyFytOIb6JnWeQ27OHw1XVqH7vlqVzGbDg2Y/tWMnh+76mi557C\n9uCp3asrguwZAJA46Wvts8qW08/m67s2p5VeZSfu6iFenOxd0rgW9QnptlUW\nAkBNH49QDrF9e/+bddRGJ8HDzCQ9j06/lvn2XSXGrhjRjB/RduNG7c8RzB/7\nRvmXFVJFmYE0nW3dyzELryqNy1yAMS/0afnNHpPWuuFhmiORrfTInLxor4/+\nIi7hFJ7Pu3USnXVKhehXvH7kOSlakKO7gi2/eIBLnuW4WphU4kj7e6uGi1Nq\nsmzu9oENqZpC8A6FwqmY/CBGK0V1+0JLVKFKsBdYZm+zKtaJXIamcWzad8PM\nsLRbtcVJ/4hQoFIj8qZv+wBxQr2vdij3jsm2tuPHYEi5USD8KxkHeamaNXdP\nIpg7\r\n=AnlT\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIC38W4KMHmykWBXsjsNDEGtYkLudJ/eoW2ijW1/T1jWvAiBTbnYaiFos4U27cl6QD25HFpRaA4pUpd1B/limBzeY+w=="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200129.5_1580277474345_0.8366912985984942"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200129.10":{"name":"formidable","version":"2.0.0-canary.20200129.10","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"cleanup":"rm -rf test/tmp","fmt":"prettier '**/*.{md,js,json}' --write","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup && mkdir test/tmp","test":"node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.88.0","urun":"^0.0.8","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![build status][build-img]][build-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n[![Twitter][twitter-img]][twitter-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n[![npm version][npmv-canary-img]][npmv-url]\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data.\nIf `callback` is provided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\nIn the example below, we listen on couple of events and direct them to the `data` listener,\nso you can do whatever you choose there, based on whether its before the file been emitted,\nthe header value, the header name, on field, on file and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit later.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired the initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix a bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[build-img]: https://badgen.net/github/checks/node-formidable/node-formidable?label=build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n","readmeFilename":"README.md","gitHead":"d5365d8ac97e6e5c3c44c591b3e3240fefd1d8c8","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200129.10","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-2alffs+57OwPWD49/VO2u6r1qzgxz5GfyKpu1yWk9lc98QqJhI7pe0lEmE/0v93We/YcBZF3QV746hpBLkRsXg==","shasum":"552cd02d06323c0b90852f040a3aa857961a72f9","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200129.10.tgz","fileCount":12,"unpackedSize":58939,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMcM5CRA9TVsSAnZWagAAVQwP/ic+K0fn8vs1itvvvNJR\ncFKqah/PlvnUjOQrE73fUkK2txKIuQtEacvGmfL8+mrK4bh2hlNKPcrJCX3B\nFmGhYCnVRMi/JC+oS0rnsh4coBxfb0I1ngXcwDNOwjDeHVSt2x08568KSc+/\nZiJ4yCd3DcNXilTHAObf3+CqzCYxFNHk3wpkGuk99fOlXZ42AezexAek39Dc\nv2bUh+tH3+9xfz/tW4bnxPFHldTp5AB2gz3OcP+F/WfirHmCQfRoTIDKt30l\nGPb59aQROx9R8I/iuSpEbYGbhhwJ9Kf90gs1OCWyFv8OkLJWW/cG8PABHH0x\nnoo0DkcNw6AdfKsrAOdw1yFDZJEcfKf1GI9JhlZiVD1pqPR0rQxKU8RbBPLb\n29I6+9TsOF1qVQt7O032lD/N3BNS5vW9ilOPsiQT2zOdSGhGXvDVfak0t9b5\nqGvlDi00KseNUYd/Sf8BF9y1MOXcZOTx/I0esLeWMhOv+Con13BHNLi4xabE\nNuMGvmJmecOdtTxim/DgmPRxfFOVYVbQTh/AElzK27od6CDpcYr2kZUizgXv\nFzkPyEFrcK08p7oSq6irtCq14C2383n733dNJhLs+YMxMmwfIIkNXnkUfPQ+\nWp1lbkZae+0jsjLC12FGn1brRAyWbf9jpzzenhBF7hokBQ9sFh3rT5ivzx+3\nbZH3\r\n=kjWO\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDPtm8Oon3Ec3wzKUbRQWItHNhoVoxZ9L4pbP31B4nzsAiEAnSm8/omY/3TS9gW1JMomxv8BGWMWA8DnN0ox85VF4KM="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200129.10_1580319544969_0.6513922648031121"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200129.32":{"name":"formidable","version":"2.0.0-canary.20200129.32","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"cleanup":"rm -rf test/tmp","fmt":"prettier '**/*.{md,js,json}' --write","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup && mkdir test/tmp","test":"node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.88.0","urun":"^0.0.8","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![build status][build-img]][build-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n[![Twitter][twitter-img]][twitter-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n[![npm version][npmv-canary-img]][npmv-url]\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data.\nIf `callback` is provided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\nIn the example below, we listen on couple of events and direct them to the `data` listener,\nso you can do whatever you choose there, based on whether its before the file been emitted,\nthe header value, the header name, on field, on file and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit later.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired the initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix a bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[build-img]: https://badgen.net/github/checks/node-formidable/node-formidable?label=build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n","readmeFilename":"README.md","gitHead":"7970ab1dca6e65c530e5b3aed15fa6dcb6dd5ea4","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200129.32","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-jeRANkKf986UkrCxgGjxWS125QlptN9HquunObpb7MLB/n1g5KNDmRHtdaAQgN4lbskqj9YRBBtseQR/Y3q14g==","shasum":"dce6e1a7ced7725d8a0b82eef7dc62d0fab365c1","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200129.32.tgz","fileCount":12,"unpackedSize":60768,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMdAQCRA9TVsSAnZWagAAi4EP/jwER/IHXajrwfW3lAWY\nhiO0P2rlf48DYqnV4+sICN8lYE7Mn1SRrmbvWBhAdtCs5A1EzDb+Pchuc2tc\n4HiBPwclW0neOv8CowCkEVeIR1CwAEFVbXHrE951K1D9zyI/QCHHdd8PENiU\nprhCoCkWEwcCEoYyF4wyCWyxTBC4VC1/3KvAHUQFgRo5MFI+ucNhz5EqVK0D\nBr71mTsf5Q7x7qMonBrVl8H83Vfwq5JKngtu7HR1HeK4sVBJuM8XrtE0yxCz\nKisj3Kn+etV26l4qMCoR+LLKZEJIAvT1A8AGmUJEBFBvFZaeUfEpm2HOe1cm\n5DRnH2jJjwCwq6CEAExHYcYzPIFhPcOuMsPiosDzkLRCSWEsNQwW2ZJ/zy8j\nH28uiATSWgT4V78u2X7ojU5n5VtANarwp8P2y14e72rrYPoZ5HSHzlgLv34+\nf+hRgGKKQE4BuZcSuPyT4LSlZIdn6xFSX4Qxn1m4O1STqGJ6q2YjWBN59PCY\nbLrn//a54YN4gvZ9thMNRZSgWdXCCyfAAQYuPnIBmhS36peFNXhl65JBQEQ7\niHpK6StZA+uXOinaC+2df6mC6AGdtF+kxFZYcBqxj0d/fVxZRf+18xqTEWuv\n/AyyJxL9lOY2rVeek/f5EzsTc6v6bieBX4DwWeU8cNO8GddyHA6SjVlHzSPx\nlKKp\r\n=cA2n\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIC/kRXp08Et/1gxQY9wrgsrPutl5KcbvX0mKUvpuWT8FAiBBfOnyZLwkcGlRs2Ek9J7ZqmfgKZhWDf2NRTI22ZVBBQ=="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200129.32_1580322831876_0.7314079292535549"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-dev.20200130.1":{"name":"formidable","version":"2.0.0-dev.20200130.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"dev"},"scripts":{"cleanup":"rm -rf test/tmp","fmt":"prettier '**/*.{md,js,json}' --write","lint":"eslint . --cache --fix --quiet --format codeframe","pretest":"yarn run cleanup && mkdir test/tmp","test":"node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js"},"dependencies":{"dezalgo":"^1.0.3","once":"^1.4.0"},"devDependencies":{"@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","jest":"^25.1.0","koa":"^2.11.0","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.88.0","supertest":"^4.0.2","urun":"^0.0.8","utest":"^0.0.8"},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![build status][build-img]][build-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n[![Twitter][twitter-img]][twitter-url]\n\n## Status: Maintained\n\nThis module was initially developed by [**@felixge**](https://github.com/felixge) for [Transloadit](http://transloadit.com/), a service focused on uploading and encoding images and videos. It has been battle-tested against hundreds of GBs of file uploads from a large variety of clients and is considered production-ready and is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors are always welcome! :heart:\nJump on [issue #412](https://github.com/felixge/node-formidable/issues/412) if you are interested.\n\n_**Note:** Master is a \"development\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the Npm.\nThe`formidable@latest`is the`v1.2.1` version and probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n[![npm version][npmv-canary-img]][npmv-url]\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the development version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the development version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body)\nwhich can handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to\nthe new Node.js Streams API it's faster. You can clearly see the differences\nbetween the Node versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor,\nnot by passing assigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the extensions of the original files or not\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb); limit the amount of memory all fields together (except files) can allocate in bytes.\n- `options.maxFieldsSize` **{number}** - default `200 * 1024 * 1024` (200mb); limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields that the Querystring parser will decode, set 0 for unlimited\n- `options.hash` **{boolean}** - default `false`; include checksums calculated for incoming files, set this to some hash algorithm, see [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the `.parse` method, the `files` argument (of the callback) will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute. Also, the `fields` argument will contain arrays of values for fields that have names ending with '[]'.\n- `options.enabledPlugins` **{array}** - default `['octetstream', 'urlencoded', 'multipart', 'json']`; list of enabled built-in plugins, for custom ones use `form.use(() => {})` before the `.parse()` method, see [plugins](#plugins)\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data.\nIf `callback` is provided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events processing which would occur otherwise, making you fully responsible for handling the processing.\n\nIn the example below, we listen on couple of events and direct them to the `data` listener,\nso you can do whatever you choose there, based on whether its before the file been emitted,\nthe header value, the header name, on field, on file and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit later.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include 4 plugins,\nwhich esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with\nthe Formidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and `options`\nMAY or MAY NOT be the same. General best practice is to always use the `this`, so you can\nlater test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable the plugin\nwhich corresponds to the parser. For example, if you want to disable multipart parsing\n(so the [src/parsers/Multipart.js](./src/parsers/Multipart.js) which is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then you can remove it from\nthe `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hash: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1\nto files in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example,\nmore advanced querystring parser. Add your plugin as a new file\nin `src/plugins/` folder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do something similar.\nOr see [#387](https://github.com/node-formidable/node-formidable/issues/387) for inspiration,\nyou can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html fields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding\nto requests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired the initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix a bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[build-img]: https://badgen.net/github/checks/node-formidable/node-formidable?label=build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n","readmeFilename":"README.md","gitHead":"b44bcbd3f061a5bc025c1b0ed584b712851c5be5","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-dev.20200130.1","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-lkCyK7jh+5y+kCFlXirAN07Ecr9V33UBiJVlxdtemM9gKdIQda3ZBNyfzG7qow8HN7UtnkJYMlcg0FNP8XiyCA==","shasum":"3df3ee553722ccde7017c816daae40b774d24753","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-dev.20200130.1.tgz","fileCount":71,"unpackedSize":2073034,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeMi5SCRA9TVsSAnZWagAAP1kP/3cwj7T7yvXXxLX5bzGk\nA2yXSCcM0ypdp4icFAEPCO8ZPE9MjBoRp2h9XlsdNaiPu0EPI/ebCJacK0A/\nHZP+IY2j5J4rffQhyESwUsr7jlLRxbRNxSf3Tw4BkqKlEuURhsPBumEZN2/f\n2bXZzAFV6n50PR0kvVlVgCG1yNOopkoK+njkkBoegQy3OW+KdD2XEiaP6VFg\n4n0xOwwwA3xBTNgDu8eBRUjte5v9kOSBeKyTQ2EXqGPxdkQvsMUohWGaTIAD\nToJogfu+mA6bmmnkiGmaIyYmj0F9Jv2gLYhCmSjU5KP3ZO+1eEAS92+qN6vb\nufoILpn0l+uoP+8peKNn6y9k06XGOpsPQo5IKgyy+I9/0u7dAeVFRzpY97Aq\nj/5nqK3OGa8s1mQBbxox4jC2ixz7Lo819KFggslssgLeDlzRq81QwNXmFk0L\nZiu5wDgugLnObQEDY4A6i74+4q90d8ggd0yD/IzLAjUB6v775+KazsaSqgzq\nGsnzVseUMuq/UmZh+1dzYXsyznDlWu0j2nRIlwkzffPNbPlkU3LdDTVJtWut\nsmpwAYnnBbv7lBx2/pFp1m5ulomtyTBO6UqXn3CLRp3E2IXcAkgvyvObFmcT\ngwrN5uRbML9fl8ISVKcU0lKwMzr0XesC8xLpVeqF+hEEDAPGpVJ3OdHWx3ew\n7LOr\r\n=d5wL\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCmiIJY7Uf94Y6iyG+ogtH9vhJ+wKTfKixaYPrti19NBgIhAOTu51SX+GHtSW2G9Vm5LozvWQ/6+mTT2QKBr72vqO68"}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-dev.20200130.1_1580346958763_0.24242945862713872"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200131.1":{"name":"formidable","version":"2.0.0-canary.20200131.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"rm -rf node_modules yarn.lock && yarn","pretest":"rm -rf test/tmp && mkdir test/tmp","test":"node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","husky":"^4.2.1","jest":"^25.1.0","lint-staged":"^10.0.6","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.88.0","urun":"^0.0.8","utest":"^0.0.8"},"husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![build status][build-img]][build-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n[![Twitter][twitter-img]][twitter-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url] [![npm version][npmv-dev-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) if you are\ninterested.\n\n_**Note:** Master is a \"canary\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the\nNpm. The`formidable@latest`is the`v1.2.1` version and probably it will be the\nlast`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\nYou can try the\n[Plugins API](https://github.com/felixge/node-formidable/tree/plugins-api)\n([#545](https://github.com/felixge/node-formidable/pull/545)), which is\navailable through `formidable@dev`.\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may\nalready be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart\nhandling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body) which\ncan handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by passing\nassigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[build-img]: https://badgen.net/github/checks/node-formidable/node-formidable?label=build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"88d22b8a097710e753a7d12f5667620731993df3","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200131.1","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-A1qoSfcobB9QHknvTGAUxDaUWKN+/P2nhFur8n+QPYE8BY//boyxuTJHOw5Vp5iOdC+G8YPpbuMETuV2gBIjJQ==","shasum":"c6d374fc833fd6587e55751bce515f216a96122a","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200131.1.tgz","fileCount":12,"unpackedSize":62490,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeM+pPCRA9TVsSAnZWagAAep0P/AhLYUKuf8WnGqV/v/+5\nFp929Ka22EL28W0rGZfmqy9PeSed6DmAnuQiEnmwCUsZOrX5OdKsIiPak1W3\nO51+DclZWjOf8lRxvHKYak5pbtJV9RNptn65yQwkdkDf3rH80DvLilyGXUVt\nFYZHx9z5ra4BxUJ6MtBW5TWv/0AYcBvsYMoZJ4Ro2yqXH0fedEx9vDoCG6Wq\nyRzsAkgtJt1wJUD3ZIrGUfE8XBqDfOX/Fk3F5j68D9RWqCjUklKHl3i25aEe\nsvHyNrn9hRmg9DxgpiBnlUQzb8OwQqWy5lF5VwCGNFaKJz/WaN1HoVP35PiG\njbZ2+s5YW3wM/C9JDMBdycn/W7CqYdWmgVPaynwgaaQIx3o42tU/MRbSGFPh\nBKYCMMtkeA5yPd7yWoG93IdWr1naitGn73qkFpTiyOiyUaGK++PCEpmXLu/5\nmsBnfbBzMRKGTPhtZ4/cBWxjFAIpUyh8DoC0gFwWEUh7Mjy0KJJvl7FXeUMH\nLeWXTU21NaWJUey4Q6jgszJTVtWuXC2cEWxNThMa38Oy5P2nbx4x1Xd+UKnl\nlTRsWbY7dfZrVeY8r3+yLO/zHsVv0/bhg4RXdZBlBtMokb6/sPouHFP1eUjJ\nHlLUkLb3WtWDTIZcR7mgUVRNvCZU0Dj4apm8DMpj8x2W/c3odKDvmz1t1R6a\nVi79\r\n=xKMK\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBx/ys2ACVGUfrSRA8WFuRIqdA2a1dvx/cPC+ftYMPaQAiEAk9IwN87T32e8mfmnhKDw3P0mKeiuC4dSLi4Z7MzNn/M="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200131.1_1580460623221_0.8104394355906412"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-dev.20200131.2":{"name":"formidable","version":"2.0.0-dev.20200131.2","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"dev"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"rm -rf node_modules yarn.lock && yarn","pretest":"rm -rf test/tmp && mkdir test/tmp","test":"node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js"},"dependencies":{"dezalgo":"^1.0.3","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@tunnckocore/prettier-config":"^1.2.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.0","eslint-plugin-prettier":"^3.1.2","husky":"^4.2.1","jest":"^25.1.0","koa":"^2.11.0","lint-staged":"^10.0.6","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.0","request":"^2.88.0","supertest":"^4.0.2","urun":"^0.0.8","utest":"^0.0.8"},"husky":{"hooks":{"pre-commit":"git status --porcelain && lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![build status][build-img]][build-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n[![Twitter][twitter-img]][twitter-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url] [![npm version][npmv-dev-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) if you are\ninterested.\n\n_**Note:** Master is a \"canary\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the\nNpm. The`formidable@latest`is the`v1.2.1` version and probably it will be the\nlast`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\nYou can try the\n[Plugins API](https://github.com/felixge/node-formidable/tree/plugins-api)\n([#545](https://github.com/felixge/node-formidable/pull/545)), which is\navailable through `formidable@dev`.\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may\nalready be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart\nhandling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body) which\ncan handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by passing\nassigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hash: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[build-img]: https://badgen.net/github/checks/node-formidable/node-formidable?label=build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"e02c69cd21bca200da1a85b17ce5a0242a411e6e","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-dev.20200131.2","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-QqOPy9YPdGO0aL1iW2xNjABA+qRvb5H24iV6cFAwtJVfo8XsfJ7EcNocuxBI6oAt83fNCfBN6GbcqB5A5xvR1A==","shasum":"e36fa8bc527cf83a3f8bb042c61062513e7dee03","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-dev.20200131.2.tgz","fileCount":71,"unpackedSize":2074594,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeM/BFCRA9TVsSAnZWagAAGvIQAJV2Op7Zcdo8ypcVoy49\nXMf8+TOGl1x28gEz6UdoNLTYEQFQKuYkIJHoPk9KdhK760cIXK9lrsnFAeMI\nq3OjzIp95Ebud611B8TNoWdVz/eIe5mDzKUS3XpzmIMfOpgshOl7pBe+i0h9\nVoerIL3bUXfA20iD9xfmyCZDkHYlp459DJR56WmeKaCw7ppDM/TURiBfsVJo\nWT9FhMtvWp6b5DZ98bHb7N92jncttJtblXcxz7PfGvnsnsLEPLHZwN9h+7mz\nfOWZ+RO8WrIgCseCl+mQSwZfsW2aEfBdq6lgZVN9SJz4h45bGP5EvsTWg5Kc\nuAEyjy5EnGWpJibx2JvIo+2PrgsIlMiXUnKsTFRZtu/+T4HygM3ChfdENnDS\nI5mUYZfzVGQtCfNClKq9o4tNOP+zxAiEbrasJ+NTnngE2M31vNwRjdMZPgXW\n3BIyQGlHdCuTWJGj8ClsWmpcSqRP/x7zVisxx7QdxwHFMGnxugLjDDurGPZ/\nJ5FmxRunGseF/IiQsdaTKeco7IHhTtK1NtEqCJ/P4hRzMDjL0w3ZYMSOVwUr\nrjxkWRDElx7//N9bV6z8D09VIZ3F7EldsdAq3LmR9zaVay3iVzv5FFCYg7AQ\nM0yZ3kJzG2O4hHu2Nhu4w9enawxLh7cR+74PqQuMT3d9CXPZD4tt/sNNptoS\nQdHr\r\n=mibo\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGGpFtEVptFuVX0Lt2Yq+t//Y+iLMeOTRZplZXsRy1+lAiBoZHt2YKOr42tOrP6tiN06OUVTKGZC63cieUXH0LT3SA=="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-dev.20200131.2_1580462148521_0.9097906830685603"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200212.1":{"name":"formidable","version":"2.0.0-canary.20200212.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/node-formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/node-formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"rm -rf node_modules yarn.lock && yarn","pretest":"rm -rf test/tmp && mkdir test/tmp","test":"node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@tunnckocore/prettier-config":"^1.3.3","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.1","eslint-plugin-prettier":"^3.1.2","husky":"^4.2.2","jest":"^25.1.0","lint-staged":"^10.0.7","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.3","request":"^2.88.2","urun":"^0.0.8","utest":"^0.0.8"},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore"]},"readme":"<p align=\"center\">\n  <img alt=\"node formidable logo\" src=\"./logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![build status][build-img]][build-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n[![Twitter][twitter-img]][twitter-url]\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url] [![npm version][npmv-dev-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) if you are\ninterested.\n\n_**Note:** Master is a \"canary\" branch - try it with `npm i formidable@canary`.\nDo not expect (for now) things from it to be inside the`latest`\"dist-tag\" in the\nNpm. The`formidable@latest`is the`v1.2.1` version and probably it will be the\nlast`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\nYou can try the\n[Plugins API](https://github.com/felixge/node-formidable/tree/plugins-api)\n([#545](https://github.com/felixge/node-formidable/pull/545)), which is\navailable through `formidable@dev`.\n\n## Highlights\n\n- Fast (~900-2500 mb/sec), streaming multipart parser\n- Automatically writing file uploads to disk\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it may\nalready be included.\n\nHowever, [Express v4](http://expressjs.com) does not include any multipart\nhandling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nFor `koa` there is [koa-better-body](https://ghub.now.sh/koa-better-body) which\ncan handle ANY type of body / form-data - JSON, urlencoded, multpart and so on.\nA new major release is coming there too.\n\n## Example\n\nParse an incoming file upload.\n\n```js\nconst http = require('http');\nconst util = require('util');\nconst formidable = require('formidable');\n\nhttp\n  .createServer((req, res) => {\n    if (req.url === '/upload' && req.method.toLowerCase() === 'post') {\n      // parse a file upload\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) => {\n        res.writeHead(200, { 'content-type': 'text/plain' });\n        res.write('received upload:\\n\\n');\n        res.end(util.inspect({ fields: fields, files: files }));\n      });\n\n      return;\n    }\n\n    // show a file upload form\n    res.writeHead(200, { 'content-type': 'text/html' });\n    res.end(`\n      <form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n        <input type=\"text\" name=\"title\" /><br/>\n        <input type=\"file\" name=\"upload\" multiple=\"multiple\" /><br/>\n        <input type=\"submit\" value=\"Upload\" />\n      </form>\n    `);\n  })\n  .listen(8080, () => {\n    console.log('Server listening on http://localhost:8080/ ...');\n  });\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by passing\nassigning them to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this value is exceeded, an `'error'` event is emitted._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[build-img]: https://badgen.net/github/checks/node-formidable/node-formidable?label=build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"d413c1326fec2326390317277826695b293c3670","bugs":{"url":"https://github.com/node-formidable/node-formidable/issues"},"_id":"formidable@2.0.0-canary.20200212.1","_nodeVersion":"12.14.0","_npmVersion":"6.13.7","dist":{"integrity":"sha512-2MSmuN+bRoH+yTctAMMvi4xB5iQVlGbpO40Ym959wbE1Hy+g/gtVrel7rMKAbTosYu6VcQ1Ih5exPKSRcwzfiA==","shasum":"f6571dca559f53af29a3428c01bdc4291a8c9394","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200212.1.tgz","fileCount":12,"unpackedSize":62898,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeRAEHCRA9TVsSAnZWagAAG3UP/13XIsna4yRJBSZsC6lJ\nbWeNBuNa3j9OE/Rh2I3Wvrl1EdAmycBDjooMQ9nzrOCPbbb7+ZvCHShFKo4H\nMQCcLXAnaKKlShRAp4HxllJ43J/59bMLXdExyIbVsj03+Z5wKnCLYd6GSOkm\nNSipnsUP7UhQDdBu4htwomR7QrFizmd2Yic6gE44aVZTCDm1PkEff5HUOE/u\n2hwUSlG6pdTYO5bBfExpcQVaTakEebZUzL8Di3DrFiTtNMO5XVgcr/mHKFp9\nMreGcx3I+1FTk2uv+kBmA778sK69bS5hz3uKTD+EqLOgcQ+1ZFptaEvY92wJ\nWPWnOVGPryEfh734Re1hzuHVET+AGHW/GZb3SWRz7oKBVO6cOgS6J6IpQkO1\n+3NfsC2cL4ksdvCtIL8v8bks2UVxZLlQCsFJxo3qX4vadufuhhVfAaPtSD6X\nlKRyCkTPsBKOLILhrUOmmqFzCPs6xDBPeD2qZOpuASstOgVCi3Wjlgt0aF2t\nUUMp415/veliw+S1HxPkpN7V7LpxoxO0eaMkukXtJ+q8Oi6x1DxToub2/csU\nTd2gGAb/MSHDap3NhemJuELX3Pi49nCWFa6mYZ1lSrHcu8tLUwWqftZxMkCH\nhpqGVUVEOvfzo8rLhsmJfdlnY2my7vEiqe9cfd4Qklv9B1I18qTpzIbAOqEa\nTqoM\r\n=0GZw\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDVpw0hLjaBexLyQTUCrg/+hf5WjPXEt5DT8P77KcjOwAIgCqoLfDq71g1TP7D5g310dNfz02WKZEsTchFTcwtVJAU="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"superjoe30@gmail.com","name":"superjoe"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"mameto2011@gmail.com","name":"tunnckocore"},{"email":"super.ludiq@gmail.com","name":"vanchoy"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200212.1_1581515014729_0.7425087727701907"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.2.2":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"license":"MIT","version":"1.2.2","devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"main":"./lib/index.js","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@1.2.2","_nodeVersion":"12.14.0","_npmVersion":"6.13.7","dist":{"integrity":"sha512-V8gLm+41I/8kguQ4/o1D3RIHRmhYFG4pnNyonvua+40rqcEmT4+V71yaZ3B457xbbgCsCfjSPi65u/W6vK1U5Q==","shasum":"bf69aea2972982675f00865342b982986f6b8dd9","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.2.tgz","fileCount":11,"unpackedSize":85148,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeVThaCRA9TVsSAnZWagAA2LsQAII/AReBeTjQIPCvJFon\ndRJyExvXuguu8WTbI5kNa24Vsi+w/n95Krg0OFgmiiQWjv0jIhARcJgBz8WI\nry+Uop2Rg34exEyd0kiK6A72GH4095X++MgqfDCDO8hTozPv5MHWcR56QuLE\nKvXm+PdYpIn96yTsdR25ZJquXCKYKIfA2SGKK/VpY7gA+/38InSNG+hj2qEl\nK9m6PjQl9JGIxUQ9aqwLFK3UgJ5FzMo957B7Ro9Z0G0vptAHC4II0YqS8VLa\nyHgKviSFfOwfQHlNenjR29p4ujD4ULkFt3V5LwU+Xt8n78z3DKUsPfHx0veT\nIiwsR3L7S04K0lRrJexrAoXbQEYSbaReKyMMlRdlm60C0AY+HdX6k3cPoS61\ng3G/I0So3OGO+4mGNl10qkdeqYHiTTbNWHFiPLCXuZyC3aE5AxrYhKX7+1nb\nKqHn5tMTt4HILtgkorS1UJrNJwt4nwc4dtNLb1QD+MeNVZ3OLCwFo78dXyI9\nH7aT4IsF+FoQLGKAW4Z27X2jxr7+tjpe4pQc6Fi8Ngce97JdRqPhBBgcMlvd\nZMgQf/LS1IMKS3pKWeSP2Edrbt0JW+2/KU10l9cnNILhadjr1RC3xxGfkkO4\nyzRYXWrB/5/P9L6+okMZ9KAoPzdXWN7HpIhOogBJ5R+6lqtes6oQWO5DnPXB\nqEdD\r\n=UPdV\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD7EkwEkMMmEeKbUl4xyI/wlEz3n2atAAtmmCUMEJQCvQIgCczBhstEDJsbT6zDF8gJEkuj83Qj38avuRkok7KnzZg="}]},"maintainers":[{"email":"chalkerx@gmail.com","name":"chalker"},{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"me@svenlito.com","name":"svnlto"},{"email":"tim@fostle.com","name":"tim-smart"},{"email":"opensource@tunnckocore.com","name":"tunnckocore"},{"email":"xargs@disroot.org","name":"xargs"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.2_1582643289567_0.8844181760586558"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200226.1":{"name":"formidable","version":"2.0.0-canary.20200226.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","pretest":"yarn del ./test/tmp","postpretest":"yarn make-dir ./test/tmp","reinstall":"yarn del ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","test":"yarn node test/run.js","pretest:ci":"yarn pretest","test:ci":"nyc node test/run.js","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"^1.0.3","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@tunnckocore/prettier-config":"^1.3.3","del-cli":"^3.0.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.1","eslint-plugin-prettier":"^3.1.2","express":"^4.17.1","husky":"^4.2.2","jest":"^25.1.0","koa":"^2.11.0","lint-staged":"^10.0.7","make-dir-cli":"^2.0.0","nyc":"^15.0.0","prettier":"^1.19.1","prettier-plugin-pkgjson":"^0.2.3","request":"^2.88.2","supertest":"^4.0.2","urun":"^0.0.8","utest":"^0.0.8"},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore"]},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n_**Note:** The github `master` branch is a \"canary\" branch - try it with\n`npm i formidable@canary`. Do not expect (for now) things from it to be inside\nthe`latest` \"dist-tag\" in the Npm. The`formidable@latest`is the`v1.2.1` version\nand probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (soon optionally)\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the `examples/` folder.\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nconst http = require('http');\nconst formidable = require('formidable');\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({ multiples: true });\n\n    form.parse(req, (err, fields, files) => {\n      res.writeHead(200, { 'content-type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'content-type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/node-formidable/blob/master/examples/with-express.js)\n\n```js\nconst express = require('express');\nconst formidable = require('formidable');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({ multiples: true });\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nconst Koa = require('koa');\nconst formidable = require('formidable');\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({ multiples: true });\n\n    // not very elegant, but that's for now if you don't want touse `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hash: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/node-formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/node-formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/node-formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/node-formidable/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/node-formidable/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/node-formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/node-formidable?label=linux%20build&icon=github\n[macos-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/node-formidable?label=macos%20build&icon=github\n[windows-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/node-formidable?label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/node-formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"1fc3034d7868d017003296577dc3b50a6af0f131","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.0-canary.20200226.1","_nodeVersion":"12.14.0","_npmVersion":"6.13.7","dist":{"integrity":"sha512-Jw0JteCIQ4Qiz0tEd7u7F8cbbLvYRt6416uYiUzTUgHAJVfxmV1Glca0KLM6BcH0X9cLhZT4KieoJkuGf7XmlQ==","shasum":"caa1619d37364e8c9bd8f678c280ef1c7d3a794b","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200226.1.tgz","fileCount":71,"unpackedSize":2081534,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeVujWCRA9TVsSAnZWagAAaXMP/RkH/95vNLqbSahdKiM6\nUfQWaMRM+fPgzD6P+Y1q/GPQ8Ig+d1UuhOdptHdl2jOCU8tqmd1QcI86dQjC\n6c7BADmvy/Rm7QTpW9vFwwE0Du8Dzh3CoaeTW19X8FKLnny0yU7QOY6hXAfX\nMrzYMCmpl7aqF5bDO9kLJSiUeN1mtYytxytGcp7A/gYKbFiVH4K9FEqcx36t\njXVxzZEiAAoy4pzoTLXW9BP9AjRpPi8z7KDQY5btH2vTkAHiGB1OkP94t8uF\nMygyBjdTm9QUyq0LYi6zQvvIozF5eiCWtiLHVT4kVyUzTLLaH+Vr1viDCDb3\n1Vxg/03KQ+PakzwBUMBTUW87UHVNjw4jFxbm65n7i8mwFmVosPakmiA2aNE6\nreIew1CE168sahu6WHe5xiY7lfKruS70mXfejnJYnVpTxaiDPsQr6BWqAJ0D\nZxI/nW36rcqdeIVNXuaRpc4H0MVw6e8wE0bs8O4icNwYYgjXmFCVzVpt/k+p\nit0Mrq7vvgRjCvLXnXg5ey6klI2Pzi3kpKU6jDMZNf+joTlISGSuFts/Rt6d\njFc/wkhs6o6ca0MVk6R8ql50dLFeebMhV9Xt3pyBG8zKLCQEMxRxxZNZE/sS\nulbhI6hTJQ+SiQ/oa+YFtdJfexzx79u3HlvJgHkrE5VctDD2PGOYLQQ/wAGe\nhN7q\r\n=CWkA\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDNWklBOySK24YjedG9oJNGrFLZoU7+GdGt8xEOdvlA8AIhAJDHKzW/By56IFLOA5gvtBDdkCES48dhUbkv2mOVxgja"}]},"maintainers":[{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"opensource@tunnckocore.com","name":"tunnckocore"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200226.1_1582754005527_0.17351514419650615"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200402.1":{"name":"formidable","version":"2.0.0-canary.20200402.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node test/run.js","pretest:ci":"yarn run pretest","test:ci":"nyc node test/run.js","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"^1.0.3","hexoid":"^1.0.0","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@tunnckocore/prettier-config":"^1.3.8","del-cli":"^3.0.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.1.0","eslint-config-prettier":"^6.10.1","eslint-plugin-import":"^2.20.2","eslint-plugin-prettier":"^3.1.2","express":"^4.17.1","husky":"^4.2.3","jest":"^25.2.6","koa":"^2.11.0","lint-staged":"^10.1.1","make-dir-cli":"^2.0.0","nyc":"^15.0.0","prettier":"^2.0.2","prettier-plugin-pkgjson":"^0.2.8","request":"^2.88.2","supertest":"^4.0.2","urun":"^0.0.8","utest":"^0.0.8"},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore"]},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n_**Note:** The github `master` branch is a \"canary\" branch - try it with\n`npm i formidable@canary`. Do not expect (for now) things from it to be inside\nthe`latest` \"dist-tag\" in the Npm. The`formidable@latest`is the`v1.2.1` version\nand probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (soon optionally)\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the `examples/` folder.\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nconst http = require('http');\nconst formidable = require('formidable');\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({ multiples: true });\n\n    form.parse(req, (err, fields, files) => {\n      res.writeHead(200, { 'content-type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'content-type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nconst express = require('express');\nconst formidable = require('formidable');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({ multiples: true });\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nconst Koa = require('koa');\nconst formidable = require('formidable');\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({ multiples: true });\n\n    // not very elegant, but that's for now if you don't want touse `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hash: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function(part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/formidable/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/formidable/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"f8033643bba281de61ef3cad82638c8ab8641fb5","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.0-canary.20200402.1","_nodeVersion":"13.10.1","_npmVersion":"6.13.7","dist":{"integrity":"sha512-9fKZ+/V8hkdwOrldV3O6oPGF7pRfM2mUnFnF7VUt7OO8hX8HjWqD/ToXEjOSfXEgHbdWk0xGqiVq8mR+gECE2w==","shasum":"7bba7ba90e2418c252f291d2454e2e18e17e1760","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200402.1.tgz","fileCount":96,"unpackedSize":2086008,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJehcmvCRA9TVsSAnZWagAAOL4P/R/WyV7VcC4cFWYN9kpa\nzNx9zwxjrfvtHUhkfur7njTc07HAzlShgcBso+QyK59Tz/i9dYPNy20He2en\no7KJ8iKQjGwpGldf3GbEndBPk/9SNnZd5RVkEaS5gdgHc+0A7TCkliE3QzJl\nPkq7HH2nhRF+cJU17+GyecRUJc0Cc7ZzGduDek9JEi39KpaaVU38PdDwfddG\nX36qP+RK7Gj2CiasmW0NXh8walMtY7sJa/HsQI+DwtkTxrUkyFA07mheZmbk\nfxQN+EPPty+1pa87M5uu7cZwsK7sInWBl7cWargq4K5aAgyFe508z3I/RUcO\n6y+xMmXxyxFDZakLKb1N8pHqPt5ob2SHzMcAyVKz8m8iw1tCVeWjuatJvDjH\nP4z7brt/3HX1hRFV2JlXY2H/m+WDsUtO395xOz6oqFx1+b5Yr/3aucTVj4Yo\nuX5//a2sI2lvQtRAO0Ge/jHbF9hSDwZ0zMfNWosJ2OfaXLRSmaxqMTT0hgyh\nhoF7F6L09dt8AZPLN2LSqlOZ7/llnalD1bhfRMaDRqTEaLHoRnwFqtTVqnff\nMGBS02tFMPsrB3Im7R3PCL6Q5aRdxcZWT2hEGN686LkSeRoYZSANsg706G1Z\ng6bixARazR442rUPKiQGiIb77U/jshqQjE+op3vHJkA9Bk6edQxwzRdbLWCS\nW2/c\r\n=t6T1\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCApJSn9vpCMmxWbCaxSKE7hBF3YPiJTuPFmYiERKVCIQIgXGAjQAgxvwd9fOa8k9ckgZCs7BnnpDbUlsp7Q834sus="}]},"maintainers":[{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"opensource@tunnckocore.com","name":"tunnckocore"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200402.1_1585826222733_0.6804429722292129"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200402.2":{"name":"formidable","version":"2.0.0-canary.20200402.2","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node test/run.js","pretest:ci":"yarn run pretest","test:ci":"nyc node test/run.js","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"^1.0.3","hexoid":"^1.0.0","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@tunnckocore/prettier-config":"^1.3.8","del-cli":"^3.0.0","eslint":"^6.8.0","eslint-config-airbnb-base":"^14.1.0","eslint-config-prettier":"^6.10.1","eslint-plugin-import":"^2.20.2","eslint-plugin-prettier":"^3.1.2","express":"^4.17.1","husky":"^4.2.3","jest":"^25.2.6","koa":"^2.11.0","lint-staged":"^10.1.1","make-dir-cli":"^2.0.0","nyc":"^15.0.0","prettier":"^2.0.2","prettier-plugin-pkgjson":"^0.2.8","request":"^2.88.2","supertest":"^4.0.2","urun":"^0.0.8","utest":"^0.0.8"},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore"]},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n_**Note:** The github `master` branch is a \"canary\" branch - try it with\n`npm i formidable@canary`. Do not expect (for now) things from it to be inside\nthe`latest` \"dist-tag\" in the Npm. The`formidable@latest`is the`v1.2.1` version\nand probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (soon optionally)\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the `examples/` folder.\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nconst http = require('http');\nconst formidable = require('formidable');\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({ multiples: true });\n\n    form.parse(req, (err, fields, files) => {\n      res.writeHead(200, { 'content-type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'content-type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nconst express = require('express');\nconst formidable = require('formidable');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({ multiples: true });\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nconst Koa = require('koa');\nconst formidable = require('formidable');\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({ multiples: true });\n\n    // not very elegant, but that's for now if you don't want touse `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hash: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function (part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/formidable/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/formidable/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"c9419b6a6f6e7bc29964aeb8d18d1cc4febc36a4","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.0-canary.20200402.2","_nodeVersion":"13.10.1","_npmVersion":"6.13.7","dist":{"integrity":"sha512-C2EdNeaB/2SRnmuJ3bn1auaLDeSlY9o5YpFv0naub6I2/Ed/GMj/75NhuBnojoUp4xOGWMOWbRQEvJXmWp4PyQ==","shasum":"28c92a662d098c5ce8f8135e676c9fb4d7deada9","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200402.2.tgz","fileCount":96,"unpackedSize":2087301,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJehefFCRA9TVsSAnZWagAA3rUQAIzAGNSDFox0ZxL6J2QV\nslEyFpN/twHKMQdgYHzKt+uVcugdsShvhMjTnLlZaN5g3KghjfGMqGhe5MOt\nOmLOaKhZrHCT71bZJap3MvtxzlWX5We/5VVxa3b9zPo5tV+fzjZtY27P783U\ne9kqHjaai+Qtngqph150JUr8rYHDyZzLTyiuwemC1AZaoo3a7L4F3W7Q+aWv\niFARBbvKpZnWrYWEuOS8PZZNdflkgK+iRJalh9ZmqSYB0UsN/7vzBT8CK//n\nIs8LpKrcQnurGp6pWec2TTBTBi/uTuUkr8nZUj0F7Jg2tvc3NEkK6FGekSCV\nmX2i6+Lm1RYrIBCAE7uGNWKSdL0mX5gNcQFj8IJ7czVk7oKZpQulH18AOxee\naKSdWnb0l0H+pYxl+gXadIs5xjsZQhRgNx5yAhxM4SYPXX03Frs5uJruMuu5\nggRnow/N+/WseddD9TS8QkcIVsxP0+WtUmUOBhppun/356lliY1dLQ4SPp6/\n5p7wX/d48NUISvSzZx1SjCDGdNxlXgx5DOJFumkjliXf4qlSlXxtt8hQklUW\njHpZfg9Ey2fUiwMCNjLjsvkbDkUOPxdxG8RcqKsQi0B0PRC5kaaa8vCoOLoF\nmg3FyJqPZliJYUKJTP6uQt1RSLG5in4/vv1EVY2a567hHYTZprR8N2k6+xf6\nNhb9\r\n=UJP9\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD2fYlrShIqn2qfet7ITTJ1HbMmccH/VVukU1+lpKDkSwIhAIF69DdNHj8ujbmp5OxM/1RQwiivHV5xnHmRIUAAiTWr"}]},"maintainers":[{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"opensource@tunnckocore.com","name":"tunnckocore"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200402.2_1585833924614_0.1867270349714747"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20200504.1":{"name":"formidable","version":"2.0.0-canary.20200504.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node test/run.js","pretest:ci":"yarn run pretest","test:ci":"nyc node test/run.js","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0","qs":"^6.9.3"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.1.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2","urun":"0.0.8","utest":"0.0.8"},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url]\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n_**Note:** The github `master` branch is a \"canary\" branch - try it with\n`npm i formidable@canary`. Do not expect (for now) things from it to be inside\nthe`latest` \"dist-tag\" in the Npm. The`formidable@latest`is the`v1.2.1` version\nand probably it will be the last`v1` release!_\n\n_**Note: v2 is coming soon!**_\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (soon optionally)\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\n```sh\nnpm install formidable\n# or the canary version\nnpm install formidable@canary\n```\n\nor with Yarn v1/v2\n\n```sh\nyarn add formidable\n# or the canary version\nyarn add formidable@canary\n```\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the `examples/` folder.\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nconst http = require('http');\nconst formidable = require('formidable');\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({ multiples: true });\n\n    form.parse(req, (err, fields, files) => {\n      res.writeHead(200, { 'content-type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'content-type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nconst express = require('express');\nconst formidable = require('formidable');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({ multiples: true });\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nconst Koa = require('koa');\nconst formidable = require('formidable');\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({ multiples: true });\n\n    // not very elegant, but that's for now if you don't want touse `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js](./src/Formidable.js#L14-L22) (the\n`DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields\n  that the Querystring parser will decode, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hash` **{boolean}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (filename, file) => {\n  form.emit('data', { name: 'fileBegin', filename, value: file });\n});\n\nform.on('file', (filename, file) => {\n  form.emit('data', { name: 'file', key: filename, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', key, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', key, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hash: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) => {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function (part) {\n  // let formidable handle only non-file parts\n  if (part.filename === '' || !part.mime) {\n    // used internally, please do not override!\n    form.handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.path: string;\n\n  // The name this file had according to the uploading client.\n  file.name: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.type: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.lastModifiedDate: Date | null;\n\n  // If `options.hash` calculation was set, you can read the hex digest out of this var.\n  file.hash: string | 'sha1' | 'md5' | 'sha256' | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (name, file) => {});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (name, file) => {});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our\n[Contributing Guide](./CONTRIBUTING.md). Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/formidable/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/formidable/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"afa4fdbb7e62956e510f7c5c4270569b86053ce7","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.0-canary.20200504.1","_nodeVersion":"12.16.2","_npmVersion":"6.14.4","dist":{"integrity":"sha512-//FlGY4V1wl5+Q54Gfx8FHErl0tDrRatftGFOgis2IeH8JFs4Ve/r+hubMRfk3gjSyI8VYLg8dWfa1DqfhMdCg==","shasum":"8b060a43f77da82aa7ddc395e1bb4d845b65dc0b","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20200504.1.tgz","fileCount":71,"unpackedSize":2085833,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJesHZmCRA9TVsSAnZWagAArF8P/iDtIShIHQ4greOkDpqG\nSrps0xd1X6ciM1luf5PyAjG9NNWV/tD2i+NCevHJtmAudLCyl/lfmTlTyI7r\nEkx/eGg0DnI10bxgwixP6QJZj9Yxqhbj/zY6oWHjPPL+W1uVRtUBFGFCsiwK\nmBRQYRY2GXpVHrWM+WpZrFlqLBfoo3vwMGnljgwOZzt40NCRYfAuCFp0Fasm\nlIJW28LVoubMpTkT6VzasqtruHSThV0pZ7yGn1zUiwIUZQEMw+JVGABXmORQ\n1OBsjU6oyqDaIU9Lb9H6q+kj2ee/unSifdIFr4RvGWANsuuWDOxiy/FI7d+1\n2z56LVNu2eaEMwg9fHX1mlvQtE0JKD/cfM065z8x/jjh3TQNsgV8rMG6BL77\nuO1kR1wyA6GgU5ta7bFPGfFuA55E/BH4IlQEEXrc4sBtA05k/ICuqQgkUIDp\nuHkujALluSZTD7jLFKWZWuMhsqnkenNAgxDuyn1zPZzbEQAsvMuWFfIqJeRh\nG5O0k11QIMUp2/BTlC/LW8iE+YrPkJNtZNZ/glagb/44oQ2Smy+rJk9LyWdk\nUE3zt9SzPuIHK2HtD0gGrF6BObnPotioNxFj7Bf8jfqkrDLtuRrnFH/OYQZA\nb3R2PWqOrqk2uZ1DqLKqfPAiXp1fJMOQc7R1eZ8lOkH61Y1FGEWlIbOwOFTW\nmMDt\r\n=uBtr\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCtU2nijMahmgsRakMWLYEkgk7XXyDwCbY8Ll4vNW5UkgIhAMleUDPpj2IYnHNKcCh2DTwi/3MI8NNafQZ5c+LQjLtw"}]},"maintainers":[{"email":"felix@debuggable.com","name":"felixge"},{"email":"npmspam@geekhood.net","name":"kornel"},{"email":"nathanael.dmc@outlook.fr","name":"quantumsheep"},{"email":"opensource@tunnckocore.com","name":"tunnckocore"}],"_npmUser":{"name":"tunnckocore","email":"opensource@tunnckocore.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20200504.1_1588622950031_0.9270038419724795"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0-canary.20210330":{"name":"formidable","version":"2.0.0-canary.20210330","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"canary"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"jest --coverage","pretest:ci":"yarn run pretest","test:ci":"nyc jest --coverage","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0","qs":"6.9.3"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url]\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n_**Note:** The github `master` branch is a \"canary\" branch - try it with\r\n`npm i formidable@canary`. Do not expect (for now) things from it to be inside\r\nthe`latest` \"dist-tag\" in the Npm. The`formidable@latest`is the`v1.2.1` version\r\nand probably it will be the last`v1` release!_\r\n\r\n_**Note: v2 is coming soon!**_\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\n```sh\r\nnpm install formidable\r\n# or the canary version\r\nnpm install formidable@canary\r\n```\r\n\r\nor with Yarn v1/v2\r\n\r\n```sh\r\nyarn add formidable\r\n# or the canary version\r\nyarn add formidable@canary\r\n```\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the `examples/` folder.\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nconst http = require('http');\r\nconst formidable = require('formidable');\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({ multiples: true });\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nconst express = require('express');\r\nconst formidable = require('formidable');\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({ multiples: true });\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nconst Koa = require('koa');\r\nconst formidable = require('formidable');\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({ multiples: true });\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nconst formidable = require('formidable');\r\nconst form = formidable(options);\r\n\r\n// or\r\nconst { formidable } = require('formidable');\r\nconst form = formidable(options);\r\n\r\n// or\r\nconst { IncomingForm } = require('formidable');\r\nconst form = new IncomingForm(options);\r\n\r\n// or\r\nconst { Formidable } = require('formidable');\r\nconst form = new Formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of uploaded file.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.multiples` **{boolean}** - default `false`; when you call the\r\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\r\n  files for inputs which submit multiple files using the HTML5 `multiple`\r\n  attribute. Also, the `fields` argument will contain arrays of values for\r\n  fields that have names ending with '[]'.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst formidable = require('formidable');\r\n\r\nconst form = formidable({ multiples: true, uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst formidable = require('formidable');\r\n\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nconst { Formidable } = require('formidable');\r\n\r\nconst form = new Formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar.\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/tunnckoCore\r\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"3d429e00a4e343cbce94440c9f2a9fcc1f03a8bd","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.0-canary.20210330","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-e4jeoH1EsphctTsKT153Mu3WHzo15zM+Jb7UaBAW7jKneNVRfV+cxqW6+fymb3dufsYueQmtNvUbwDqAs5SxbQ==","shasum":"9100b8b0d8352c32b68cf5e559bf656098431b31","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0-canary.20210330.tgz","fileCount":21,"unpackedSize":97625,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD7mIatzQmrEeXzEx4MpKo5dWr1h807QE91ok+xLDO55QIgAlGEovfAE59YWKtVhejIyj0ny1MuETX5y9UW1SlDwOI="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0-canary.20210330_1635596536428_0.19959834003959753"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"3.1.1-canary.20211030":{"name":"formidable","version":"3.1.1-canary.20211030","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"3.x"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.11","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Status: Maintained [![npm version][npmv-canary-img]][npmv-url]\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n_**Note:** The github `master` branch is a \"canary\" branch - try it with\r\n`npm i formidable@canary`. Do not expect (for now) things from it to be inside\r\nthe`latest` \"dist-tag\" in the Npm. The`formidable@latest`is the`v1.2.1` version\r\nand probably it will be the last`v1` release!_\r\n\r\n_**Note: v2 is coming soon!**_\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\n```sh\r\nnpm install formidable\r\n# or the canary version\r\nnpm install formidable@canary\r\n## 3.x\r\nnpm install formidable@3.x\r\n```\r\n\r\nor with Yarn v1/v2\r\n\r\n```sh\r\nyarn add formidable\r\n# or the canary version\r\nyarn add formidable@canary\r\n```\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the `examples/` folder.\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of uploaded file.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/tunnckoCore\r\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen-net.charlike.now.sh/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"dbf9be107c0d542ac7b9f8d0203bffeca6f8c43d","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.1.1-canary.20211030","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-/NYE61oqoEvLhhgNOWoNix9oABgkMEZexpROXR2n2x82wP7pktMxxmKpJDjep/8+K32k1jSa4nBEoYYDIA5W0Q==","shasum":"197fb121f58b95d8d748a1921b44a86eed8024c1","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.1.1-canary.20211030.tgz","fileCount":23,"unpackedSize":98748,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAdEsKvnR1w65aXGuouGvEc/ueYu+IL6I+/6G89vcz7fAiEA/Oc9lon3XWFhWcs2EhweYsfMiJHx7mFCKSCChhbY1w8="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.1.1-canary.20211030_1635596794501_0.2528300344897563"},"_hasShrinkwrap":false},"1.2.3":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","license":"MIT","version":"1.2.3","devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"directories":{"lib":"./lib"},"publishConfig":{"access":"public","tag":"1.x"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"readme":"# Formidable\r\n\r\n## Purpose\r\n\r\nA Node.js module for parsing form data, especially file uploads.\r\n\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](https://github.com/node-formidable/formidable/blob/master/CHANGELOG.md)\r\n\r\n## Current status\r\n\r\n**Maintainers Wanted:** Please see https://github.com/felixge/node-formidable/issues/412\r\n\r\nThis module was developed for [Transloadit](http://transloadit.com/), a service focused on uploading\r\nand encoding images and videos. It has been battle-tested against hundreds of GB of file uploads from\r\na large variety of clients and is considered production-ready.\r\n\r\n## Features\r\n\r\n* Fast (~500mb/sec), non-buffering multipart parser\r\n* Automatically writing file uploads to disk\r\n* Low memory footprint\r\n* Graceful error handling\r\n* Very high test coverage\r\n\r\n## Installation\r\n\r\n```sh\r\nnpm install formidable@1.x\r\n# or the canary version\r\nnpm install formidable@canary\r\n## 3.x\r\nnpm install formidable@3.x\r\n```\r\n\r\nThis is a low-level package, and if you're using a high-level framework it may already be included. However, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\r\n\r\nNote: Formidable requires [gently](http://github.com/felixge/node-gently) to run the unit tests, but you won't need it for just using the library.\r\n\r\n## Example\r\n\r\nParse an incoming file upload.\r\n```javascript\r\nvar formidable = require('formidable'),\r\n    http = require('http'),\r\n    util = require('util');\r\n\r\nhttp.createServer(function(req, res) {\r\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\r\n    // parse a file upload\r\n    var form = new formidable.IncomingForm();\r\n\r\n    form.parse(req, function(err, fields, files) {\r\n      res.writeHead(200, {'content-type': 'text/plain'});\r\n      res.write('received upload:\\n\\n');\r\n      res.end(util.inspect({fields: fields, files: files}));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, {'content-type': 'text/html'});\r\n  res.end(\r\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">'+\r\n    '<input type=\"text\" name=\"title\"><br>'+\r\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\r\n    '<input type=\"submit\" value=\"Upload\">'+\r\n    '</form>'\r\n  );\r\n}).listen(8080);\r\n```\r\n## API\r\n\r\n### Formidable.IncomingForm\r\n```javascript\r\nvar form = new formidable.IncomingForm()\r\n```\r\nCreates a new incoming form.\r\n\r\n```javascript\r\nform.encoding = 'utf-8';\r\n```\r\nSets encoding for incoming form fields.\r\n\r\n```javascript\r\nform.uploadDir = \"/my/dir\";\r\n```\r\nSets the directory for placing file uploads in. You can move them later on using\r\n`fs.rename()`. The default is `os.tmpdir()`.\r\n\r\n```javascript\r\nform.keepExtensions = false;\r\n```\r\nIf you want the files written to `form.uploadDir` to include the extensions of the original files, set this property to `true`.\r\n\r\n```javascript\r\nform.type\r\n```\r\nEither 'multipart' or 'urlencoded' depending on the incoming request.\r\n\r\n```javascript\r\nform.maxFieldsSize = 20 * 1024 * 1024;\r\n```\r\nLimits the amount of memory all fields together (except files) can allocate in bytes.\r\nIf this value is exceeded, an `'error'` event is emitted. The default\r\nsize is 20MB.\r\n\r\n```javascript\r\nform.maxFileSize = 200 * 1024 * 1024;\r\n```\r\nLimits the size of uploaded file.\r\nIf this value is exceeded, an `'error'` event is emitted. The default\r\nsize is 200MB.\r\n\r\n```javascript\r\nform.maxFields = 1000;\r\n```\r\nLimits the number of fields that the querystring parser will decode. Defaults\r\nto 1000 (0 for unlimited).\r\n\r\n```javascript\r\nform.hash = false;\r\n```\r\nIf you want checksums calculated for incoming files, set this to either `'sha1'` or `'md5'`.\r\n\r\n```javascript\r\nform.multiples = false;\r\n```\r\nIf this option is enabled, when you call `form.parse`, the `files` argument will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute.\r\n\r\n```javascript\r\nform.bytesReceived\r\n```\r\nThe amount of bytes received for this form so far.\r\n\r\n```javascript\r\nform.bytesExpected\r\n```\r\nThe expected number of bytes in this form.\r\n\r\n```javascript\r\nform.parse(request, [cb]);\r\n```\r\nParses an incoming node.js `request` containing form data. If `cb` is provided, all fields and files are collected and passed to the callback:\r\n\r\n\r\n```javascript\r\nform.parse(req, function(err, fields, files) {\r\n  // ...\r\n});\r\n\r\nform.onPart(part);\r\n```\r\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events  processing which would occur otherwise, making you fully responsible for handling the processing.\r\n\r\n```javascript\r\nform.onPart = function(part) {\r\n  part.addListener('data', function() {\r\n    // ...\r\n  });\r\n}\r\n```\r\nIf you want to use formidable to only handle certain parts for you, you can do so:\r\n```javascript\r\nform.onPart = function(part) {\r\n  if (!part.filename) {\r\n    // let formidable handle all non-file parts\r\n    form.handlePart(part);\r\n  }\r\n}\r\n```\r\nCheck the code in this method for further inspiration.\r\n\r\n\r\n### Formidable.File\r\n```javascript\r\nfile.size = 0\r\n```\r\nThe size of the uploaded file in bytes. If the file is still being uploaded (see `'fileBegin'` event), this property says how many bytes of the file have been written to disk yet.\r\n```javascript\r\nfile.path = null\r\n```\r\nThe path this file is being written to. You can modify this in the `'fileBegin'` event in\r\ncase you are unhappy with the way formidable generates a temporary path for your files.\r\n```javascript\r\nfile.name = null\r\n```\r\nThe name this file had according to the uploading client.\r\n```javascript\r\nfile.type = null\r\n```\r\nThe mime type of this file, according to the uploading client.\r\n```javascript\r\nfile.lastModifiedDate = null\r\n```\r\nA date object (or `null`) containing the time this file was last written to. Mostly\r\nhere for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n```javascript\r\nfile.hash = null\r\n```\r\nIf hash calculation was set, you can read the hex digest out of this var.\r\n\r\n#### Formidable.File#toJSON()\r\n\r\n  This method returns a JSON-representation of the file, allowing you to\r\n  `JSON.stringify()` the file which is useful for logging and responding\r\n  to requests.\r\n\r\n### Events\r\n\r\n\r\n#### 'progress'\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\r\n\r\n```javascript\r\nform.on('progress', function(bytesReceived, bytesExpected) {\r\n});\r\n```\r\n\r\n\r\n\r\n#### 'field'\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```javascript\r\nform.on('field', function(name, value) {\r\n});\r\n```\r\n\r\n#### 'fileBegin'\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on\r\nthe file system.\r\n\r\n```javascript\r\nform.on('fileBegin', function(name, file) {\r\n});\r\n```\r\n\r\n#### 'file'\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\r\n\r\n```javascript\r\nform.on('file', function(name, file) {\r\n});\r\n```\r\n\r\n#### 'error'\r\n\r\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\n```javascript\r\nform.on('error', function(err) {\r\n});\r\n```\r\n\r\n#### 'aborted'\r\n\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\r\n```javascript\r\nform.on('aborted', function() {\r\n});\r\n```\r\n\r\n##### 'end'\r\n```javascript\r\nform.on('end', function() {\r\n});\r\n```\r\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\r\n\r\n\r\n\r\n## Changelog\r\n\r\n### v1.1.1 (2017-01-15)\r\n\r\n * Fix DeprecationWarning about os.tmpDir() (Christian)\r\n * Update `buffer.write` order of arguments for Node 7 (Kornel Lesiński)\r\n * JSON Parser emits error events to the IncomingForm (alessio.montagnani)\r\n * Improved Content-Disposition parsing (Sebastien)\r\n * Access WriteStream of fs during runtime instead of include time (Jonas Amundsen)\r\n * Use built-in toString to convert buffer to hex (Charmander)\r\n * Add hash to json if present (Nick Stamas)\r\n * Add license to package.json (Simen Bekkhus)\r\n\r\n### v1.0.14 (2013-05-03)\r\n\r\n* Add failing hash tests. (Ben Trask)\r\n* Enable hash calculation again (Eugene Girshov)\r\n* Test for immediate data events (Tim Smart)\r\n* Re-arrange IncomingForm#parse (Tim Smart)\r\n\r\n### v1.0.13\r\n\r\n* Only update hash if update method exists (Sven Lito)\r\n* According to travis v0.10 needs to go quoted (Sven Lito)\r\n* Bumping build node versions (Sven Lito)\r\n* Additional fix for empty requests (Eugene Girshov)\r\n* Change the default to 1000, to match the new Node behaviour. (OrangeDog)\r\n* Add ability to control maxKeys in the querystring parser. (OrangeDog)\r\n* Adjust test case to work with node 0.9.x (Eugene Girshov)\r\n* Update package.json (Sven Lito)\r\n* Path adjustment according to eb4468b (Markus Ast)\r\n\r\n### v1.0.12\r\n\r\n* Emit error on aborted connections (Eugene Girshov)\r\n* Add support for empty requests (Eugene Girshov)\r\n* Fix name/filename handling in Content-Disposition (jesperp)\r\n* Tolerate malformed closing boundary in multipart (Eugene Girshov)\r\n* Ignore preamble in multipart messages (Eugene Girshov)\r\n* Add support for application/json (Mike Frey, Carlos Rodriguez)\r\n* Add support for Base64 encoding (Elmer Bulthuis)\r\n* Add File#toJSON (TJ Holowaychuk)\r\n* Remove support for Node.js 0.4 & 0.6 (Andrew Kelley)\r\n* Documentation improvements (Sven Lito, Andre Azevedo)\r\n* Add support for application/octet-stream (Ion Lupascu, Chris Scribner)\r\n* Use os.tmpdir() to get tmp directory (Andrew Kelley)\r\n* Improve package.json (Andrew Kelley, Sven Lito)\r\n* Fix benchmark script (Andrew Kelley)\r\n* Fix scope issue in incoming_forms (Sven Lito)\r\n* Fix file handle leak on error (OrangeDog)\r\n\r\n## License\r\n\r\nFormidable is licensed under the MIT license.\r\n\r\n## Ports\r\n\r\n* [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable\r\n\r\n## Credits\r\n\r\n* [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js\r\n","readmeFilename":"Readme.md","gitHead":"04a3a4900b2ca483a0f2654e550fec69f23536d6","dependencies":{},"_id":"formidable@1.2.3","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-YtVk/NESNJz0jAdUVI6nEoMfw6bv3hxGFQRlXRJXzdpxbomEo32YAhn8OwA3ncDaBQ4Tcxh/NkVy9lB5paYEXQ==","shasum":"27cfbd60b54d2ac518c848f40ea354d081e4d34d","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.3.tgz","fileCount":11,"unpackedSize":39564,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHGkpU9IkX2XHwtw3waHRXuBTZWeZwSaYaX7+qo18CU3AiBj4HqO9WTQQQETe5olk+S0DyPzypAxjrLap/zGZfYCIQ=="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.3_1635598690879_0.5534542505857727"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.2.4":{"name":"formidable","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/felixge/node-formidable","license":"MIT","version":"1.2.4","devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"directories":{"lib":"./lib"},"publishConfig":{"access":"public","tag":"1.x"},"main":"./lib/index","scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"repository":{"type":"git","url":"git://github.com/felixge/node-formidable.git"},"bugs":{"url":"http://github.com/felixge/node-formidable/issues"},"optionalDependencies":{},"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n### Important Notes\r\n\r\nFor more info, check the [CHANGELOG](https://github.com/node-formidable/formidable/blob/master/CHANGELOG.md) on the master branch.\r\n\r\n#### v1 is deprecated\r\n\r\nAll `v1` versions are deprecated in NPM for over 2 years. You can find it at `formidable@v1` on NPM, and on [v1 branch][v1branch] on GitHub.  \r\nWe highly recommend to use `v2` or `v3`. Both are already in use by many, especially `v2` which was on `formidable@canary` for 2 years.\r\n\r\n- **Status: Not Maintained!**\r\n- We won't provide support or accept reports on that version.\r\n- **No Backporting:** bugfixes, security fixes, or new features WILL NOT happen!\r\n- Please move to at least **v2**! \r\n- Try with installing `formidable@v2` and if still have the problem - report!\r\n\r\n---\r\n\r\n#### v2 is the new `latest`\r\nThe `v2` will be simultaneously on two places for some time - `formidable@latest` and `formidable@v2`.\r\nThe source code be available **only** on [v2 branch][v2branch].\r\nIf you want to use v2, it's recommended to lock and use the v2 dist-tag `formidable@v2`. \r\n\r\n**Main Differences from v1:**\r\n- Better organization and modernized code, requiring newer Node.js versions (>= v10).\r\n- A lot of bugfixes, closed issues, merged or closed PRs.\r\n- **Backward compatible to v1!** Should not have problems, the major version bump is just for ensurance.\r\n- Better docs, new features (plugins, parsers, options) and optimizations.\r\n\r\n---\r\n\r\n#### v3 - ESModules, Promises, Monorepo structure\r\nWe recommend to use `formidable@v3` to install, as it uses more modern Node.js Streams, has support for Promises and more stuff.\r\nYou can see more info and track some ideas on [issue#635](https://github.com/node-formidable/formidable/issues/635).\r\n\r\n- The source code can be found on the [master branch](https://github.com/node-formidable/formidable) on GitHub.\r\n- It will be published on `formidable@latest` after some time.\r\n- Dropping older Node.js versions, requiring higher than v12-v14.\r\n- Dropping v1 compatibility.\r\n- Rewritten to ESModules, more optimizations.\r\n- Moving to monorepo structure, more plugins & helper utils.\r\n\r\n[v1branch]: https://github.com/node-formidable/formidable/tree/v1\r\n[v2branch]: https://github.com/node-formidable/formidable/tree/v2\r\n[v3branch]: https://github.com/node-formidable/formidable/tree/v3\r\n\r\n---\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## v1 status: not maintained!\r\n\r\n## Project Status: Maintained\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Features\r\n\r\n* Fast (~500mb/sec), non-buffering multipart parser\r\n* Automatically writing file uploads to disk\r\n* Low memory footprint\r\n* Graceful error handling\r\n* Very high test coverage\r\n\r\n## Installation\r\n\r\n```sh\r\nnpm install formidable@v1\r\nnpm install formidable@v2\r\nnpm install formidable@v3\r\n```\r\n\r\nThis is a low-level package, and if you're using a high-level framework it may already be included. However, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\r\n\r\nNote: Formidable requires [gently](http://github.com/felixge/node-gently) to run the unit tests, but you won't need it for just using the library.\r\n\r\n## Example\r\n\r\nParse an incoming file upload.\r\n```javascript\r\nvar formidable = require('formidable'),\r\n    http = require('http'),\r\n    util = require('util');\r\n\r\nhttp.createServer(function(req, res) {\r\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\r\n    // parse a file upload\r\n    var form = new formidable.IncomingForm();\r\n\r\n    form.parse(req, function(err, fields, files) {\r\n      res.writeHead(200, {'content-type': 'text/plain'});\r\n      res.write('received upload:\\n\\n');\r\n      res.end(util.inspect({fields: fields, files: files}));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, {'content-type': 'text/html'});\r\n  res.end(\r\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">'+\r\n    '<input type=\"text\" name=\"title\"><br>'+\r\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\r\n    '<input type=\"submit\" value=\"Upload\">'+\r\n    '</form>'\r\n  );\r\n}).listen(8080);\r\n```\r\n## API\r\n\r\n### Formidable.IncomingForm\r\n```javascript\r\nvar form = new formidable.IncomingForm()\r\n```\r\nCreates a new incoming form.\r\n\r\n```javascript\r\nform.encoding = 'utf-8';\r\n```\r\nSets encoding for incoming form fields.\r\n\r\n```javascript\r\nform.uploadDir = \"/my/dir\";\r\n```\r\nSets the directory for placing file uploads in. You can move them later on using\r\n`fs.rename()`. The default is `os.tmpdir()`.\r\n\r\n```javascript\r\nform.keepExtensions = false;\r\n```\r\nIf you want the files written to `form.uploadDir` to include the extensions of the original files, set this property to `true`.\r\n\r\n```javascript\r\nform.type\r\n```\r\nEither 'multipart' or 'urlencoded' depending on the incoming request.\r\n\r\n```javascript\r\nform.maxFieldsSize = 20 * 1024 * 1024;\r\n```\r\nLimits the amount of memory all fields together (except files) can allocate in bytes.\r\nIf this value is exceeded, an `'error'` event is emitted. The default\r\nsize is 20MB.\r\n\r\n```javascript\r\nform.maxFileSize = 200 * 1024 * 1024;\r\n```\r\nLimits the size of uploaded file.\r\nIf this value is exceeded, an `'error'` event is emitted. The default\r\nsize is 200MB.\r\n\r\n```javascript\r\nform.maxFields = 1000;\r\n```\r\nLimits the number of fields that the querystring parser will decode. Defaults\r\nto 1000 (0 for unlimited).\r\n\r\n```javascript\r\nform.hash = false;\r\n```\r\nIf you want checksums calculated for incoming files, set this to either `'sha1'` or `'md5'`.\r\n\r\n```javascript\r\nform.multiples = false;\r\n```\r\nIf this option is enabled, when you call `form.parse`, the `files` argument will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute.\r\n\r\n```javascript\r\nform.bytesReceived\r\n```\r\nThe amount of bytes received for this form so far.\r\n\r\n```javascript\r\nform.bytesExpected\r\n```\r\nThe expected number of bytes in this form.\r\n\r\n```javascript\r\nform.parse(request, [cb]);\r\n```\r\nParses an incoming node.js `request` containing form data. If `cb` is provided, all fields and files are collected and passed to the callback:\r\n\r\n\r\n```javascript\r\nform.parse(req, function(err, fields, files) {\r\n  // ...\r\n});\r\n\r\nform.onPart(part);\r\n```\r\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events  processing which would occur otherwise, making you fully responsible for handling the processing.\r\n\r\n```javascript\r\nform.onPart = function(part) {\r\n  part.addListener('data', function() {\r\n    // ...\r\n  });\r\n}\r\n```\r\nIf you want to use formidable to only handle certain parts for you, you can do so:\r\n```javascript\r\nform.onPart = function(part) {\r\n  if (!part.filename) {\r\n    // let formidable handle all non-file parts\r\n    form.handlePart(part);\r\n  }\r\n}\r\n```\r\nCheck the code in this method for further inspiration.\r\n\r\n\r\n### Formidable.File\r\n```javascript\r\nfile.size = 0\r\n```\r\nThe size of the uploaded file in bytes. If the file is still being uploaded (see `'fileBegin'` event), this property says how many bytes of the file have been written to disk yet.\r\n```javascript\r\nfile.path = null\r\n```\r\nThe path this file is being written to. You can modify this in the `'fileBegin'` event in\r\ncase you are unhappy with the way formidable generates a temporary path for your files.\r\n```javascript\r\nfile.name = null\r\n```\r\nThe name this file had according to the uploading client.\r\n```javascript\r\nfile.type = null\r\n```\r\nThe mime type of this file, according to the uploading client.\r\n```javascript\r\nfile.lastModifiedDate = null\r\n```\r\nA date object (or `null`) containing the time this file was last written to. Mostly\r\nhere for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n```javascript\r\nfile.hash = null\r\n```\r\nIf hash calculation was set, you can read the hex digest out of this var.\r\n\r\n#### Formidable.File#toJSON()\r\n\r\n  This method returns a JSON-representation of the file, allowing you to\r\n  `JSON.stringify()` the file which is useful for logging and responding\r\n  to requests.\r\n\r\n### Events\r\n\r\n\r\n#### 'progress'\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\r\n\r\n```javascript\r\nform.on('progress', function(bytesReceived, bytesExpected) {\r\n});\r\n```\r\n\r\n\r\n\r\n#### 'field'\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```javascript\r\nform.on('field', function(name, value) {\r\n});\r\n```\r\n\r\n#### 'fileBegin'\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on\r\nthe file system.\r\n\r\n```javascript\r\nform.on('fileBegin', function(name, file) {\r\n});\r\n```\r\n\r\n#### 'file'\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\r\n\r\n```javascript\r\nform.on('file', function(name, file) {\r\n});\r\n```\r\n\r\n#### 'error'\r\n\r\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\n```javascript\r\nform.on('error', function(err) {\r\n});\r\n```\r\n\r\n#### 'aborted'\r\n\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\r\n```javascript\r\nform.on('aborted', function() {\r\n});\r\n```\r\n\r\n##### 'end'\r\n```javascript\r\nform.on('end', function() {\r\n});\r\n```\r\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\r\n\r\n\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\nFrom [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/tunnckoCore\r\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net//github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n\r\n","readmeFilename":"Readme.md","gitHead":"dcff40c5ae59f9c98e7ea480d3056360529b10d3","dependencies":{},"_id":"formidable@1.2.4","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-VsO6VCDPV64WLZfhaWTlgaTmmWRBK7HzOjzj0/91irPuxK2zt5jCL8aBLWDMzF+Dw7ROrb1VkAY6mhkF6SFzgA==","shasum":"7d345474fe434785f72a075a1be627b5c385b24a","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.4.tgz","fileCount":11,"unpackedSize":46005,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDGl88UgQ8+9niHE92rcvs0B1/8CYv452LNe+3u2re4CwIgT2uwaIK2ppldmDvEldNuiYM5Z1tJn15CWFNUFrM44gM="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.4_1635610422648_0.18117713928816426"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"2.0.0":{"name":"formidable","version":"2.0.0","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"latest"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"jest --coverage","pretest:ci":"yarn run pretest","test:ci":"nyc jest --coverage","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0","qs":"6.9.3"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"gitHead":"1c30ec67648eb7ddcf50e548b0cd8bed384fde40","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.0","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-K+O9fEQMnsWwxy/K6sVazVikCfU0v2x3XFhI1x/8CPTFylzjsUgdIKWtQisgRT4mH65bBNDTzNVVSr/x6/oulg==","shasum":"0a58fe39118c04530b16d8814311f90ab1192a47","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.0.tgz","fileCount":22,"unpackedSize":99959,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCndOzRTMzywh4ycr4aWVLKMMhQQYMM7Ba8RsSGL8GPLAIhAJnkvOHQZJjZt1aWn0t12kSdZzER85wso8UFHcR2Vn1+"}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.0_1635610646088_0.631649700944118"},"_hasShrinkwrap":false},"3.1.2-canary.20211030":{"name":"formidable","version":"3.1.2-canary.20211030","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.11","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```sh\r\n# v2\r\nnpm install formidable\r\n\r\n## 3.x\r\nnpm install formidable@3.x\r\n```\r\n\r\n\r\n# or v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will continue to be published on `canary` dist-tag._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of uploaded file.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"babb94e9d88541beec3d3ce951e6d848627b23b9","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.1.2-canary.20211030","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-ipbraJG8U7VnO8U1meT+M6781LYEM/iuxtCjwXY2kGCqNd9ZLipu0/SGYclUTqqpgsW9nuOsmFMl4i1aTgC09Q==","shasum":"f7c71e15fa15749d44b6af13da100c98b21bf619","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.1.2-canary.20211030.tgz","fileCount":24,"unpackedSize":101050,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICVlUpOCErW40pTA48UduTalWzBqCVeZTT3veVFL0MFRAiBJvPk/HsTmgv9ROjEJ1RMQ1gSccB3goQx+9rE8/l7ebw=="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.1.2-canary.20211030_1635612514722_0.6030293080124971"},"_hasShrinkwrap":false},"3.1.3":{"name":"formidable","version":"3.1.3","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.11","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Project Status: Maintained\n\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (optional, see\n  [`options.fileWriteStreamHandler`](#options))\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\n\n```sh\n# v2\nnpm install formidable\n\n## 3.x\nnpm install formidable@3.x\n```\n\n\n# or v3\nnpm install formidable@v3\n```\n\n_**Note:** In near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will continue to be published on `canary` dist-tag._\n\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nimport http from 'http';\nimport formidable from 'formidable';\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({});\n\n    form.parse(req, (err, fields, files) => {\n      if (err) {\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\n        res.end(String(err));\n        return;\n      }\n      res.writeHead(200, { 'Content-Type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'Content-Type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nimport express from 'express';\nimport formidable from 'formidable';\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({});\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nimport Koa from 'Koa';\nimport formidable from 'formidable';\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({});\n\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nimport formidable from 'formidable';\nconst form = formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\n(the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`.\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\n  files\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\n  uploaded file.\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\n  default writes to host machine file system every file parsed; The function\n  should return an instance of a\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\n  that will receive the uploaded file data. With this option, you can have any\n  custom behavior regarding where the uploaded file data will be streamed for.\n  If you are looking to write the file uploaded in other types of cloud storages\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\n  this is the option you're looking for. When this option is defined the default\n  behavior of writing the file in the host machine file system is lost.\n- `options.filename` **{function}** - default `undefined` Use it to control\n  newFilename. Must return a string. Will be joined with options.uploadDir.\n\n- `options.filter` **{function}** - default function that always returns true.\n  Use it to filter files before they are uploaded. Must return a boolean.\n\n\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\n\nwhere part can be decomposed as\n\n```js\nconst { originalFilename, mimetype} = part;\n```\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\n\n**Note:** use an outside variable to cancel all uploads upon the first error \n\n```js\nconst options = {\n  filter: function ({name, originalFilename, mimetype}) {\n    // keep only images\n    return mimetype && mimetype.includes(\"image\");\n  }\n};\n```\n\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst form = formidable({ uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nAbout `uploadDir`, given the following directory structure \n```\nproject-name\n├── src\n│   └── server.js\n│       \n└── uploads\n    └── image.jpg\n```\n\n`__dirname` would be the same directory as the source file itself (src)\n\n\n```js\n `${__dirname}/../uploads`\n```\n\nto put files in uploads.\n\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\n\n\n`null` will use default which is `os.tmpdir()`\n\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\n\n```js\nimport {createNecessaryDirectoriesSync} from \"filesac\";\n\n\nconst uploadPath = `${__dirname}/../uploads`;\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\n```\n\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (formname, file) => {\n  form.emit('data', { name: 'fileBegin', formname, value: file });\n});\n\nform.on('file', (formname, file) => {\n  form.emit('data', { name: 'file', formname, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', formname, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', formname, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nimport formidable, {octetstream, querystring, json} from \"formidable\";\nconst form = formidable({\n  hashAlgorithm: 'sha1',\n  enabledPlugins: [octetstream, querystring, json],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) => {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function (part) {\n  // let formidable handle only non-file parts\n  if (part.originalFilename === '' || !part.mimetype) {\n    // used internally, please do not override!\n    form._handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.filepath: string;\n\n  // The name this file had according to the uploading client.\n  file.originalFilename: string | null;\n  \n  // calculated based on options provided\n  file.newFilename: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.mimetype: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.mtime: Date | null;\n\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\n  file.hash: string | object | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (formName, file) => {\n    // accessible here \n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\n    // file.originalFilename http filename or null if there was a parsing error\n    // file.newFilename generated hexoid or what options.filename returned\n    // file.filepath default pathnme as per options.uploadDir and options.filename\n    // file.filepath = CUSTOM_PATH // to change the final path\n});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (formname, file) => {\n    // same as fileBegin, except\n    // it is too late to change file.filepath\n    // file.hash is available if options.hash was used\n});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\nMay have `error.httpCode` and `error.code` attached.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n\n### Helpers\n\n#### firstValues\n\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\n\n```js\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\n\n// ...\nform.parse(request, async (error, fieldsMultiple, files) => {\n    if (error) {\n        //...\n    }\n    const exceptions = ['thisshouldbeanarray'];\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\n    // ...\n```\n\n#### readBooleans\n\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\n\n```js\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\n\n// ...\nform.parse(request, async (error, fieldsMultiple, files) => {\n    if (error) {\n        //...\n    }\n    const fieldsSingle = firstValues(form, fieldsMultiple);\n    \n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\n    // ...\n```\n\n## Changelog\n\n[./CHANGELOG.md](./CHANGELOG.md)\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our [Contributing\nGuide][contributing-url]. Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\n\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/3a1fcBx0\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"babb94e9d88541beec3d3ce951e6d848627b23b9","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.1.3","_nodeVersion":"16.8.0","_npmVersion":"8.1.2","dist":{"integrity":"sha512-nPy5vK/zvhlGBvIb1RqNLAk2D3kM+Dqz9tuaVFez2fogTaYDSPPpBbJpmy2FOmPv+JN4rqQRf4C3wdg6eqV47Q==","shasum":"18f85f2c97cf4c826b21f0c62e83f8e8eda2b86d","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.1.3.tgz","fileCount":22,"unpackedSize":87396,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHn7CFJbeXlwu3bP9V2lqmABrCpOY5makJki3O4iuvAdAiBgzOJo1gmoDb5GjwbWsjhzVflIaX34GIwfT/NSasdqFQ=="}]},"_npmUser":{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.1.3_1635624411356_0.9891780981980487"},"_hasShrinkwrap":false},"2.0.1":{"name":"formidable","version":"2.0.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"v2"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"jest --coverage","pretest:ci":"yarn run pretest","test:ci":"nyc jest --coverage","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0","qs":"6.9.3"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"gitHead":"48521d7c82e6c5ce4dab4014de30f1c7fd8dee91","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.0.1","_nodeVersion":"16.8.0","_npmVersion":"8.1.2","dist":{"integrity":"sha512-rjTMNbp2BpfQShhFbR3Ruk3qk2y9jKpvMW78nJgx8QKtxjDVrwbZG+wvDOmVbifHyOUOQJXxqEy6r0faRrPzTQ==","shasum":"4310bc7965d185536f9565184dee74fbb75557ff","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.0.1.tgz","fileCount":20,"unpackedSize":87033,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDK8HSZ8uRWLUs9FZshg8eWu4i38nvsqrHlEZJ9BMAehAiEA8jDfdpPMFJUj73J1dWk0SpqiyufIsiKTJyeOuNJpCRo="}]},"_npmUser":{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.0.1_1635624892420_0.9993434685175493"},"_hasShrinkwrap":false},"1.2.5":{"name":"formidable","version":"1.2.5","license":"MIT","description":"(DEPRECATED! Install formidable@v2) A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./lib/index.js","publishConfig":{"access":"public","tag":"legacy"},"devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n### Important Notes\n\nFor more info, check the [CHANGELOG](https://github.com/node-formidable/formidable/blob/master/CHANGELOG.md) on the master branch.\n\n#### v1 is deprecated\n\nAll `v1` versions are deprecated in NPM for over 2 years. You can find it at `formidable@v1` or `formidable@legacy` on NPM, and on [v1-legacy branch][v1branch] on GitHub.  \nWe highly recommend to use `v2` or `v3`. Both are already in use by many, especially `v2` which was on `formidable@canary` for 2 years.\n\n- **Status: Not Maintained!**\n- We won't provide support or accept reports on that version.\n- **No Backporting:** bugfixes, security fixes, or new features WILL NOT happen!\n- Please move to at least **v2**! \n- Try with installing `formidable@v2` and if still have the problem - report!\n\n---\n\n#### v2 is the new `latest`\nThe `v2` will be simultaneously on two places for some time - `formidable@latest` and `formidable@v2`.\nThe source code be available **only** on [v2 branch][v2branch].\nIf you want to use v2, it's recommended to use the v2 dist-tag `formidable@v2`. \n\n**Main Differences from v1:**\n- Better organization and modernized code, requiring newer Node.js versions (>= v10).\n- A lot of bugfixes, closed issues, merged or closed PRs.\n- **Backward compatible to v1!** Should not have problems, the major version bump is just for ensurance.\n- Better docs, new features (plugins, parsers, options) and optimizations.\n\n---\n\n#### v3 - ESModules, Promises, Monorepo structure\nWe recommend to use `formidable@v3`, as it uses more modern Node.js Streams, has support for Promises and more stuff.\nYou can see more info and track some ideas on [issue#635](https://github.com/node-formidable/formidable/issues/635).\n\n- The source code can be found on the [master branch](https://github.com/node-formidable/formidable) on GitHub.\n- It will be published on `formidable@latest` after some time.\n- Dropping older Node.js versions, requiring higher than v12-v14.\n- Dropping v1 compatibility.\n- Rewritten to ESModules, more optimizations.\n- Moving to monorepo structure, more plugins & helper utils.\n\n[v1branch]: https://github.com/node-formidable/formidable/tree/v1-legacy\n[v2branch]: https://github.com/node-formidable/formidable/tree/v2\n[v3branch]: https://github.com/node-formidable/formidable/tree/v3\n\n---\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## v1 status: not maintained!\n\n## Project Status: Maintained\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n## Features\n\n* Fast (~500mb/sec), non-buffering multipart parser\n* Automatically writing file uploads to disk\n* Low memory footprint\n* Graceful error handling\n* Very high test coverage\n\n## Installation\n\n```sh\nnpm install formidable@v1\nnpm install formidable@v2\nnpm install formidable@v3\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included. However, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nNote: Formidable requires [gently](http://github.com/felixge/node-gently) to run the unit tests, but you won't need it for just using the library.\n\n## Example\n\nParse an incoming file upload.\n```javascript\nvar formidable = require('formidable'),\n    http = require('http'),\n    util = require('util');\n\nhttp.createServer(function(req, res) {\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\n    // parse a file upload\n    var form = new formidable.IncomingForm();\n\n    form.parse(req, function(err, fields, files) {\n      res.writeHead(200, {'content-type': 'text/plain'});\n      res.write('received upload:\\n\\n');\n      res.end(util.inspect({fields: fields, files: files}));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, {'content-type': 'text/html'});\n  res.end(\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">'+\n    '<input type=\"text\" name=\"title\"><br>'+\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\n    '<input type=\"submit\" value=\"Upload\">'+\n    '</form>'\n  );\n}).listen(8080);\n```\n## API\n\n### Formidable.IncomingForm\n```javascript\nvar form = new formidable.IncomingForm()\n```\nCreates a new incoming form.\n\n```javascript\nform.encoding = 'utf-8';\n```\nSets encoding for incoming form fields.\n\n```javascript\nform.uploadDir = \"/my/dir\";\n```\nSets the directory for placing file uploads in. You can move them later on using\n`fs.rename()`. The default is `os.tmpdir()`.\n\n```javascript\nform.keepExtensions = false;\n```\nIf you want the files written to `form.uploadDir` to include the extensions of the original files, set this property to `true`.\n\n```javascript\nform.type\n```\nEither 'multipart' or 'urlencoded' depending on the incoming request.\n\n```javascript\nform.maxFieldsSize = 20 * 1024 * 1024;\n```\nLimits the amount of memory all fields together (except files) can allocate in bytes.\nIf this value is exceeded, an `'error'` event is emitted. The default\nsize is 20MB.\n\n```javascript\nform.maxFileSize = 200 * 1024 * 1024;\n```\nLimits the size of uploaded file.\nIf this value is exceeded, an `'error'` event is emitted. The default\nsize is 200MB.\n\n```javascript\nform.maxFields = 1000;\n```\nLimits the number of fields that the querystring parser will decode. Defaults\nto 1000 (0 for unlimited).\n\n```javascript\nform.hash = false;\n```\nIf you want checksums calculated for incoming files, set this to either `'sha1'` or `'md5'`.\n\n```javascript\nform.multiples = false;\n```\nIf this option is enabled, when you call `form.parse`, the `files` argument will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute.\n\n```javascript\nform.bytesReceived\n```\nThe amount of bytes received for this form so far.\n\n```javascript\nform.bytesExpected\n```\nThe expected number of bytes in this form.\n\n```javascript\nform.parse(request, [cb]);\n```\nParses an incoming node.js `request` containing form data. If `cb` is provided, all fields and files are collected and passed to the callback:\n\n\n```javascript\nform.parse(req, function(err, fields, files) {\n  // ...\n});\n\nform.onPart(part);\n```\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events  processing which would occur otherwise, making you fully responsible for handling the processing.\n\n```javascript\nform.onPart = function(part) {\n  part.addListener('data', function() {\n    // ...\n  });\n}\n```\nIf you want to use formidable to only handle certain parts for you, you can do so:\n```javascript\nform.onPart = function(part) {\n  if (!part.filename) {\n    // let formidable handle all non-file parts\n    form.handlePart(part);\n  }\n}\n```\nCheck the code in this method for further inspiration.\n\n\n### Formidable.File\n```javascript\nfile.size = 0\n```\nThe size of the uploaded file in bytes. If the file is still being uploaded (see `'fileBegin'` event), this property says how many bytes of the file have been written to disk yet.\n```javascript\nfile.path = null\n```\nThe path this file is being written to. You can modify this in the `'fileBegin'` event in\ncase you are unhappy with the way formidable generates a temporary path for your files.\n```javascript\nfile.name = null\n```\nThe name this file had according to the uploading client.\n```javascript\nfile.type = null\n```\nThe mime type of this file, according to the uploading client.\n```javascript\nfile.lastModifiedDate = null\n```\nA date object (or `null`) containing the time this file was last written to. Mostly\nhere for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n```javascript\nfile.hash = null\n```\nIf hash calculation was set, you can read the hex digest out of this var.\n\n#### Formidable.File#toJSON()\n\n  This method returns a JSON-representation of the file, allowing you to\n  `JSON.stringify()` the file which is useful for logging and responding\n  to requests.\n\n### Events\n\n\n#### 'progress'\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```javascript\nform.on('progress', function(bytesReceived, bytesExpected) {\n});\n```\n\n\n\n#### 'field'\n\nEmitted whenever a field / value pair has been received.\n\n```javascript\nform.on('field', function(name, value) {\n});\n```\n\n#### 'fileBegin'\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```javascript\nform.on('fileBegin', function(name, file) {\n});\n```\n\n#### 'file'\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```javascript\nform.on('file', function(name, file) {\n});\n```\n\n#### 'error'\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```javascript\nform.on('error', function(err) {\n});\n```\n\n#### 'aborted'\n\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n```javascript\nform.on('aborted', function() {\n});\n```\n\n##### 'end'\n```javascript\nform.on('end', function() {\n});\n```\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n\n\n## Changelog\n\n[./CHANGELOG.md](./CHANGELOG.md)\n\n## Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\nFrom [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\n\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\n\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our [Contributing\nGuide][contributing-url]. Pull requests are welcome!\n\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen.net//github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n\n","readmeFilename":"Readme.md","gitHead":"c0f0f92c81e03ee604b518159e1c0d08b23261c1","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@1.2.5","_nodeVersion":"16.8.0","_npmVersion":"8.1.2","dist":{"integrity":"sha512-sKM3Bqmh+qEo1EHImqf7wBTo2DwO2xkJmpiCq4L73buppkAGlyTIAH9Q14kOSFYFbh3ZWsu8U5PIjI3VFR5hUw==","shasum":"39c7c7ce2c182ac2a51ced4274ab2d1090d834bd","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.5.tgz","fileCount":10,"unpackedSize":44284,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDc15Cc8okLtBubF3VUy2fl0ewEQ7OtdO0KqWgSqgZWigIgMLD4A038YCC8h6Kv+rO9z3lizbcY1U1jfKAdLm2fk+A="}]},"_npmUser":{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.5_1635625897193_0.6536666443404144"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"1.2.6":{"name":"formidable","version":"1.2.6","license":"MIT","description":"(DEPRECATED! Install formidable@v2) A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./lib/index.js","publishConfig":{"access":"public","tag":"v1"},"devDependencies":{"gently":"^0.8.0","findit":"^0.1.2","hashish":"^0.0.4","urun":"^0.0.6","utest":"^0.0.8","request":"^2.11.4"},"scripts":{"test":"node test/run.js","clean":"rm test/tmp/*"},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n### Important Notes\n\nFor more info, check the [CHANGELOG](https://github.com/node-formidable/formidable/blob/master/CHANGELOG.md) on the master branch.\n\n#### v1 is deprecated\n\nAll `v1` versions are deprecated in NPM for over 2 years. You can find it at `formidable@v1` or `formidable@legacy` on NPM, and on [v1-legacy branch][v1branch] on GitHub.  \nWe highly recommend to use `v2` or `v3`. Both are already in use by many, especially `v2` which was on `formidable@canary` for 2 years.\n\n- **Status: Not Maintained!**\n- We won't provide support or accept reports on that version.\n- **No Backporting:** bugfixes, security fixes, or new features WILL NOT happen!\n- Please move to at least **v2**! \n- Try with installing `formidable@v2` and if still have the problem - report!\n\n---\n\n#### v2 is the new `latest`\nThe `v2` will be simultaneously on two places for some time - `formidable@latest` and `formidable@v2`.\nThe source code be available **only** on [v2 branch][v2branch].\nIf you want to use v2, it's recommended to use the v2 dist-tag `formidable@v2`. \n\n**Main Differences from v1:**\n- Better organization and modernized code, requiring newer Node.js versions (>= v10).\n- A lot of bugfixes, closed issues, merged or closed PRs.\n- **Backward compatible to v1!** Should not have problems, the major version bump is just for ensurance.\n- Better docs, new features (plugins, parsers, options) and optimizations.\n\n---\n\n#### v3 - ESModules, Promises, Monorepo structure\nWe recommend to use `formidable@v3`, as it uses more modern Node.js Streams, has support for Promises and more stuff.\nYou can see more info and track some ideas on [issue#635](https://github.com/node-formidable/formidable/issues/635).\n\n- The source code can be found on the [master branch](https://github.com/node-formidable/formidable) on GitHub.\n- It will be published on `formidable@latest` after some time.\n- Dropping older Node.js versions, requiring higher than v12-v14.\n- Dropping v1 compatibility.\n- Rewritten to ESModules, more optimizations.\n- Moving to monorepo structure, more plugins & helper utils.\n\n[v1branch]: https://github.com/node-formidable/formidable/tree/v1-legacy\n[v2branch]: https://github.com/node-formidable/formidable/tree/v2\n[v3branch]: https://github.com/node-formidable/formidable/tree/v3\n\n---\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore](https://twitter.com/tunnckoCore)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## v1 status: not maintained!\n\n## Project Status: Maintained\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n## Features\n\n* Fast (~500mb/sec), non-buffering multipart parser\n* Automatically writing file uploads to disk\n* Low memory footprint\n* Graceful error handling\n* Very high test coverage\n\n## Installation\n\n```sh\nnpm install formidable@v1\nnpm install formidable@v2\nnpm install formidable@v3\n```\n\nThis is a low-level package, and if you're using a high-level framework it may already be included. However, [Express v4](http://expressjs.com) does not include any multipart handling, nor does [body-parser](https://github.com/expressjs/body-parser).\n\nNote: Formidable requires [gently](http://github.com/felixge/node-gently) to run the unit tests, but you won't need it for just using the library.\n\n## Example\n\nParse an incoming file upload.\n```javascript\nvar formidable = require('formidable'),\n    http = require('http'),\n    util = require('util');\n\nhttp.createServer(function(req, res) {\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\n    // parse a file upload\n    var form = new formidable.IncomingForm();\n\n    form.parse(req, function(err, fields, files) {\n      res.writeHead(200, {'content-type': 'text/plain'});\n      res.write('received upload:\\n\\n');\n      res.end(util.inspect({fields: fields, files: files}));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, {'content-type': 'text/html'});\n  res.end(\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">'+\n    '<input type=\"text\" name=\"title\"><br>'+\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\n    '<input type=\"submit\" value=\"Upload\">'+\n    '</form>'\n  );\n}).listen(8080);\n```\n## API\n\n### Formidable.IncomingForm\n```javascript\nvar form = new formidable.IncomingForm()\n```\nCreates a new incoming form.\n\n```javascript\nform.encoding = 'utf-8';\n```\nSets encoding for incoming form fields.\n\n```javascript\nform.uploadDir = \"/my/dir\";\n```\nSets the directory for placing file uploads in. You can move them later on using\n`fs.rename()`. The default is `os.tmpdir()`.\n\n```javascript\nform.keepExtensions = false;\n```\nIf you want the files written to `form.uploadDir` to include the extensions of the original files, set this property to `true`.\n\n```javascript\nform.type\n```\nEither 'multipart' or 'urlencoded' depending on the incoming request.\n\n```javascript\nform.maxFieldsSize = 20 * 1024 * 1024;\n```\nLimits the amount of memory all fields together (except files) can allocate in bytes.\nIf this value is exceeded, an `'error'` event is emitted. The default\nsize is 20MB.\n\n```javascript\nform.maxFileSize = 200 * 1024 * 1024;\n```\nLimits the size of uploaded file.\nIf this value is exceeded, an `'error'` event is emitted. The default\nsize is 200MB.\n\n```javascript\nform.maxFields = 1000;\n```\nLimits the number of fields that the querystring parser will decode. Defaults\nto 1000 (0 for unlimited).\n\n```javascript\nform.hash = false;\n```\nIf you want checksums calculated for incoming files, set this to either `'sha1'` or `'md5'`.\n\n```javascript\nform.multiples = false;\n```\nIf this option is enabled, when you call `form.parse`, the `files` argument will contain arrays of files for inputs which submit multiple files using the HTML5 `multiple` attribute.\n\n```javascript\nform.bytesReceived\n```\nThe amount of bytes received for this form so far.\n\n```javascript\nform.bytesExpected\n```\nThe expected number of bytes in this form.\n\n```javascript\nform.parse(request, [cb]);\n```\nParses an incoming node.js `request` containing form data. If `cb` is provided, all fields and files are collected and passed to the callback:\n\n\n```javascript\nform.parse(req, function(err, fields, files) {\n  // ...\n});\n\nform.onPart(part);\n```\nYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events  processing which would occur otherwise, making you fully responsible for handling the processing.\n\n```javascript\nform.onPart = function(part) {\n  part.addListener('data', function() {\n    // ...\n  });\n}\n```\nIf you want to use formidable to only handle certain parts for you, you can do so:\n```javascript\nform.onPart = function(part) {\n  if (!part.filename) {\n    // let formidable handle all non-file parts\n    form.handlePart(part);\n  }\n}\n```\nCheck the code in this method for further inspiration.\n\n\n### Formidable.File\n```javascript\nfile.size = 0\n```\nThe size of the uploaded file in bytes. If the file is still being uploaded (see `'fileBegin'` event), this property says how many bytes of the file have been written to disk yet.\n```javascript\nfile.path = null\n```\nThe path this file is being written to. You can modify this in the `'fileBegin'` event in\ncase you are unhappy with the way formidable generates a temporary path for your files.\n```javascript\nfile.name = null\n```\nThe name this file had according to the uploading client.\n```javascript\nfile.type = null\n```\nThe mime type of this file, according to the uploading client.\n```javascript\nfile.lastModifiedDate = null\n```\nA date object (or `null`) containing the time this file was last written to. Mostly\nhere for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n```javascript\nfile.hash = null\n```\nIf hash calculation was set, you can read the hex digest out of this var.\n\n#### Formidable.File#toJSON()\n\n  This method returns a JSON-representation of the file, allowing you to\n  `JSON.stringify()` the file which is useful for logging and responding\n  to requests.\n\n### Events\n\n\n#### 'progress'\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.\n\n```javascript\nform.on('progress', function(bytesReceived, bytesExpected) {\n});\n```\n\n\n\n#### 'field'\n\nEmitted whenever a field / value pair has been received.\n\n```javascript\nform.on('field', function(name, value) {\n});\n```\n\n#### 'fileBegin'\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on\nthe file system.\n\n```javascript\nform.on('fileBegin', function(name, file) {\n});\n```\n\n#### 'file'\n\nEmitted whenever a field / file pair has been received. `file` is an instance of `File`.\n\n```javascript\nform.on('file', function(name, file) {\n});\n```\n\n#### 'error'\n\nEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.\n\n```javascript\nform.on('error', function(err) {\n});\n```\n\n#### 'aborted'\n\n\nEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. After this event is emitted, an `error` event will follow. In the future there will be a separate 'timeout' event (needs a change in the node core).\n```javascript\nform.on('aborted', function() {\n});\n```\n\n##### 'end'\n```javascript\nform.on('end', function() {\n});\n```\nEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.\n\n\n\n## Changelog\n\n[./CHANGELOG.md](./CHANGELOG.md)\n\n## Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\nFrom [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\n\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\n\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our [Contributing\nGuide][contributing-url]. Pull requests are welcome!\n\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/tunnckoCore\n[twitter-img]: https://badgen.net/twitter/follow/tunnckoCore?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen.net//github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n\n","readmeFilename":"Readme.md","gitHead":"f1d43172da4f8f299f6d84884109809c7ca80422","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@1.2.6","_nodeVersion":"16.8.0","_npmVersion":"8.1.2","dist":{"integrity":"sha512-KcpbcpuLNOwrEjnbpMC0gS+X8ciDoZE1kkqzat4a8vrprf+s9pKNQ/QIwWfbfs4ltgmFl3MD177SNTkve3BwGQ==","shasum":"d2a51d60162bbc9b4a055d8457a7c75315d1a168","tarball":"https://registry.npmjs.org/formidable/-/formidable-1.2.6.tgz","fileCount":10,"unpackedSize":44280,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC8v/C6XM8iNt53QOF7YxZ3te7+MZCUlWMsJcNIIGXwJgIgLobA6myaMN6QyxPq/WEArQS7wxNkAp2NLuDl1ni6+50="}]},"_npmUser":{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_1.2.6_1635626132443_0.6340846094264292"},"_hasShrinkwrap":false,"deprecated":"Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau"},"3.1.4":{"name":"formidable","version":"3.1.4","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of uploaded file.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"5706c14b0c65817588cd1673f10ed7419b59628a","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.1.4","_nodeVersion":"16.11.0","_npmVersion":"8.1.4","dist":{"integrity":"sha512-HlHZ4+NqzAyo5rMuyM+ZOkwookNqcr5GLzJz++1+XA6/lJ/QRXCgZhLyMvSzjZ1KOAPM2qAo3WGDctedzA3htw==","shasum":"2fe8c3abc0c909f75eb24067169f730a4633b438","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.1.4.tgz","fileCount":22,"unpackedSize":90314,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhpkMBCRA9TVsSAnZWagAAC04P/0bbDIXrNdLUohrP/lCZ\nzmUekNNraSix5D4QUXuU/RQBUfDZUCypp5TC54P/JQfqU2fcWnX1HRcP7V4a\nM3VJZH+9cc7V/lxYYwIzAWY+2iYGcgSAWoSCNb9Wk5LGuDwbx0sTFmMR1J5R\nMKI5gTS+EpFr6uXi+NwjGURMrXWYGW+o1fLsb3XNJmEKBcZmJllk96aTGudk\nHGUB2jX4PRPLsetRCJhfEh90xyMKjmEqLO8Rw9bBCjp4keUdTtPrpF4qcnAZ\nbUKIxKCwFgOZDjD2MqpCSjNYE80fYi5HzyteK5Izs4mROSJQZkyVJcaN5/uS\nzbezoj0a8bqH4Sah0Spcmx8jPtpCyayQdvOFGIOw9OHaRRUKiDZlULesXRH4\n8/DgfqvE3Qt0C9NkCvANz2HxEMCFdYnwN+PCC8a/GOyYZGPt1uvYZhXF83Aw\nb7mtsAwZSiwO3643gQ7Bm80XfQNhnsl4crq3u/IDD4HvfyN9qQ3nw/vDs/GE\nEQZG2pa+UoKMGCWYWeCm+h0n+9lftY5Ft4y60HxdGMHmWLontYB/xS2so2vX\niBmJj34r8DUJxnzRAuRHCrof7BcwdaZnIDXTk3D39sMxZ/VrqwHjm+dKXJ3d\nYm3cJ1vlWwaXTtgwBrfsMnfZBOP3Q9ffIwOC4Uc1lj6160JFgXnmFNl9PDNE\nAgXO\r\n=6rQq\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICBveL34TVGm2LW6Bg2zba/Jd9UHjgNjpOrR16HrWO5YAiBfosKiQcCMn6xof2fy7ixDzYcOtTEENcSWcsV2JGKONA=="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.1.4_1638286081600_0.6932632188834882"},"_hasShrinkwrap":false},"3.1.5":{"name":"formidable","version":"3.1.5","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of uploaded file.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"27fdf692da49b37f1055eaf444628ffca699a06c","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.1.5","_nodeVersion":"16.11.0","_npmVersion":"8.1.4","dist":{"integrity":"sha512-VSZFI/q6j8IvhrXNmUAGa/ImmKhKAukJIvTRc8dJ1EDr5rZAKJ/La/5rgjDSIp/p9grnOBGp/rG++WL/uhHWvg==","shasum":"da1caede235bbcefc98480956e970c02771474b0","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.1.5.tgz","fileCount":22,"unpackedSize":90296,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhroTECRA9TVsSAnZWagAAB60P/2sUM+4q6DBhH3RHDIkP\neVQdjfSYnltonIc/qt78nZL+Y4lyuk1oKwWVWKUlj+B7kaj51ysQMU4DsG7c\nApuR2FKjqsKoS/jw+kusrWLyR1GS6g5eHIbmssPoEJz+s/xogA0EwKhP2Ey7\nuLE6XU/qSUVwV/HzCTByrts4+R8sOAf4hHRPquRy1kFNK0U8JivhP2QohGac\niTqCfXyunm7jWNK3DZVkrF3viedXE2jkhhTuohGJ1xnDInszcJHPwSKOqtqg\nbW12+a0QaNSM0xUmRDNx0se3NrKKgqX/8pc3CfwUHWDvdHc2/hPsLNzuFDD6\nJI1I+qT/hcLebMnOhUumvlEKl8EN+d1qUlZK0YU7PEHVYOuJSFx2g1hDJCp5\nFQg7KqU2niypFBKSq6VUsyH8Ek3Zr2Op3hw3l10oTkg9kr9S9G66p6l8xfrS\n7KahX0/cwwYqWA6PJuHTfMJSDAsLBUC4W/SHjO1EYHLGkBBnjZM8ixa3z5JK\nVchbI4yPw4ZEAoRD9QchmUJTsvt+Cu8uzt0mW013YYsiJe8166VZoO+1HBZC\noHitMPzmh1ishlc2nEcsTOjo0NYnGVYX5+lWKXqYGDqbsQ4AKIjqI2aDGLpI\nv18jnYFa5njVV8wvqyQOXkx3GGM9Hhngz9K643ds8JuQ0pHwjf9AcxQBEYPc\nNc3w\r\n=IiAi\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD680GwGB/+N4MSUr4bNTY7MIhSUv9JxG7J/2XUShD1SgIhAJZIC4y5H9xn1r5LaHEMWdEEosLoqU7jsgFW2092Erm/"}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.1.5_1638827203859_0.991260201783428"},"_hasShrinkwrap":false},"3.2.0":{"name":"formidable","version":"3.2.0","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v4"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFiles` **{number}** - default `Infinity`;\r\n  limit the amount of uploaded files.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of each uploaded file.\r\n- `options.maxTotalFileSize` **{number}** - default `options.maxFileSize`;\r\n  limit the size of the batch of uploaded files.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"5cad764e32509b80998a1080b6b237ad58e24b1b","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.2.0","_nodeVersion":"16.11.0","_npmVersion":"8.1.4","dist":{"integrity":"sha512-ppwpsso2QsrAHVVsQg0Z8r6aIWGKNb9CcbqbuUw2nSjjoOre25UPqKyrC8KEne1FbFRS2HOQL9uzk6xA9Cozqw==","shasum":"65b0d5543c1b577df3abee36d0949e5660adb572","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.2.0.tgz","fileCount":22,"unpackedSize":91720,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhsg9lCRA9TVsSAnZWagAAR0YQAJgrZ1u2FJqIynMy8mGg\n1S5yrkpNXCE0G99V9Ekb/IOKpTO3h+Zt0omfaRzeFhwOBediyVrlernv8LHv\nF43yxRktDP5ynjAcUB/nOXqDzw1YqiDrR5UP3FhVTSfe6V8T+Mrqn8ojUhvQ\nFpkGjayBTqWnXybCkFHbEAPAkq5FYpTqyhlCDUKv6D40TP8EVnB2QmdQPRqs\nyox33ARPXqTWKvP7BvPtrSHDaQH4SfB6iGOZEbBEcyiyW9fMD+MeX9cAPmUe\nM7+EeWBIy2ucoSR+W/KJR3UXVBpfHPW/NDtvbXrPK9YcSm0ukqKwplGJkdt/\n3YaMKg9Fbx+oPQf7E+kzU+GdYYRPMp5+85/wfQGue0t7EEf3Yev8UwH1NPRw\nbLwuC0m1AXG0yNyF+NRnj1+IzYZ8Xcb/R3L/6lsTJ017AFpHJqJvMulNNRS6\nwCwr4ojeMCmf1ttgCycDNm8NI7xKV5EYloxURuIfb5dJ8mUaDbG9xgIurKsr\n8GzuusufCt1mnf5pEq48/mrlCIjRf8RElpcXPm+qADud1CSW/NX05WYWWec9\nF8La5GdNaYDlqyQFbrdhTxXb/7DaXspQ4oYuPTG+CN7oW522TcRD9zOziMxx\n5z6gmBM73gpgz4EsIKSGar28xI/OxaAWeIHivomI9dq3PlXEfpLo3coe9iTm\nNkMT\r\n=MoH1\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEw4tGOydiFKgF16bdtxxk4s0dfxLvzd9QZsZ7ouy5u5AiEAxqXy6NnFOdrCWfaF33cIlGceL+S7rEL9NcQknvaCEl4="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.2.0_1639059301095_0.5977296200782174"},"_hasShrinkwrap":false},"3.2.1":{"name":"formidable","version":"3.2.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFiles` **{number}** - default `Infinity`;\r\n  limit the amount of uploaded files.\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of each uploaded file.\r\n- `options.maxTotalFileSize` **{number}** - default `options.maxFileSize`;\r\n  limit the size of the batch of uploaded files.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"64f32c2d5486918b2b8afdc2c6cc994d5f9a4a61","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.2.1","_nodeVersion":"16.11.0","_npmVersion":"8.1.4","dist":{"integrity":"sha512-AwoxIYwFR51avbHvM5LRTbJi/vuwAuUK1vdhD5nS6ewB4kBGJXGgCXPzpsZVewJ+s+J3U6DR00tCWLnppc9rrA==","shasum":"1e2d4d4ef362f1d269624c867f232ceeaf021ca8","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.2.1.tgz","fileCount":22,"unpackedSize":91798,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhtejoCRA9TVsSAnZWagAAJAIP/jIsj3UZWXabd4sgr0Xr\nYtsaxfi8eUeIM7LZZGDf/KOBgFmhFORfyTnjlnaMzjRbnAxON/98PxpcqjI5\naOmGV1NNSpf5gFrtmtzJtd1+BS26/HVsGutP7MUF7gNuD8Sv7cuHwHjuRCxX\nYdc8ohKqFzEu3YCS8iABDTYKUmHLNO83gsrYkfaGjZVnzZWwmStD7GPKoNN2\nzDXSFqqc/1vq2sJaGNiHEfy/8jUwZyL+Vwhs5IUgFvsRFsYH0otL+miZXBvG\nJcXOes9JBQbXFtD7dxYeiI/1YJthH4bPC7vSEHhmofHSd+Z3KOoe1xirapTH\nqYu+PsBhtFWyj+5zISjbXyj8qOhbXc3O+27E2jQ2xwQ69479SkHbo2Qp+fJS\ni9cyyv2rsbXMNruRbiQBLglHhh/kzCRCcNzjaZR/szC9iEkTt0ZLwkzLRzdy\npiHkszqzh0XOUL216MDK4LOh826ZRDMXx9TKngBcDBDCbnA93JsxHidJOPR8\nfGiqUoS7LlOc1eba1n7FvUgZp1n57Ycj1NZqvNmBtCl2Y8YZoIFWjLk3V8mq\nprfJmkSgDJIdtBrC/YLW2RPRMSoAZNpp+VA7pQY+kccN/JFBiP860jn0Mbpb\n3LsIy+d4DT693e6qCuN+kOwVCQBJedkyyeqc257wLqB169OtuR9I0NJ/Qwwh\nfU06\r\n=n5Nf\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD7kgx8hKCFq8u9rZ65IRq4dNa3CxdNOOyi5bivyXoWeAIhAP4IxdvjzZKhNHuqnptQzaE9o+qwRbULL6NbN3tje6rH"}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.2.1_1639311592211_0.3231394961221885"},"_hasShrinkwrap":false},"3.2.3":{"name":"formidable","version":"3.2.3","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `false`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFiles` **{number}** - default `Infinity`;\r\n  limit the amount of uploaded files, set Infinity for unlimited\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of each uploaded file.\r\n- `options.maxTotalFileSize` **{number}** - default `options.maxFileSize`;\r\n  limit the size of the batch of uploaded files.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set Infinity for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"971e3a7f2c6510ee803dcace68ce850a9d573c21","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.2.3","_nodeVersion":"18.0.0","_npmVersion":"8.5.5","dist":{"integrity":"sha512-oIfunDCq+dW5/F654ZsyePKbeRUXG3NIMSlLm7w6lIYopNja1SDDPRBm1yyXZIc8/tUn4abObvJihJwW4DdAUQ==","shasum":"5bdca88467d9d938e16acce45d4015ccd3b39859","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.2.3.tgz","fileCount":22,"unpackedSize":90809,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCWB/d4MNUrt1h431suC288US/5uveWWX7ytj9ZnMoMoAIhAPXv5ABekD4naxBdH/26owLMNuV8CaLdnHhBn+tnCAhB"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJiaB6eACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrqFg/9GQxiTrsf9H24noe29KKocC8GY6YOv5Ksq5xQj6l1pR4EV4l4\r\nDYMrwt+kHTizgKX6NjFaTrCi0D7e+AxmP42/odUGH8taEi1uVgbwerZSmTjf\r\nyQjxPJffBnVTli0pNaR437NVFIABrsj/q9Qmk8C7RuRM6hQauNNYR/ziJv2z\r\nDULZZzRdjs0nLuWbJ04df0mlNxjqt8F0jluXGrdwv++48qNkdoAYRM0pVGiQ\r\n1ulZQz846FpfLew7Pcd9IKrhJeWXi0vn/J5CgCrZkCxTSnRILDHspViM/XES\r\nD4plwiCee+BGa1EO7KdsfBGoQo0Nf7r3hEYOtitrGVfKKkqhBXqAHYojQivp\r\nlpG3LkRQ1ovJ4Kk5FO99JT7HzeNNDMWlqf5oL7meKvf9cABCXQWSx7crWWSy\r\nvfUwbgoVVRKQCURTk76QlkrFlUIDcPwQBruX+A9bNSiwMnkUJgiUTg2TAKXi\r\nCYralZO1SDJNA9Iy1dpslNhRpywUw/feT5Z7PeIqaeMUtnDQuMn6TujpeiPi\r\nPg3D4O7dckm2ZxJllmDQg37iDFOuT1pSOqDNVlX2j6b+adsbKawXd+fWk/du\r\n0f8ULg9cfG1BJhfll4JWwP7MaSirGsgiRHryD+HL+V9Aox+uoTe6L158kO/Q\r\npHg1xel+0EKZCDnmE3/BFhNHqyB4fIhU+/Y=\r\n=k8md\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.2.3_1650990750377_0.917559901839551"},"_hasShrinkwrap":false},"3.2.4":{"name":"formidable","version":"3.2.4","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@sindresorhus/slugify":"^2.1.0","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `false`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFiles` **{number}** - default `Infinity`;\r\n  limit the amount of uploaded files, set Infinity for unlimited\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of each uploaded file.\r\n- `options.maxTotalFileSize` **{number}** - default `options.maxFileSize`;\r\n  limit the size of the batch of uploaded files.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set Infinity for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"143e473f2989f7efcd918b86a79a96a054f24bfa","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.2.4","_nodeVersion":"18.0.0","_npmVersion":"8.5.5","dist":{"integrity":"sha512-8/5nJsq+o2o1+Dryx1k5gLTDaw0dNE9kL4P3srKArO6zhoerGm42/R8zq+L5EkV7kckNTvJpJke0kI8JseL3RQ==","shasum":"c0019368718de33ecb637c66d03b6342a677893a","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.2.4.tgz","fileCount":22,"unpackedSize":91348,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCN17Ru0cTFauMF3O05puy0AUMTrq12FQStMUnoUimZRgIgZSbV8VmqmSdlJlhtrPaCUnEJjsbrcA66sD/ahaIUIrA="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJihhitACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqP6w/+MQQB1xWCXEeIf4SZzwWA+mKXJSvdD26DS/PFEP6QMoCeHonl\r\njvXgwaa3VWSVxBjdquNyS/m+KN5n55q1vrbH9ERpKTSPj4iploiW0YjWcCyn\r\nawrVogAAMXwpYMSmthvtFH8F//pRoDKqXL7N7dh7gdBS6iSF4ZBLP7f4NGkI\r\nLRbGMzapHbb3HTUjQ/vVJFzxv+BlxNoPwqYcFHhiH2nenhMZqXQ+InzutEn/\r\nIP6b0Rx0hi9FIsqacaQq7YjoKttyfxure7FcXx4ytrY4vG7CcdJG9waCkvE0\r\nu/fHvxdB6VEIrg8jiPQRn5++mmoi+7WKiZLby136BOfLbHDa3seSC5fMcehM\r\nKIErt48yuq2NsrsjFdj5QH5Ijn7SfzJpVvoit8v7kmQ+9BS4aVbGanRM+3wb\r\nUJanb6OfHP2NtHZVkRGXJQeSBQKPzMZYtGyl6pCzK4CJnRVR7/8cG9Mf1z42\r\niz7kAD3K2JHHU/48jBv7iX70dmvnq7gy4XncDG3mPdCbALx2I0zRlwgDMYbx\r\n5eGIpkd/umxeu0Vfohr9p4zflh7hMZiojR+Ga1XX8/VgASo1sk+dDYw4iJUQ\r\njzoOtfpm3+wUUjrhfPrA1WQq97evkB413qKtLgOZ/1UYg+PhmFaeafDdBTHb\r\nRqfIB89/ix0jvJEJZ9hLxdsoH73msN8+4M0=\r\n=kFAR\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"dev@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.2.4_1652955309319_0.20878259840018187"},"_hasShrinkwrap":false},"3.2.5":{"name":"formidable","version":"3.2.5","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"v3"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"node  --experimental-vm-modules ./node_modules/jest/bin/jest.js --coverage","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --coverage"},"dependencies":{"dezalgo":"1.0.3","hexoid":"1.0.0","once":"1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@sindresorhus/slugify":"^2.1.0","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"readme":"<p align=\"center\">\r\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\r\n</p>\r\n\r\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\r\n\r\n> A Node.js module for parsing form data, especially file uploads.\r\n\r\n[![Code style][codestyle-img]][codestyle-url]\r\n[![codecoverage][codecov-img]][codecov-url]\r\n[![linux build status][linux-build-img]][build-url]\r\n[![windows build status][windows-build-img]][build-url]\r\n[![macos build status][macos-build-img]][build-url]\r\n\r\nIf you have any _how-to_ kind of questions, please read the [Contributing\r\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\r\ndocuments.<br /> For bugs reports and feature requests, [please create an\r\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\r\nat Twitter.\r\n\r\n[![Conventional Commits][ccommits-img]][ccommits-url]\r\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\r\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\r\n[![Buy me a Kofi][kofi-img]][kofi-url]\r\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\r\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\r\n\r\nThis project is [semantically versioned](https://semver.org) and available as\r\npart of the [Tidelift Subscription][tidelift-url] for professional grade\r\nassurances, enhanced support and security.\r\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\r\n\r\n_The maintainers of `formidable` and thousands of other packages are working\r\nwith Tidelift to deliver commercial support and maintenance for the Open Source\r\ndependencies you use to build your applications. Save time, reduce risk, and\r\nimprove code health, while paying the maintainers of the exact dependencies you\r\nuse._\r\n\r\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\r\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\r\n\r\n## Project Status: Maintained\r\n\r\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\r\n\r\nThis module was initially developed by\r\n[**@felixge**](https://github.com/felixge) for\r\n[Transloadit](http://transloadit.com/), a service focused on uploading and\r\nencoding images and videos. It has been battle-tested against hundreds of GBs of\r\nfile uploads from a large variety of clients and is considered production-ready\r\nand is used in production for years.\r\n\r\nCurrently, we are few maintainers trying to deal with it. :) More contributors\r\nare always welcome! :heart: Jump on\r\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\r\nclosed, but if you are interested we can discuss it and add you after strict\r\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\r\n\r\n## Highlights\r\n\r\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\r\n- Automatically writing file uploads to disk (optional, see\r\n  [`options.fileWriteStreamHandler`](#options))\r\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\r\n- Low memory footprint\r\n- Graceful error handling\r\n- Very high test coverage\r\n\r\n## Install\r\n\r\nThis project requires `Node.js >= 10.13`. Install it using\r\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\r\nrecommend to use Yarn when you think to contribute to this project._\r\n\r\nThis is a low-level package, and if you're using a high-level framework it _may_\r\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\r\n\r\n```\r\n# v2\r\nnpm install formidable\r\nnpm install formidable@v2\r\n\r\n# v3\r\nnpm install formidable@v3\r\n```\r\n\r\n_**Note:** In the near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\r\n\r\n\r\n## Examples\r\n\r\nFor more examples look at the `examples/` directory.\r\n\r\n### with Node.js http module\r\n\r\nParse an incoming file upload, with the\r\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\r\n\r\n```js\r\nimport http from 'node:http';\r\nimport formidable from 'formidable';\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\r\n    // parse a file upload\r\n    const form = formidable({});\r\n\r\n    form.parse(req, (err, fields, files) => {\r\n      if (err) {\r\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\r\n        res.end(String(err));\r\n        return;\r\n      }\r\n      res.writeHead(200, { 'Content-Type': 'application/json' });\r\n      res.end(JSON.stringify({ fields, files }, null, 2));\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, { 'Content-Type': 'text/html' });\r\n  res.end(`\r\n    <h2>With Node.js <code>\"http\"</code> module</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\nserver.listen(8080, () => {\r\n  console.log('Server listening on http://localhost:8080/ ...');\r\n});\r\n```\r\n\r\n### with Express.js\r\n\r\nThere are multiple variants to do this, but Formidable just need Node.js Request\r\nstream, so something like the following example should work just fine, without\r\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\r\n\r\nOr try the\r\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\r\n\r\n```js\r\nimport express from 'express';\r\nimport formidable from 'formidable';\r\n\r\nconst app = express();\r\n\r\napp.get('/', (req, res) => {\r\n  res.send(`\r\n    <h2>With <code>\"express\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `);\r\n});\r\n\r\napp.post('/api/upload', (req, res, next) => {\r\n  const form = formidable({});\r\n\r\n  form.parse(req, (err, fields, files) => {\r\n    if (err) {\r\n      next(err);\r\n      return;\r\n    }\r\n    res.json({ fields, files });\r\n  });\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n### with Koa and Formidable\r\n\r\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\r\nare very similar. You can use `formidable` manually as shown below or through\r\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\r\nusing `formidable` under the hood and support more features and different\r\nrequest bodies, check its documentation for more info.\r\n\r\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\r\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\r\nobject - there is a difference._\r\n\r\n```js\r\nimport Koa from 'Koa';\r\nimport formidable from 'formidable';\r\n\r\nconst app = new Koa();\r\n\r\napp.on('error', (err) => {\r\n  console.error('server error', err);\r\n});\r\n\r\napp.use(async (ctx, next) => {\r\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\r\n    const form = formidable({});\r\n\r\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\r\n    // or other middlewares.\r\n    await new Promise((resolve, reject) => {\r\n      form.parse(ctx.req, (err, fields, files) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n\r\n        ctx.set('Content-Type', 'application/json');\r\n        ctx.status = 200;\r\n        ctx.state = { fields, files };\r\n        ctx.body = JSON.stringify(ctx.state, null, 2);\r\n        resolve();\r\n      });\r\n    });\r\n    await next();\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  ctx.set('Content-Type', 'text/html');\r\n  ctx.status = 200;\r\n  ctx.body = `\r\n    <h2>With <code>\"koa\"</code> npm package</h2>\r\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\r\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\r\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\r\n    <input type=\"submit\" value=\"Upload\" />\r\n    </form>\r\n  `;\r\n});\r\n\r\napp.use((ctx) => {\r\n  console.log('The next middleware is called');\r\n  console.log('Results:', ctx.state);\r\n});\r\n\r\napp.listen(3000, () => {\r\n  console.log('Server listening on http://localhost:3000 ...');\r\n});\r\n```\r\n\r\n## Benchmarks\r\n\r\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\r\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\r\nNode.js Streams API it's faster. You can clearly see the differences between the\r\nNode versions.\r\n\r\n_Note: a lot better benchmarking could and should be done in future._\r\n\r\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\r\n\r\n```\r\n~/github/node-formidable master\r\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\r\n\r\n ⬢  Node 8\r\n\r\n1261.08 mb/sec\r\n\r\n ⬢  Node 10\r\n\r\n1113.04 mb/sec\r\n\r\n ⬢  Node 12\r\n\r\n2107.00 mb/sec\r\n\r\n ⬢  Node 13\r\n\r\n2566.42 mb/sec\r\n```\r\n\r\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\r\n\r\n## API\r\n\r\n### Formidable / IncomingForm\r\n\r\nAll shown are equivalent.\r\n\r\n_Please pass [`options`](#options) to the function/constructor, not by assigning\r\nthem to the instance `form`_\r\n\r\n```js\r\nimport formidable from 'formidable';\r\nconst form = formidable(options);\r\n```\r\n\r\n### Options\r\n\r\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\r\n(the `DEFAULT_OPTIONS` constant).\r\n\r\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\r\n  incoming form fields,\r\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\r\n  placing file uploads in. You can move them later by using `fs.rename()`.\r\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\r\n  extensions of the original files or not\r\n- `options.allowEmptyFiles` **{boolean}** - default `false`; allow upload empty\r\n  files\r\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\r\n  uploaded file.\r\n- `options.maxFiles` **{number}** - default `Infinity`;\r\n  limit the amount of uploaded files, set Infinity for unlimited\r\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\r\n  limit the size of each uploaded file.\r\n- `options.maxTotalFileSize` **{number}** - default `options.maxFileSize`;\r\n  limit the size of the batch of uploaded files.\r\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set Infinity for unlimited\r\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\r\n  limit the amount of memory all fields together (except files) can allocate in\r\n  bytes.\r\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\r\n  for incoming files, set this to some hash algorithm, see\r\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\r\n  for available algorithms\r\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\r\n  default writes to host machine file system every file parsed; The function\r\n  should return an instance of a\r\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\r\n  that will receive the uploaded file data. With this option, you can have any\r\n  custom behavior regarding where the uploaded file data will be streamed for.\r\n  If you are looking to write the file uploaded in other types of cloud storages\r\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\r\n  this is the option you're looking for. When this option is defined the default\r\n  behavior of writing the file in the host machine file system is lost.\r\n- `options.filename` **{function}** - default `undefined` Use it to control\r\n  newFilename. Must return a string. Will be joined with options.uploadDir.\r\n\r\n- `options.filter` **{function}** - default function that always returns true.\r\n  Use it to filter files before they are uploaded. Must return a boolean.\r\n\r\n\r\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\r\n\r\nwhere part can be decomposed as\r\n\r\n```js\r\nconst { originalFilename, mimetype} = part;\r\n```\r\n\r\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\r\n`'error'` event is fired._\r\n\r\n```js\r\n// The amount of bytes received for this form so far.\r\nform.bytesReceived;\r\n```\r\n\r\n```js\r\n// The expected number of bytes in this form.\r\nform.bytesExpected;\r\n```\r\n\r\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\r\n\r\n**Note:** use an outside variable to cancel all uploads upon the first error \r\n\r\n```js\r\nconst options = {\r\n  filter: function ({name, originalFilename, mimetype}) {\r\n    // keep only images\r\n    return mimetype && mimetype.includes(\"image\");\r\n  }\r\n};\r\n```\r\n\r\n\r\n### .parse(request, callback)\r\n\r\nParses an incoming Node.js `request` containing form data. If `callback` is\r\nprovided, all fields and files are collected and passed to the callback.\r\n\r\n```js\r\nconst form = formidable({ uploadDir: __dirname });\r\n\r\nform.parse(req, (err, fields, files) => {\r\n  console.log('fields:', fields);\r\n  console.log('files:', files);\r\n});\r\n```\r\n\r\nYou may overwrite this method if you are interested in directly accessing the\r\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\r\nprocessing which would occur otherwise, making you fully responsible for\r\nhandling the processing.\r\n\r\nAbout `uploadDir`, given the following directory structure \r\n```\r\nproject-name\r\n├── src\r\n│   └── server.js\r\n│       \r\n└── uploads\r\n    └── image.jpg\r\n```\r\n\r\n`__dirname` would be the same directory as the source file itself (src)\r\n\r\n\r\n```js\r\n `${__dirname}/../uploads`\r\n```\r\n\r\nto put files in uploads.\r\n\r\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\r\n\r\n\r\n`null` will use default which is `os.tmpdir()`\r\n\r\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\r\n\r\n```js\r\nimport {createNecessaryDirectoriesSync} from \"filesac\";\r\n\r\n\r\nconst uploadPath = `${__dirname}/../uploads`;\r\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\r\n```\r\n\r\n\r\nIn the example below, we listen on couple of events and direct them to the\r\n`data` listener, so you can do whatever you choose there, based on whether its\r\nbefore the file been emitted, the header value, the header name, on field, on\r\nfile and etc.\r\n\r\nOr the other way could be to just override the `form.onPart` as it's shown a bit\r\nlater.\r\n\r\n```js\r\nform.once('error', console.error);\r\n\r\nform.on('fileBegin', (formname, file) => {\r\n  form.emit('data', { name: 'fileBegin', formname, value: file });\r\n});\r\n\r\nform.on('file', (formname, file) => {\r\n  form.emit('data', { name: 'file', formname, value: file });\r\n});\r\n\r\nform.on('field', (fieldName, fieldValue) => {\r\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\r\n});\r\n\r\nform.once('end', () => {\r\n  console.log('Done!');\r\n});\r\n\r\n// If you want to customize whatever you want...\r\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\r\n  if (name === 'partBegin') {\r\n  }\r\n  if (name === 'partData') {\r\n  }\r\n  if (name === 'headerField') {\r\n  }\r\n  if (name === 'headerValue') {\r\n  }\r\n  if (name === 'headerEnd') {\r\n  }\r\n  if (name === 'headersEnd') {\r\n  }\r\n  if (name === 'field') {\r\n    console.log('field name:', key);\r\n    console.log('field value:', value);\r\n  }\r\n  if (name === 'file') {\r\n    console.log('file:', formname, value);\r\n  }\r\n  if (name === 'fileBegin') {\r\n    console.log('fileBegin:', formname, value);\r\n  }\r\n});\r\n```\r\n\r\n### .use(plugin: Plugin)\r\n\r\nA method that allows you to extend the Formidable library. By default we include\r\n4 plugins, which esentially are adapters to plug the different built-in parsers.\r\n\r\n**The plugins added by this method are always enabled.**\r\n\r\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\r\n\r\nThe `plugin` param has such signature:\r\n\r\n```typescript\r\nfunction(formidable: Formidable, options: Options): void;\r\n```\r\n\r\nThe architecture is simple. The `plugin` is a function that is passed with the\r\nFormidable instance (the `form` across the README examples) and the options.\r\n\r\n**Note:** the plugin function's `this` context is also the same instance.\r\n\r\n```js\r\nconst form = formidable({ keepExtensions: true });\r\n\r\nform.use((self, options) => {\r\n  // self === this === form\r\n  console.log('woohoo, custom plugin');\r\n  // do your stuff; check `src/plugins` for inspiration\r\n});\r\n\r\nform.parse(req, (error, fields, files) => {\r\n  console.log('done!');\r\n});\r\n```\r\n\r\n**Important to note**, is that inside plugin `this.options`, `self.options` and\r\n`options` MAY or MAY NOT be the same. General best practice is to always use the\r\n`this`, so you can later test your plugin independently and more easily.\r\n\r\nIf you want to disable some parsing capabilities of Formidable, you can disable\r\nthe plugin which corresponds to the parser. For example, if you want to disable\r\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\r\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\r\nyou can remove it from the `options.enabledPlugins`, like so\r\n\r\n```js\r\nimport formidable, {octetstream, querystring, json} from \"formidable\";\r\nconst form = formidable({\r\n  hashAlgorithm: 'sha1',\r\n  enabledPlugins: [octetstream, querystring, json],\r\n});\r\n```\r\n\r\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\r\nfiles in [src/plugins/](./src/plugins) folder.\r\n\r\nPull requests for new built-in plugins MAY be accepted - for example, more\r\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\r\nfolder (lowercased) and follow how the other plugins are made.\r\n\r\n### form.onPart\r\n\r\nIf you want to use Formidable to only handle certain parts for you, you can do\r\nsomething similar. Or see\r\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\r\ninspiration, you can for example validate the mime-type.\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = (part) => {\r\n  part.on('data', (buffer) => {\r\n    // do whatever you want here\r\n  });\r\n};\r\n```\r\n\r\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\r\nfields)\r\n\r\n```js\r\nconst form = formidable();\r\n\r\nform.onPart = function (part) {\r\n  // let formidable handle only non-file parts\r\n  if (part.originalFilename === '' || !part.mimetype) {\r\n    // used internally, please do not override!\r\n    form._handlePart(part);\r\n  }\r\n};\r\n```\r\n\r\n### File\r\n\r\n```ts\r\nexport interface File {\r\n  // The size of the uploaded file in bytes.\r\n  // If the file is still being uploaded (see `'fileBegin'` event),\r\n  // this property says how many bytes of the file have been written to disk yet.\r\n  file.size: number;\r\n\r\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\r\n  // case you are unhappy with the way formidable generates a temporary path for your files.\r\n  file.filepath: string;\r\n\r\n  // The name this file had according to the uploading client.\r\n  file.originalFilename: string | null;\r\n  \r\n  // calculated based on options provided\r\n  file.newFilename: string | null;\r\n\r\n  // The mime type of this file, according to the uploading client.\r\n  file.mimetype: string | null;\r\n\r\n  // A Date object (or `null`) containing the time this file was last written to.\r\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\r\n  file.mtime: Date | null;\r\n\r\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\r\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\r\n  file.hash: string | object | null;\r\n}\r\n```\r\n\r\n#### file.toJSON()\r\n\r\nThis method returns a JSON-representation of the file, allowing you to\r\n`JSON.stringify()` the file which is useful for logging and responding to\r\nrequests.\r\n\r\n### Events\r\n\r\n#### `'progress'`\r\n\r\nEmitted after each incoming chunk of data that has been parsed. Can be used to\r\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\r\n\r\n```js\r\nform.on('progress', (bytesReceived, bytesExpected) => {});\r\n```\r\n\r\n#### `'field'`\r\n\r\nEmitted whenever a field / value pair has been received.\r\n\r\n```js\r\nform.on('field', (name, value) => {});\r\n```\r\n\r\n#### `'fileBegin'`\r\n\r\nEmitted whenever a new file is detected in the upload stream. Use this event if\r\nyou want to stream the file to somewhere else while buffering the upload on the\r\nfile system.\r\n\r\n```js\r\nform.on('fileBegin', (formName, file) => {\r\n    // accessible here \r\n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\r\n    // file.originalFilename http filename or null if there was a parsing error\r\n    // file.newFilename generated hexoid or what options.filename returned\r\n    // file.filepath default pathnme as per options.uploadDir and options.filename\r\n    // file.filepath = CUSTOM_PATH // to change the final path\r\n});\r\n```\r\n\r\n#### `'file'`\r\n\r\nEmitted whenever a field / file pair has been received. `file` is an instance of\r\n`File`.\r\n\r\n```js\r\nform.on('file', (formname, file) => {\r\n    // same as fileBegin, except\r\n    // it is too late to change file.filepath\r\n    // file.hash is available if options.hash was used\r\n});\r\n```\r\n\r\n#### `'error'`\r\n\r\nEmitted when there is an error processing the incoming form. A request that\r\nexperiences an error is automatically paused, you will have to manually call\r\n`request.resume()` if you want the request to continue firing `'data'` events.\r\n\r\nMay have `error.httpCode` and `error.code` attached.\r\n\r\n```js\r\nform.on('error', (err) => {});\r\n```\r\n\r\n#### `'aborted'`\r\n\r\nEmitted when the request was aborted by the user. Right now this can be due to a\r\n'timeout' or 'close' event on the socket. After this event is emitted, an\r\n`error` event will follow. In the future there will be a separate 'timeout'\r\nevent (needs a change in the node core).\r\n\r\n```js\r\nform.on('aborted', () => {});\r\n```\r\n\r\n#### `'end'`\r\n\r\nEmitted when the entire request has been received, and all contained files have\r\nfinished flushing to disk. This is a great place for you to send your response.\r\n\r\n```js\r\nform.on('end', () => {});\r\n```\r\n\r\n\r\n### Helpers\r\n\r\n#### firstValues\r\n\r\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const exceptions = ['thisshouldbeanarray'];\r\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\r\n    // ...\r\n```\r\n\r\n#### readBooleans\r\n\r\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\r\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\r\n\r\n```js\r\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\r\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\r\n\r\n// ...\r\nform.parse(request, async (error, fieldsMultiple, files) => {\r\n    if (error) {\r\n        //...\r\n    }\r\n    const fieldsSingle = firstValues(form, fieldsMultiple);\r\n    \r\n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\r\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\r\n    // ...\r\n```\r\n\r\n## Changelog\r\n\r\n[./CHANGELOG.md](./CHANGELOG.md)\r\n\r\n## Ports & Credits\r\n\r\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\r\n  parser based on formidable\r\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\r\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\r\n  initial `multipart_parser.js`.\r\n\r\n## Contributing\r\n\r\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\r\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\r\na bug or add a new feature, please check our [Contributing\r\nGuide][contributing-url]. Pull requests are welcome!\r\n\r\nThanks goes to these wonderful people\r\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:START -->\r\n<!-- prettier-ignore-start -->\r\n<!-- markdownlint-disable -->\r\n<table>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\r\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\r\n  </tr>\r\n  <tr>\r\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\r\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\r\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- markdownlint-enable -->\r\n<!-- prettier-ignore-end -->\r\n\r\n<!-- ALL-CONTRIBUTORS-LIST:END -->\r\n\r\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\r\n\r\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\r\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\r\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\r\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\r\n\r\n## License\r\n\r\nFormidable is licensed under the [MIT License][license-url].\r\n\r\n<!-- badges -->\r\n<!-- prettier-ignore-start -->\r\n\r\n[codestyle-url]: https://github.com/airbnb/javascript\r\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\r\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\r\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\r\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\r\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\r\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\r\n[npmv-url]: https://npmjs.com/package/formidable\r\n[license-img]: https://badgen.net/npm/license/formidable\r\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\r\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\r\n[chat-url]: https://gitter.im/node-formidable/Lobby\r\n[libera-manifesto-url]: https://liberamanifesto.com\r\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\r\n[renovateapp-url]: https://renovatebot.com\r\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\r\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\r\n[prs-welcome-url]: http://makeapullrequest.com\r\n[twitter-url]: https://twitter.com/3a1fcBx0\r\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\r\n\r\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\r\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\r\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\r\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\r\n\r\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\r\n\r\n[ccommits-url]: https://conventionalcommits.org/\r\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\r\n\r\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\r\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\r\n\r\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\r\n\r\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\r\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\r\n\r\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\r\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\r\n\r\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\r\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\r\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\r\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\r\n<!-- prettier-ignore-end -->\r\n","readmeFilename":"README.md","gitHead":"8e99cfb31e6b0cf1eee96b84007eaaf2fe8528f4","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.2.5","_nodeVersion":"18.0.0","_npmVersion":"8.5.5","dist":{"integrity":"sha512-GRGDJTWAZ3H+umZbF2bKcqjsTov25zgon1St05ziKdiSw3kxvI+meMJrXx3ylRmuSADOpviSakBuS4yvGCGnSg==","shasum":"95d6e0b0110c5e6f31ef5be4b0bd2d0791fd9232","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.2.5.tgz","fileCount":22,"unpackedSize":91452,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICL5tAYX5gGlypCTRnh6z/5K6Nr48yqLznbvRtnCEyK/AiAqlVAImb1i1ntxcNVRVVX9pZOSILadStOO42DpqZAeXw=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjPD6YACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqpqA//dktcK9T8poSUXZf9TseL37BPFiZsu5RrMHdhgoEQRqQqpm4G\r\nyEmhcuHLNGL/CMYN63K4oHwm2AJA3WFkCSXvGbMrnP2YhGEJEk4POaeTvq1S\r\n5Os0tkBY3ftkMbD39xOEsDRoD9iwVJms0Ue6g5GEkoByNdVBKA3IS2lFuYBm\r\nZyX+LTLTBrsvWH9G/k8dXBjtrJGQ4kqa7cTsiHWLSotL7ipGpbeOohB7Thv4\r\nsMJAhPa3nZjtA1vv/osDURO2tjKc09f7gtrmCVCSSs1Xut0S5XpSG3R+swdo\r\nE4jnvEDyDoISrcKaWuS/V+Io0OVH7w/1Y3NA+WaR0WPU4DgVB9+qQGJrNcrp\r\n+NDkZnkOsyDpVNILvXdDF5kjBu0pXBDYemVZ0u+KEGZjAVPWGm8bPXIl6kFw\r\nS81oKX9s4DweQWsVsjNRU+u+QoAQ17+13WppQyzMQuuDY78mBsJ/DPOORPba\r\nU3xrxu/4SYtWo3ps8/Ij+Mkmr5U6j/5Nd9w8309n1ca0w/5UhJss65Z3bDMe\r\nANc4n+yUNIqMD5SKYIrAqV3Y8mgrc2DrrHBee1lxGEBWBwDaxLW3GT6NgD2I\r\nZkrUL5rySqkfwOPdh2K0LsqmR2waC6pArvdFrd0xr2lw4tkvEzsbfZyrgu03\r\nIGkyIADrvNZwRcf6HhcDs7fIs+NxNEs27BU=\r\n=Pcq6\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.2.5_1664892567619_0.08786003995462632"},"_hasShrinkwrap":false},"2.1.0":{"name":"formidable","version":"2.1.0","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"v2-latest"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"jest --coverage","pretest:ci":"yarn run pretest","test:ci":"nyc jest --coverage","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0","qs":"^6.11.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2"},"jest":{"verbose":true},"keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Project Status: Maintained\n\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (optional, see\n  [`options.fileWriteStreamHandler`](#options))\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\n\n```sh\n# v2\nnpm install formidable\nnpm install formidable@latest\nnpm install formidable@v2\n\n# or v3\nnpm install formidable@v3\n```\n\n_**Note:** In near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will continue to be published on `canary` dist-tag._\n\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nconst http = require('http');\nconst formidable = require('formidable');\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({ multiples: true });\n\n    form.parse(req, (err, fields, files) => {\n      if (err) {\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\n        res.end(String(err));\n        return;\n      }\n      res.writeHead(200, { 'Content-Type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'Content-Type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nconst express = require('express');\nconst formidable = require('formidable');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({ multiples: true });\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nconst Koa = require('koa');\nconst formidable = require('formidable');\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({ multiples: true });\n\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\n(the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`.\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\n  files\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\n  uploaded file.\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\n  default writes to host machine file system every file parsed; The function\n  should return an instance of a\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\n  that will receive the uploaded file data. With this option, you can have any\n  custom behavior regarding where the uploaded file data will be streamed for.\n  If you are looking to write the file uploaded in other types of cloud storages\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\n  this is the option you're looking for. When this option is defined the default\n  behavior of writing the file in the host machine file system is lost.\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n- `options.filename` **{function}** - default `undefined` Use it to control\n  newFilename. Must return a string. Will be joined with options.uploadDir.\n\n- `options.filter` **{function}** - default function that always returns true.\n  Use it to filter files before they are uploaded. Must return a boolean.\n\n\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\n\n**Note:** use an outside variable to cancel all uploads upon the first error \n\n```js\nconst options = {\n  filter: function ({name, originalFilename, mimetype}) {\n    // keep only images\n    return mimetype && mimetype.includes(\"image\");\n  }\n};\n```\n\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nAbout `uploadDir`, given the following directory structure \n```\nproject-name\n├── src\n│   └── server.js\n│       \n└── uploads\n    └── image.jpg\n```\n\n`__dirname` would be the same directory as the source file itself (src)\n\n\n```js\n `${__dirname}/../uploads`\n```\n\nto put files in uploads.\n\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\n\n\n`null` will use default which is `os.tmpdir()`\n\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\n\n```js\nimport {createNecessaryDirectoriesSync} from \"filesac\";\n\n\nconst uploadPath = `${__dirname}/../uploads`;\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\n```\n\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (formname, file) => {\n  form.emit('data', { name: 'fileBegin', formname, value: file });\n});\n\nform.on('file', (formname, file) => {\n  form.emit('data', { name: 'file', formname, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', formname, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', formname, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hashAlgorithm: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) => {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function (part) {\n  // let formidable handle only non-file parts\n  if (part.originalFilename === '' || !part.mimetype) {\n    // used internally, please do not override!\n    form._handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.filepath: string;\n\n  // The name this file had according to the uploading client.\n  file.originalFilename: string | null;\n  \n  // calculated based on options provided\n  file.newFilename: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.mimetype: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.mtime: Date | null;\n\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\n  file.hash: string | object | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (formName, file) => {\n    // accessible here \n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\n    // file.originalFilename http filename or null if there was a parsing error\n    // file.newFilename generated hexoid or what options.filename returned\n    // file.filepath default pathnme as per options.uploadDir and options.filename\n    // file.filepath = CUSTOM_PATH // to change the final path\n});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (formname, file) => {\n    // same as fileBegin, except\n    // it is too late to change file.filepath\n    // file.hash is available if options.hash was used\n});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\nMay have `error.httpCode` and `error.code` attached.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Changelog\n\n[./CHANGELOG.md](./CHANGELOG.md)\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our [Contributing\nGuide][contributing-url]. Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\n\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/3a1fcBx0\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"0dce808122f0f104f5e5026104617641ffc518fd","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.1.0","_nodeVersion":"14.21.1","_npmVersion":"6.14.17","dist":{"integrity":"sha512-LeOnORDEghDydYqMps8nEQz8YAd2zXI/5tQrzQUAbTSVadf2ilYmG8Epbt63Y7QdC9ZljJ27KiIEXesVYlAtHw==","shasum":"dcd4c66a5ceaaef9680cd5a381ecec9b8f4d7f60","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.1.0.tgz","fileCount":21,"unpackedSize":94710,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHALxkumOqrXt7fTRHHYU6fNrDsYjHkyFcAvhm84vf5ZAiBXEjfxuCqaQk2oXt/m8nyAgcDasLeoMYJah+2qhjnhbQ=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjiPBpACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrU5w//RG3ciEz5qVj7ekx3BtpWMuwX/3ZcudFr7AxHQLW/Tw6F++nh\r\nxS7Xo0PJLy6fHctQaEizE67hKMpffO152tuBweQ64UWPqkfNgVjynyi2z/yX\r\nMCuLysXsdps7at15tWm9kgPRQmcRj8R4Vz8F1pyUqtqnA7mrb7SnlgwmDJg8\r\nvC4qVP0ky4cAvUXFgapZ7Wo9WMuSs9VCZXzm1I9Is3fGCCFFg4x3/YQ4EDck\r\nR1rRd4+k+vVRzMTGjTVEXsaohXV6dumOfcFsoH0Hf2obwr15Sb8b1vKKoyJs\r\nSPbUa3Wtbl/j94MSH6oB1XXel/z8UpsIV/P18q94T7C1XxeJVrjzK1VtpwOH\r\npGocHUvn8ba0MLpIrosaVQM1US44C60tcLBD3qV9pKQCqxEcm+Rmfi5qZM2C\r\nePwBu9dDkMBzj+bZfrTJzK+Gbo5/URReW+7CDKLj26aC4Lr3xYe/On6Hb3Dj\r\np0d8a8KXKoxd+lOpPgwxZTxIGSH3mCy+2+U4mScfA8iKKWJVFBADpSDiU8RN\r\n5ko53WBTxtX+mN0Vfa4zdFXypDm5v7cT8pYLsU/SW7Fue7xhHoB2swzcczgM\r\ngGzhp0UIA4dBu/EdSNumL7qJbN0TMEQ6eWjCge7QwmgQ32XaGN4B8ZgBhYuK\r\nkcfNA8okdZ5sA6vRiOa4j2Q48Wj2+h+N4oM=\r\n=u85m\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.1.0_1669918825163_0.7348511488728735"},"_hasShrinkwrap":false},"2.1.1":{"name":"formidable","version":"2.1.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"latest"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"jest --coverage","pretest:ci":"yarn run pretest","test:ci":"nyc jest --coverage","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0","qs":"^6.11.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2"},"jest":{"verbose":true},"keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"gitHead":"bbf3e8b17e2e5662087749a51b570894bef3647e","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.1.1","_nodeVersion":"14.21.1","_npmVersion":"6.14.17","dist":{"integrity":"sha512-0EcS9wCFEzLvfiks7omJ+SiYJAiD+TzK4Pcw1UlUoGnhUxDcMKjt0P7x8wEb0u6OHu8Nb98WG3nxtlF5C7bvUQ==","shasum":"81269cbea1a613240049f5f61a9d97731517414f","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.1.1.tgz","fileCount":21,"unpackedSize":94707,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICQOBjUWi6X3X2v+x/hgeR25oic1iFN3zdNanxCch63UAiAb5uOZtyXBjs+PLWZhQqAt+ztPKG4aB2NcI4q/vDHTIw=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjiPJiACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqNKhAAg1hSXoHwrgkC6UNN2laZcJiLAzK1yxNf1Cd6t8kJwqIxhXCQ\r\nYj4/CnbyaSmYUiskumOAa4zH+1p+Uf6nwPP14V1rDyaAigMWU1zaWvPmEpVR\r\n5IGJonQtTFI7TDHZW/95mWUhT5+54t1IlOQC4LV1yjKHu2+Zl7c4rvU0hycQ\r\nVVpiEJHH6J8V+Kt1CeXxu+z+nEkyZGQM+eoLGRzYyG1dH9uMX2eQkY+FyLsr\r\nO8Z6yXtTux6+s39mkd6VWKOyv4OnTfJJWKK7AIzNQa6aTJjNr18nGuKJLNLm\r\ngt5Xlxth1BS20lM0gCqHpBkn4ofR5XL6x2CqpPvcasgiZ6uLMhiKn0TUYjrQ\r\nGJ6qTtZ32WPC/HUBqilXnuBN7VfyWnFAU0e6xSW/rsBGxM3ubnr+yV69I40w\r\nhWARu6Z4dih7o4BsWJ6zDvT2YjKtmHIgnNGyZC1s3/FsEHdLtKLcEbuuss6l\r\nU1yx82Amf2NThIMLMU5yIfvm03Vp1CDuKuWD8DtBMvqC67WbG44PizKf2M9+\r\nOXT4KHAJrEh8qt9lryE+IhaDOj1McaWn1Oaf2SdwYn6ckIPtUT/UY7gKqeii\r\nUORGA6DVdS8jqBVnC0TauqC02evs4ZbZK/iVDk+L7PltMBFufHhp9LglK+LI\r\nMLbFDmjpSlGknXYO6+0hMVivZpEAuSjV81Q=\r\n=2aYe\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.1.1_1669919330523_0.6315602254896326"},"_hasShrinkwrap":false},"2.1.2":{"name":"formidable","version":"2.1.2","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"main":"./src/index.js","publishConfig":{"access":"public","tag":"v2-latest"},"scripts":{"bench":"node benchmark","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"jest --coverage","pretest:ci":"yarn run pretest","test:ci":"nyc jest --coverage","test:jest":"jest --coverage"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0","qs":"^6.11.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","husky":"4.2.5","jest":"25.4.0","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.0.1","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","request":"2.88.2","supertest":"4.0.2"},"jest":{"verbose":true},"keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subcsription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Project Status: Maintained\n\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (optional, see\n  [`options.fileWriteStreamHandler`](#options))\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\n\n```sh\n# v2\nnpm install formidable\nnpm install formidable@latest\nnpm install formidable@v2\n\n# or v3\nnpm install formidable@v3\n```\n\n_**Note:** In near future v3 will be published on the `latest` NPM dist-tag. Future not ready releases will continue to be published on `canary` dist-tag._\n\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nconst http = require('http');\nconst formidable = require('formidable');\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({ multiples: true });\n\n    form.parse(req, (err, fields, files) => {\n      if (err) {\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\n        res.end(String(err));\n        return;\n      }\n      res.writeHead(200, { 'Content-Type': 'application/json' });\n      res.end(JSON.stringify({ fields, files }, null, 2));\n    });\n\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'Content-Type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nconst express = require('express');\nconst formidable = require('formidable');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({ multiples: true });\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nconst Koa = require('koa');\nconst formidable = require('formidable');\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({ multiples: true });\n\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nconst formidable = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { formidable } = require('formidable');\nconst form = formidable(options);\n\n// or\nconst { IncomingForm } = require('formidable');\nconst form = new IncomingForm(options);\n\n// or\nconst { Formidable } = require('formidable');\nconst form = new Formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\n(the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`.\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.allowEmptyFiles` **{boolean}** - default `true`; allow upload empty\n  files\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\n  uploaded file.\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of uploaded file.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set 0 for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\n  default writes to host machine file system every file parsed; The function\n  should return an instance of a\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\n  that will receive the uploaded file data. With this option, you can have any\n  custom behavior regarding where the uploaded file data will be streamed for.\n  If you are looking to write the file uploaded in other types of cloud storages\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\n  this is the option you're looking for. When this option is defined the default\n  behavior of writing the file in the host machine file system is lost.\n- `options.multiples` **{boolean}** - default `false`; when you call the\n  `.parse` method, the `files` argument (of the callback) will contain arrays of\n  files for inputs which submit multiple files using the HTML5 `multiple`\n  attribute. Also, the `fields` argument will contain arrays of values for\n  fields that have names ending with '[]'.\n- `options.filename` **{function}** - default `undefined` Use it to control\n  newFilename. Must return a string. Will be joined with options.uploadDir.\n\n- `options.filter` **{function}** - default function that always returns true.\n  Use it to filter files before they are uploaded. Must return a boolean.\n\n\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\n\n**Note:** use an outside variable to cancel all uploads upon the first error \n\n```js\nconst options = {\n  filter: function ({name, originalFilename, mimetype}) {\n    // keep only images\n    return mimetype && mimetype.includes(\"image\");\n  }\n};\n```\n\n\n### .parse(request, callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is\nprovided, all fields and files are collected and passed to the callback.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ multiples: true, uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nAbout `uploadDir`, given the following directory structure \n```\nproject-name\n├── src\n│   └── server.js\n│       \n└── uploads\n    └── image.jpg\n```\n\n`__dirname` would be the same directory as the source file itself (src)\n\n\n```js\n `${__dirname}/../uploads`\n```\n\nto put files in uploads.\n\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\n\n\n`null` will use default which is `os.tmpdir()`\n\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\n\n```js\nimport {createNecessaryDirectoriesSync} from \"filesac\";\n\n\nconst uploadPath = `${__dirname}/../uploads`;\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\n```\n\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (formname, file) => {\n  form.emit('data', { name: 'fileBegin', formname, value: file });\n});\n\nform.on('file', (formname, file) => {\n  form.emit('data', { name: 'file', formname, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', formname, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', formname, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which esentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst formidable = require('formidable');\n\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nconst { Formidable } = require('formidable');\n\nconst form = new Formidable({\n  hashAlgorithm: 'sha1',\n  enabledPlugins: ['octetstream', 'querystring', 'json'],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) => {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function (part) {\n  // let formidable handle only non-file parts\n  if (part.originalFilename === '' || !part.mimetype) {\n    // used internally, please do not override!\n    form._handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.filepath: string;\n\n  // The name this file had according to the uploading client.\n  file.originalFilename: string | null;\n  \n  // calculated based on options provided\n  file.newFilename: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.mimetype: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.mtime: Date | null;\n\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\n  file.hash: string | object | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar.\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (formName, file) => {\n    // accessible here \n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\n    // file.originalFilename http filename or null if there was a parsing error\n    // file.newFilename generated hexoid or what options.filename returned\n    // file.filepath default pathnme as per options.uploadDir and options.filename\n    // file.filepath = CUSTOM_PATH // to change the final path\n});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (formname, file) => {\n    // same as fileBegin, except\n    // it is too late to change file.filepath\n    // file.hash is available if options.hash was used\n});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\nMay have `error.httpCode` and `error.code` attached.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n## Changelog\n\n[./CHANGELOG.md](./CHANGELOG.md)\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our [Contributing\nGuide][contributing-url]. Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\n\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/3a1fcBx0\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","readmeFilename":"README.md","gitHead":"bbf3e8b17e2e5662087749a51b570894bef3647e","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@2.1.2","_nodeVersion":"14.21.1","_npmVersion":"6.14.17","dist":{"integrity":"sha512-CM3GuJ57US06mlpQ47YcunuUZ9jpm8Vx+P2CGt2j7HpgkKZO/DJYQ0Bobim8G6PFQmK5lOqOOdUXboU+h73A4g==","shasum":"fa973a2bec150e4ce7cac15589d7a25fc30ebd89","tarball":"https://registry.npmjs.org/formidable/-/formidable-2.1.2.tgz","fileCount":21,"unpackedSize":94710,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDSIjyNm8Fz2xBA+BJnsSyJfjLcOsRNIbSV+UapbaMiPAIhAJOBrDtsIOSCqALuPpAteomljJx86Y14UiWSvVnnWGUi"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjiPK0ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqvpQ//cGPrcMWHmTR4ayFKv1CA5BN4BajOagTrXbX2hjlGMG78vznW\r\nuopWIWJqGdeV841f8QR3uQ8MJpuqqVuq0iEiYggr2jRqsXy8xjRXykp1DJ+6\r\nCour+zptI6HTjZ8dndPPYRPoPG9ssXsfngL0TEPZPS0mIdDEg7gG71tPUHGm\r\nOCcMfVNipa5ZW7KGR/vR9hyCQNria6SiuK+6k8sAWs8/jh6nxPPN+UfeAVEi\r\nljKkAvPCh3way6mb2S5JN0OuJ44+jDPTim0Rr3ZcPw2h8Fa+bdDhFDbX+Dcz\r\nDpqC4TnjnDDsu2yQHfeOAm6loeRsUH6WGvm9q3Mx6/cHR2svuSVUUMqp6GzK\r\nFcllMc0U8M1YNTBTDzJUzhhIL/QBCqcvdmCRzs9JpKHEc64Gr6gZCRUmwWWi\r\nLAvBEWPmJezTLupxeLX+rlknXWKgHD90M1c+LYW0rSa0nVvtbdu0T6y9iE5v\r\n5xFB2RkN+TzDE9JbMdRNR1pcNeGtpGU9WybQ4XDB6l1pv0oTwv2CC1EII1VM\r\nhJhPa4+zeFe7VaZfERhp5X2XvjHBvWzvb9l1XeJSf9UMuM4Qpq6A4Ww7VDJe\r\nH/qFSd0bRZoCwIipivvkvFnuYTwkTIstwUTpnFypPj8F7X71AhP8w9RXEDx3\r\nZXsz/BIvy2v64RzQa+v7HmuU/WP/LY1os1o=\r\n=frXY\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_2.1.2_1669919412527_0.770394467379661"},"_hasShrinkwrap":false},"3.3.2":{"name":"formidable","version":"3.3.2","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"latest"},"scripts":{"bench":"node benchmark","bench2prep":"node benchmark/server.js","bench2":"bombardier --body-file=\"./README.md\" --method=POST --duration=10s --connections=100 http://localhost:3000/api/upload","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"npm run test-jest && npm run test-node","test-jest":"node --experimental-vm-modules ./node_modules/jest/bin/jest.js --testPathPattern=test/ --coverage","test-node":"node --test test-node/","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --testPathPattern=test/ --coverage && node --experimental-vm-modules node_modules/.bin/nyc node --test test-node/"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@sindresorhus/slugify":"^2.1.0","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"gitHead":"c2499229318dd22ae5bc65bd8c4eb384c3e9a841","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.3.2","_nodeVersion":"19.8.1","_npmVersion":"8.5.5","dist":{"integrity":"sha512-LE2iX+Sen7q0BeeXO/ZSD9WOP7IDXpU77lzqA15ZMmd2w//80VzwW8+eO/awHxlznYFocPzPj/NdcxV513CaNg==","shasum":"41db09520b0fc4a147a6f8b77d4667e43ec3b7ee","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.3.2.tgz","fileCount":22,"unpackedSize":93933,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDBXz0e1hPFvmCr7CiqopdPLRok6A7gCTEsrPSYPSK+JgIhAPf9lwKG3GFdpJL1wyE9Wq1kR1dxWLEGquvfxOj+7Y9z"}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.3.2_1686913977870_0.40953461191984974"},"_hasShrinkwrap":false},"3.4.0":{"name":"formidable","version":"3.4.0","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./src/index.js","publishConfig":{"access":"public","tag":"latest"},"scripts":{"bench":"node benchmark","bench2prep":"node benchmark/server.js","bench2":"bombardier --body-file=\"./README.md\" --method=POST --duration=10s --connections=100 http://localhost:3000/api/upload","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test":"npm run test-jest && npm run test-node","test-jest":"node --experimental-vm-modules ./node_modules/jest/bin/jest.js --testPathPattern=test/ --coverage","test-node":"node --test test-node/","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --testPathPattern=test/ --coverage && node --experimental-vm-modules node_modules/.bin/nyc node --test test-node/"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@sindresorhus/slugify":"^2.1.0","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"gitHead":"e4f29e726e12db7dd948b2302139fb202ad69b34","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.4.0","_nodeVersion":"19.8.1","_npmVersion":"8.5.5","dist":{"integrity":"sha512-jVj65eK/bVBpImERgvY64oLf2yP7YKsyGj/u0P25k58G8B1SmpCLmAbh0Gld3J92M7J6oX5H1KnJJM8iDYiUtQ==","shasum":"8ffc50dabdae819f0e9ea720dfc425f5edca046d","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.4.0.tgz","fileCount":22,"unpackedSize":94429,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCU0VO5SDH81xeVK2P5tb8kL1qR/A8cyTnHqxM0IXGdogIhAOUB6fOahxIcP6Rpp2zixjpyJCVOxyTAZSG8xfbQvnY1"}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.4.0_1686989286808_0.5127303313896241"},"_hasShrinkwrap":false},"3.5.0":{"name":"formidable","version":"3.5.0","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./dist/index.cjs","exports":{".":{"import":{"default":"./src/index.js"},"require":{"default":"./dist/index.cjs"},"default":"./dist/index.cjs"},"./src/helpers/*.js":{"import":{"default":"./src/helpers/*.js"},"require":{"default":"./dist/helpers/*.cjs"}},"./src/parsers/*.js":{"import":{"default":"./src/parsers/*.js"},"require":{"default":"./dist/index.cjs"}}},"publishConfig":{"access":"public","tag":"latest"},"scripts":{"build-package":"rollup --config ./tool/rollup.config.js","prepublishOnly":"npm run build-package","bench":"node benchmark","bench2prep":"node benchmark/server.js","bench2":"bombardier --body-file=\"./README.md\" --method=POST --duration=10s --connections=100 http://localhost:3000/api/upload","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test-specific":"node --experimental-vm-modules ./node_modules/jest/bin/jest.js --testPathPattern=test/standalone/issue-46.test.js --detectOpenHandles","test":"npm run test-jest && npm run test-node","test-jest":"node --experimental-vm-modules ./node_modules/jest/bin/jest.js --testPathPattern=test/ --coverage --detectOpenHandles","test-node":"node --test test-node/","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --testPathPattern=test/ --coverage && node --experimental-vm-modules node_modules/.bin/nyc node --test test-node/"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@rollup/plugin-commonjs":"^25.0.2","@rollup/plugin-node-resolve":"^15.1.0","@sindresorhus/slugify":"^2.1.0","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","rollup":"^3.25.3","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"gitHead":"f3851e12c21c7d8e2f3e78c6c534dea7f4c5e706","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.5.0","_nodeVersion":"19.8.1","_npmVersion":"8.5.5","dist":{"integrity":"sha512-WwsMWvPmY+Kv37C3+KP3A+2Ym1aZoac4nz4ZEe5z0UPBoCg0O/wHay3eeYkZr4KJIbCzpSUeno+STMhde+KCfw==","shasum":"3605a9325130d05c550d57be8e81d1757baa12d6","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.5.0.tgz","fileCount":31,"unpackedSize":169454,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCID5cL6P0JpvoCYoGCybpKA1n5MquUU9bXDxj1jMlaoMsAiBYaRvTgRNyEU20160h6yfhojq6sg8VpP6cLtU2pMbgmg=="}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.5.0_1687990530659_0.8058785809609526"},"_hasShrinkwrap":false},"3.5.1":{"name":"formidable","version":"3.5.1","license":"MIT","description":"A node.js module for parsing form data, especially file uploads.","homepage":"https://github.com/node-formidable/formidable","funding":"https://ko-fi.com/tunnckoCore/commissions","repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"type":"module","main":"./dist/index.cjs","exports":{".":{"import":{"default":"./src/index.js"},"require":{"default":"./dist/index.cjs"},"default":"./dist/index.cjs"},"./src/helpers/*.js":{"import":{"default":"./src/helpers/*.js"},"require":{"default":"./dist/helpers/*.cjs"}},"./src/parsers/*.js":{"import":{"default":"./src/parsers/*.js"},"require":{"default":"./dist/index.cjs"}}},"publishConfig":{"access":"public","tag":"latest"},"scripts":{"build-package":"rollup --config ./tool/rollup.config.js","prepublishOnly":"npm run build-package","bench":"node benchmark","bench2prep":"node benchmark/server.js","bench2":"bombardier --body-file=\"./README.md\" --method=POST --duration=10s --connections=100 http://localhost:3000/api/upload","fmt":"yarn run fmt:prepare '**/*'","fmt:prepare":"prettier --write","lint":"yarn run lint:prepare .","lint:prepare":"eslint --cache --fix --quiet --format codeframe","reinstall":"del-cli ./node_modules ./yarn.lock","postreinstall":"yarn setup","setup":"yarn","pretest":"del-cli ./test/tmp && make-dir ./test/tmp","test-specific":"node --experimental-vm-modules ./node_modules/jest/bin/jest.js --testPathPattern=test/standalone/keep-alive-error.test.js","test":"npm run test-jest && npm run test-node","test-jest":"node --experimental-vm-modules ./node_modules/jest/bin/jest.js --testPathPattern=test/ --coverage","test-node":"node --test test-node/","pretest:ci":"yarn run pretest","test:ci":"node --experimental-vm-modules node_modules/.bin/nyc jest --testPathPattern=test/ --coverage && node --experimental-vm-modules node_modules/.bin/nyc node --test test-node/"},"dependencies":{"dezalgo":"^1.0.4","hexoid":"^1.0.0","once":"^1.4.0"},"devDependencies":{"@commitlint/cli":"8.3.5","@commitlint/config-conventional":"8.3.4","@rollup/plugin-commonjs":"^25.0.2","@rollup/plugin-node-resolve":"^15.1.0","@sindresorhus/slugify":"^2.1.0","@tunnckocore/prettier-config":"1.3.8","del-cli":"3.0.0","eslint":"6.8.0","eslint-config-airbnb-base":"14.1.0","eslint-config-prettier":"6.11.0","eslint-plugin-import":"2.20.2","eslint-plugin-prettier":"3.1.3","express":"4.17.1","formdata-polyfill":"^4.0.10","husky":"4.2.5","jest":"27.2.4","koa":"2.11.0","lint-staged":"10.2.7","make-dir-cli":"2.0.0","nyc":"15.1.0","prettier":"2.0.5","prettier-plugin-pkgjson":"0.2.8","rollup":"^3.25.3","supertest":"6.1.6"},"jest":{"verbose":true},"husky":{"hooks":{"pre-commit":"git status --porcelain && yarn lint-staged","commit-msg":"yarn commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"!*.{js,jsx,ts,tsx}":["yarn run fmt:prepare"],"*.{js,jsx,ts,tsx}":["yarn run lint"]},"renovate":{"extends":["@tunnckocore",":pinAllExceptPeerDependencies"]},"packageManager":"yarn@1.22.17","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"],"gitHead":"f1bf6f2d01d115ad4691c48d5590de451a8abd94","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"_id":"formidable@3.5.1","_nodeVersion":"20.0.0","_npmVersion":"9.6.4","dist":{"integrity":"sha512-WJWKelbRHN41m5dumb0/k8TeAx7Id/y3a+Z7QfhxP/htI9Js5zYaEDtG8uMgG0vM0lOlqnmjE99/kfpOYi/0Og==","shasum":"9360a23a656f261207868b1484624c4c8d06ee1a","tarball":"https://registry.npmjs.org/formidable/-/formidable-3.5.1.tgz","fileCount":30,"unpackedSize":165386,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCjnWl/W2XG/gDN28Pp0pTao8UYW3/CJcDcJY7fXFIouAIhAM7oAi7XtQMp4kaDfDlje5pVh5uBe2coJDOSnfLQrd4Z"}]},"_npmUser":{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},"directories":{},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/formidable_3.5.1_1692973361887_0.75692713214251"},"_hasShrinkwrap":false}},"maintainers":[{"name":"felixge","email":"felix@debuggable.com"},{"name":"kornel","email":"npmspam@geekhood.net"},{"name":"grossacasacs","email":"cyril.walle@protonmail.com"},{"name":"tunnckocore","email":"npm@tunnckocore.anonaddy.com"},{"name":"quantumsheep","email":"nathanael.dmc@outlook.fr"}],"time":{"modified":"2023-11-07T05:01:29.341Z","created":"2011-01-18T21:38:52.010Z","0.3.0":"2011-01-18T21:38:52.010Z","0.4.0":"2011-01-18T21:38:52.010Z","0.5.0":"2011-01-18T21:38:52.010Z","0.6.0":"2011-01-18T21:38:52.010Z","0.7.0":"2011-01-18T21:38:52.010Z","0.8.0":"2011-01-18T21:38:52.010Z","0.9.0":"2011-01-18T21:38:52.010Z","0.9.1":"2011-01-18T21:38:52.010Z","0.9.2":"2011-01-18T21:38:52.010Z","0.9.3":"2011-01-18T21:38:52.010Z","0.9.4":"2011-01-18T21:38:52.010Z","0.9.5":"2011-01-18T21:38:52.010Z","0.9.6":"2011-01-18T21:38:52.010Z","0.9.7":"2011-01-18T21:38:52.010Z","0.9.8":"2011-01-18T21:38:52.010Z","0.9.9":"2011-01-18T21:38:52.010Z","0.9.10":"2011-01-18T21:38:52.010Z","0.9.11":"2011-01-18T21:38:52.010Z","1.0.0":"2011-04-13T20:44:27.943Z","1.0.1":"2011-04-27T12:08:45.419Z","1.0.2":"2011-05-23T10:10:50.452Z","1.0.3":"2011-09-10T22:32:10.344Z","1.0.4":"2011-09-15T21:53:54.455Z","1.0.5":"2011-09-16T19:48:47.627Z","1.0.6":"2011-09-21T06:17:40.012Z","1.0.7":"2011-11-04T09:28:17.232Z","1.0.8":"2011-11-29T07:56:38.907Z","1.0.9":"2012-03-08T10:44:43.803Z","1.0.10":"2012-06-03T20:18:59.345Z","1.0.11":"2012-06-04T10:16:26.223Z","1.0.12":"2013-02-21T14:28:48.523Z","1.0.13":"2013-03-16T19:41:26.120Z","1.0.14":"2013-05-02T21:10:20.666Z","1.0.15":"2014-06-17T11:19:21.607Z","1.0.16":"2014-12-18T10:22:52.035Z","1.0.17":"2015-02-12T08:44:50.814Z","1.1.1":"2017-01-15T21:10:51.229Z","1.2.0":"2018-03-07T13:11:31.806Z","1.2.1":"2018-03-20T15:30:05.677Z","2.0.0-canary.20200129.2":"2020-01-29T04:11:46.502Z","2.0.0-canary.20200129.3":"2020-01-29T04:43:01.893Z","2.0.0-canary.20200129.4":"2020-01-29T04:53:39.430Z","2.0.0-canary.20200129.5":"2020-01-29T05:57:54.479Z","2.0.0-canary.20200129.10":"2020-01-29T17:39:05.156Z","2.0.0-canary.20200129.32":"2020-01-29T18:33:52.093Z","2.0.0-dev.20200130.1":"2020-01-30T01:15:59.017Z","2.0.0-canary.20200131.1":"2020-01-31T08:50:23.406Z","2.0.0-dev.20200131.2":"2020-01-31T09:15:48.744Z","2.0.0-canary.20200212.1":"2020-02-12T13:43:34.842Z","1.2.2":"2020-02-25T15:08:09.762Z","2.0.0-canary.20200226.1":"2020-02-26T21:53:26.311Z","2.0.0-canary.20200402.1":"2020-04-02T11:17:02.935Z","2.0.0-canary.20200402.2":"2020-04-02T13:25:24.864Z","2.0.0-canary.20200504.1":"2020-05-04T20:09:10.214Z","2.0.0-canary.20210330":"2021-10-30T12:22:16.563Z","3.1.1-canary.20211030":"2021-10-30T12:26:34.654Z","1.2.3":"2021-10-30T12:58:11.023Z","1.2.4":"2021-10-30T16:13:42.857Z","2.0.0":"2021-10-30T16:17:26.227Z","3.1.2-canary.20211030":"2021-10-30T16:48:34.888Z","3.1.3":"2021-10-30T20:06:51.554Z","2.0.1":"2021-10-30T20:14:52.617Z","1.2.5":"2021-10-30T20:31:37.361Z","1.2.6":"2021-10-30T20:35:32.637Z","3.1.4":"2021-11-30T15:28:01.807Z","3.1.5":"2021-12-06T21:46:44.002Z","3.2.0":"2021-12-09T14:15:01.367Z","3.2.1":"2021-12-12T12:19:52.607Z","3.2.3":"2022-04-26T16:32:30.533Z","3.2.4":"2022-05-19T10:15:09.497Z","3.2.5":"2022-10-04T14:09:28.023Z","2.1.0":"2022-12-01T18:20:25.406Z","2.1.1":"2022-12-01T18:28:50.688Z","2.1.2":"2022-12-01T18:30:12.769Z","3.3.2":"2023-06-16T11:12:58.078Z","3.4.0":"2023-06-17T08:08:07.000Z","3.5.0":"2023-06-28T22:15:30.945Z","3.5.1":"2023-08-25T14:22:42.087Z"},"description":"A node.js module for parsing form data, especially file uploads.","users":{"291296283":true,"1062922605":true,"tjholowaychuk":true,"naholyr":true,"guybrush":true,"yazgazan":true,"tellnes":true,"fgribreau":true,"pid":true,"m42am":true,"likeyn":true,"luk":true,"leesei":true,"dubban":true,"eins78":true,"joliva":true,"doliveira":true,"claveren":true,"kerimdzhanov":true,"aminrx":true,"cilindrox":true,"huangjia86":true,"leodutra":true,"evkline":true,"micnic":true,"redbe4rd":true,"summer":true,"humantriangle":true,"cosebe":true,"jbdoumenjou":true,"shen-weizhong":true,"roryrjb":true,"sunrising":true,"josephdavisco":true,"old9":true,"adamlu":true,"gabeio":true,"richardleggett":true,"tsangint":true,"timtones":true,"hellboy81":true,"thebearingedge":true,"santosharakere":true,"cocopas":true,"tsavela":true,"adswebwork":true,"byossarian":true,"kkogovsek":true,"devlaundry":true,"dna2go":true,"ivangaravito":true,"voischev":true,"kogai":true,"satblip":true,"nunn":true,"gonzalofj":true,"dnero":true,"kikar":true,"ayoungh":true,"psantori":true,"marco.jahn":true,"kulakowka":true,"schnarald":true,"markthethomas":true,"manxisuo":true,"akiva":true,"labithiotis":true,"nickleefly":true,"staraple":true,"iamwiz":true,"moimikey":true,"dolymood":true,"brandonpapworth":true,"craneleeon":true,"luuhoangnam":true,"modao":true,"mofies":true,"nex":true,"liveinjs":true,"2dxgujun":true,"monkeymonk":true,"nickeltobias":true,"starknode":true,"lionft":true,"nketchum":true,"mjurincic":true,"inn0vative1":true,"n0w":true,"reecegoddard":true,"srbdev":true,"fotooo":true,"liushoukai":true,"igorissen":true,"tujiaw":true,"urbantumbleweed":true,"josejaguirre":true,"gfilip":true,"stany":true,"ziflex":true,"illustratordavid":true,"shadowlong":true,"vladkozlovski":true,"tobiasnickel":true,"xiechao06":true,"wangnan0610":true,"xngiser":true,"joneszhuchinagd":true,"lwgojustgo":true,"seuhkx":true,"iroc":true,"gerardogallegos":true,"psmorrow":true,"kankungyip":true,"monjer":true,"cslater":true,"lijinghust":true,"xinwangwang":true,"josemarjobs":true,"ghkddbguse":true,"a904616537":true,"sammok2003":true,"cdflove9426":true,"flynntsc":true,"kulis":true,"samlaudev":true,"wenbing":true,"zhenzhong":true,"takethefire":true,"ddkothari":true,"mate2":true,"jflagg":true,"evanzhang":true,"icerainnuaa":true,"zanner":true,"carlhong":true,"marcobiedermann":true,"tonyljl526":true,"hockor":true,"lhard":true,"ggomma":true,"djhojd":true,"iori20091101":true,"rsaa":true,"bigglesatlarge":true,"kistoryg":true,"mobeicaoyuan":true,"jmsherry":true,"mhaidarh":true,"godoshian":true,"lonjoy":true,"knoja4":true,"adamdreszer":true,"yuxuanjiang":true,"gui0704":true,"sammy_winchester":true,"adhamfarrag":true,"moling":true,"gc-z":true,"aj888907":true,"satoru":true,"papasavva":true,"linfeng9008":true,"ze25800000":true,"kbakba":true,"wintgp":true,"vonmauser":true,"rocket0191":true,"mife":true,"patrickbullion":true,"alvis":true,"guoooofu":true,"sadmansamee":true,"tomchao":true,"xiachengcn":true,"kodekracker":true,"shiweiping":true,"alien":true,"guojikai":true,"shuoshubao":true,"adv30":true,"wqhash":true,"timeh":true,"nuer":true,"xiaoyiyu":true,"machinabio":true,"lwk":true,"jiayihongy":true,"cocoayog":true,"yokiijay":true,"xtx1130":true,"wozhizui":true,"vb078":true,"alanzhang001":true,"zerouikit":true,"lx70770":true,"hexcola":true,"wayn":true,"fonteyn":true,"poryoung":true,"abhijitkalta":true,"actionklo":true,"xiaoyangyangly":true,"jeriming":true,"lucasbonvin":true,"bartmao":true,"n0f3":true,"superchenney":true,"enhezzz":true,"yl2014":true,"xfloops":true,"maxwelldu":true,"chenyingxuan1996":true,"strugglexiang":true,"tpkn":true,"remixone":true,"hua-sc":true,"chirag8642":true,"hanhq":true,"edwardxyt":true,"allen_lyu":true,"npmzlj":true,"yichan":true,"mrhuangyuhui":true,"hai_name":true,"71emj1":true,"gqxqd":true,"mdedirudianto":true,"jackchendong":true,"kamikadze4game":true,"fouad.nashat":true,"he313572052":true,"tzedakischaridimos":true,"zwwggg":true,"rparris":true,"diogocapela":true,"annapolis":true,"cfleschhut":true,"technolojay":true,"bouncing-bison":true,"aditya_1806":true},"repository":{"type":"git","url":"git+https://github.com/node-formidable/formidable.git"},"readme":"<p align=\"center\">\n  <img alt=\"npm formidable package logo\" src=\"https://raw.githubusercontent.com/node-formidable/formidable/master/logo.png\" />\n</p>\n\n# formidable [![npm version][npmv-img]][npmv-url] [![MIT license][license-img]][license-url] [![Libera Manifesto][libera-manifesto-img]][libera-manifesto-url] [![Twitter][twitter-img]][twitter-url]\n\n> A Node.js module for parsing form data, especially file uploads.\n\n[![Code style][codestyle-img]][codestyle-url]\n[![codecoverage][codecov-img]][codecov-url]\n[![linux build status][linux-build-img]][build-url]\n[![windows build status][windows-build-img]][build-url]\n[![macos build status][macos-build-img]][build-url]\n\nIf you have any _how-to_ kind of questions, please read the [Contributing\nGuide][contributing-url] and [Code of Conduct][code_of_conduct-url]\ndocuments.<br /> For bugs reports and feature requests, [please create an\nissue][open-issue-url] or ping [@tunnckoCore / @3a1FcBx0](https://twitter.com/3a1FcBx0)\nat Twitter.\n\n[![Conventional Commits][ccommits-img]][ccommits-url]\n[![Minimum Required Nodejs][nodejs-img]][npmv-url]\n[![Tidelift Subscription][tidelift-img]][tidelift-url]\n[![Buy me a Kofi][kofi-img]][kofi-url]\n[![Renovate App Status][renovateapp-img]][renovateapp-url]\n[![Make A Pull Request][prs-welcome-img]][prs-welcome-url]\n\nThis project is [semantically versioned](https://semver.org) and available as\npart of the [Tidelift Subscription][tidelift-url] for professional grade\nassurances, enhanced support and security.\n[Learn more.](https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise)\n\n_The maintainers of `formidable` and thousands of other packages are working\nwith Tidelift to deliver commercial support and maintenance for the Open Source\ndependencies you use to build your applications. Save time, reduce risk, and\nimprove code health, while paying the maintainers of the exact dependencies you\nuse._\n\n[![][npm-weekly-img]][npmv-url] [![][npm-monthly-img]][npmv-url]\n[![][npm-yearly-img]][npmv-url] [![][npm-alltime-img]][npmv-url]\n\n## Project Status: Maintained\n\n_Check [VERSION NOTES](https://github.com/node-formidable/formidable/blob/master/VERSION_NOTES.md) for more information on v1, v2, and v3 plans, NPM dist-tags and branches._\n\nThis module was initially developed by\n[**@felixge**](https://github.com/felixge) for\n[Transloadit](http://transloadit.com/), a service focused on uploading and\nencoding images and videos. It has been battle-tested against hundreds of GBs of\nfile uploads from a large variety of clients and is considered production-ready\nand is used in production for years.\n\nCurrently, we are few maintainers trying to deal with it. :) More contributors\nare always welcome! :heart: Jump on\n[issue #412](https://github.com/felixge/node-formidable/issues/412) which is\nclosed, but if you are interested we can discuss it and add you after strict\nrules, like enabling Two-Factor Auth in your npm and GitHub accounts.\n\n## Highlights\n\n- [Fast (~900-2500 mb/sec)](#benchmarks) & streaming multipart parser\n- Automatically writing file uploads to disk (optional, see\n  [`options.fileWriteStreamHandler`](#options))\n- [Plugins API](#useplugin-plugin) - allowing custom parsers and plugins\n- Low memory footprint\n- Graceful error handling\n- Very high test coverage\n\n## Install\n\nThis package is a dual ESM/commonjs package.\n\nThis project requires `Node.js >= 10.13`. Install it using\n[yarn](https://yarnpkg.com) or [npm](https://npmjs.com).<br /> _We highly\nrecommend to use Yarn when you think to contribute to this project._\n\nThis is a low-level package, and if you're using a high-level framework it _may_\nalready be included. Check the examples below and the [examples/](https://github.com/node-formidable/formidable/tree/master/examples) folder.\n\n```\n# v2\nnpm install formidable@v2\n\n# v3\nnpm install formidable\nnpm install formidable@v3\n```\n\n_**Note:** Future not ready releases will be published on `*-next` dist-tags for the corresponding version._\n\n\n## Examples\n\nFor more examples look at the `examples/` directory.\n\n### with Node.js http module\n\nParse an incoming file upload, with the\n[Node.js's built-in `http` module](https://nodejs.org/api/http.html).\n\n```js\nimport http from 'node:http';\nimport formidable, {errors as formidableErrors} from 'formidable';\n\nconst server = http.createServer(async (req, res) => {\n  if (req.url === '/api/upload' && req.method.toLowerCase() === 'post') {\n    // parse a file upload\n    const form = formidable({});\n    let fields;\n    let files;\n    try {\n        [fields, files] = await form.parse(req);\n    } catch (err) {\n        // example to check for a very specific error\n        if (err.code === formidableErrors.maxFieldsExceeded) {\n\n        }\n        console.error(err);\n        res.writeHead(err.httpCode || 400, { 'Content-Type': 'text/plain' });\n        res.end(String(err));\n        return;\n    }\n    res.writeHead(200, { 'Content-Type': 'application/json' });\n    res.end(JSON.stringify({ fields, files }, null, 2));\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, { 'Content-Type': 'text/html' });\n  res.end(`\n    <h2>With Node.js <code>\"http\"</code> module</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"multipleFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\nserver.listen(8080, () => {\n  console.log('Server listening on http://localhost:8080/ ...');\n});\n```\n\n### with Express.js\n\nThere are multiple variants to do this, but Formidable just need Node.js Request\nstream, so something like the following example should work just fine, without\nany third-party [Express.js](https://ghub.now.sh/express) middleware.\n\nOr try the\n[examples/with-express.js](https://github.com/node-formidable/formidable/blob/master/examples/with-express.js)\n\n```js\nimport express from 'express';\nimport formidable from 'formidable';\n\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send(`\n    <h2>With <code>\"express\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n      <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n      <div>File: <input type=\"file\" name=\"someExpressFiles\" multiple=\"multiple\" /></div>\n      <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `);\n});\n\napp.post('/api/upload', (req, res, next) => {\n  const form = formidable({});\n\n  form.parse(req, (err, fields, files) => {\n    if (err) {\n      next(err);\n      return;\n    }\n    res.json({ fields, files });\n  });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n### with Koa and Formidable\n\nOf course, with [Koa v1, v2 or future v3](https://ghub.now.sh/koa) the things\nare very similar. You can use `formidable` manually as shown below or through\nthe [koa-better-body](https://ghub.now.sh/koa-better-body) package which is\nusing `formidable` under the hood and support more features and different\nrequest bodies, check its documentation for more info.\n\n_Note: this example is assuming Koa v2. Be aware that you should pass `ctx.req`\nwhich is Node.js's Request, and **NOT** the `ctx.request` which is Koa's Request\nobject - there is a difference._\n\n```js\nimport Koa from 'Koa';\nimport formidable from 'formidable';\n\nconst app = new Koa();\n\napp.on('error', (err) => {\n  console.error('server error', err);\n});\n\napp.use(async (ctx, next) => {\n  if (ctx.url === '/api/upload' && ctx.method.toLowerCase() === 'post') {\n    const form = formidable({});\n\n    // not very elegant, but that's for now if you don't want to use `koa-better-body`\n    // or other middlewares.\n    await new Promise((resolve, reject) => {\n      form.parse(ctx.req, (err, fields, files) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        ctx.set('Content-Type', 'application/json');\n        ctx.status = 200;\n        ctx.state = { fields, files };\n        ctx.body = JSON.stringify(ctx.state, null, 2);\n        resolve();\n      });\n    });\n    await next();\n    return;\n  }\n\n  // show a file upload form\n  ctx.set('Content-Type', 'text/html');\n  ctx.status = 200;\n  ctx.body = `\n    <h2>With <code>\"koa\"</code> npm package</h2>\n    <form action=\"/api/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    <div>Text field title: <input type=\"text\" name=\"title\" /></div>\n    <div>File: <input type=\"file\" name=\"koaFiles\" multiple=\"multiple\" /></div>\n    <input type=\"submit\" value=\"Upload\" />\n    </form>\n  `;\n});\n\napp.use((ctx) => {\n  console.log('The next middleware is called');\n  console.log('Results:', ctx.state);\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000 ...');\n});\n```\n\n## Benchmarks\n\nThe benchmark is quite old, from the old codebase. But maybe quite true though.\nPreviously the numbers was around ~500 mb/sec. Currently with moving to the new\nNode.js Streams API it's faster. You can clearly see the differences between the\nNode versions.\n\n_Note: a lot better benchmarking could and should be done in future._\n\nBenchmarked on 8GB RAM, Xeon X3440 (2.53 GHz, 4 cores, 8 threads)\n\n```\n~/github/node-formidable master\n❯ nve --parallel 8 10 12 13 node benchmark/bench-multipart-parser.js\n\n ⬢  Node 8\n\n1261.08 mb/sec\n\n ⬢  Node 10\n\n1113.04 mb/sec\n\n ⬢  Node 12\n\n2107.00 mb/sec\n\n ⬢  Node 13\n\n2566.42 mb/sec\n```\n\n![benchmark January 29th, 2020](./benchmark/2020-01-29_xeon-x3440.png)\n\n## API\n\n### Formidable / IncomingForm\n\nAll shown are equivalent.\n\n_Please pass [`options`](#options) to the function/constructor, not by assigning\nthem to the instance `form`_\n\n```js\nimport formidable from 'formidable';\nconst form = formidable(options);\n```\n\n### Options\n\nSee it's defaults in [src/Formidable.js DEFAULT_OPTIONS](./src/Formidable.js)\n(the `DEFAULT_OPTIONS` constant).\n\n- `options.encoding` **{string}** - default `'utf-8'`; sets encoding for\n  incoming form fields,\n- `options.uploadDir` **{string}** - default `os.tmpdir()`; the directory for\n  placing file uploads in. You can move them later by using `fs.rename()`.\n- `options.keepExtensions` **{boolean}** - default `false`; to include the\n  extensions of the original files or not\n- `options.allowEmptyFiles` **{boolean}** - default `false`; allow upload empty\n  files\n- `options.minFileSize` **{number}** - default `1` (1byte); the minium size of\n  uploaded file.\n- `options.maxFiles` **{number}** - default `Infinity`;\n  limit the amount of uploaded files, set Infinity for unlimited\n- `options.maxFileSize` **{number}** - default `200 * 1024 * 1024` (200mb);\n  limit the size of each uploaded file.\n- `options.maxTotalFileSize` **{number}** - default `options.maxFileSize`;\n  limit the size of the batch of uploaded files.\n- `options.maxFields` **{number}** - default `1000`; limit the number of fields, set Infinity for unlimited\n- `options.maxFieldsSize` **{number}** - default `20 * 1024 * 1024` (20mb);\n  limit the amount of memory all fields together (except files) can allocate in\n  bytes.\n- `options.hashAlgorithm` **{string | false}** - default `false`; include checksums calculated\n  for incoming files, set this to some hash algorithm, see\n  [crypto.createHash](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options)\n  for available algorithms\n- `options.fileWriteStreamHandler` **{function}** - default `null`, which by\n  default writes to host machine file system every file parsed; The function\n  should return an instance of a\n  [Writable stream](https://nodejs.org/api/stream.html#stream_class_stream_writable)\n  that will receive the uploaded file data. With this option, you can have any\n  custom behavior regarding where the uploaded file data will be streamed for.\n  If you are looking to write the file uploaded in other types of cloud storages\n  (AWS S3, Azure blob storage, Google cloud storage) or private file storage,\n  this is the option you're looking for. When this option is defined the default\n  behavior of writing the file in the host machine file system is lost.\n- `options.filename` **{function}** - default `undefined` Use it to control\n  newFilename. Must return a string. Will be joined with options.uploadDir.\n\n- `options.filter` **{function}** - default function that always returns true.\n  Use it to filter files before they are uploaded. Must return a boolean. Will not make the form.parse error\n\n- `options.createDirsFromUploads` **{boolean}** - default false. If true, makes direct folder uploads possible. Use `<input type=\"file\" name=\"folders\" webkitdirectory directory multiple>` to create a form to upload folders. Has to be used with the options `options.uploadDir` and `options.filename` where `options.filename` has to return a string with the character `/` for folders to be created. The base will be `options.uploadDir`.\n\n\n#### `options.filename`  **{function}** function (name, ext, part, form) -> string\n\nwhere part can be decomposed as\n\n```js\nconst { originalFilename, mimetype} = part;\n```\n\n_**Note:** If this size of combined fields, or size of some file is exceeded, an\n`'error'` event is fired._\n\n```js\n// The amount of bytes received for this form so far.\nform.bytesReceived;\n```\n\n```js\n// The expected number of bytes in this form.\nform.bytesExpected;\n```\n\n#### `options.filter`  **{function}** function ({name, originalFilename, mimetype}) -> boolean\n\nBehaves like Array.filter: Returning false will simply ignore the file and go to the next.\n\n```js\nconst options = {\n  filter: function ({name, originalFilename, mimetype}) {\n    // keep only images\n    return mimetype && mimetype.includes(\"image\");\n  }\n};\n```\n\n**Note:** use an outside variable to cancel all uploads upon the first error\n\n**Note:** use form.emit('error') to make form.parse error\n\n```js\nlet cancelUploads = false;// create variable at the same scope as form\nconst options = {\n  filter: function ({name, originalFilename, mimetype}) {\n    // keep only images\n    const valid = mimetype && mimetype.includes(\"image\");\n    if (!valid) {\n      form.emit('error', new formidableErrors.default('invalid type', 0, 400)); // optional make form.parse error\n      cancelUploads = true; //variable to make filter return false after the first problem\n    }\n    return valid && !cancelUploads;\n  }\n};\n```\n\n\n### .parse(request, ?callback)\n\nParses an incoming Node.js `request` containing form data. If `callback` is not provided a promise is returned.\n\n```js\nconst form = formidable({ uploadDir: __dirname });\n\nform.parse(req, (err, fields, files) => {\n  console.log('fields:', fields);\n  console.log('files:', files);\n});\n\n// with Promise\nconst [fields, files] = await form.parse(req);\n```\n\nYou may overwrite this method if you are interested in directly accessing the\nmultipart stream. Doing so will disable any `'field'` / `'file'` events\nprocessing which would occur otherwise, making you fully responsible for\nhandling the processing.\n\nAbout `uploadDir`, given the following directory structure \n```\nproject-name\n├── src\n│   └── server.js\n│       \n└── uploads\n    └── image.jpg\n```\n\n`__dirname` would be the same directory as the source file itself (src)\n\n\n```js\n `${__dirname}/../uploads`\n```\n\nto put files in uploads.\n\nOmitting `__dirname` would make the path relative to the current working directory. This would be the same if server.js is launched from src but not project-name.\n\n\n`null` will use default which is `os.tmpdir()`\n\nNote: If the directory does not exist, the uploaded files are __silently discarded__. To make sure it exists:\n\n```js\nimport {createNecessaryDirectoriesSync} from \"filesac\";\n\n\nconst uploadPath = `${__dirname}/../uploads`;\ncreateNecessaryDirectoriesSync(`${uploadPath}/x`);\n```\n\n\nIn the example below, we listen on couple of events and direct them to the\n`data` listener, so you can do whatever you choose there, based on whether its\nbefore the file been emitted, the header value, the header name, on field, on\nfile and etc.\n\nOr the other way could be to just override the `form.onPart` as it's shown a bit\nlater.\n\n```js\nform.once('error', console.error);\n\nform.on('fileBegin', (formname, file) => {\n  form.emit('data', { name: 'fileBegin', formname, value: file });\n});\n\nform.on('file', (formname, file) => {\n  form.emit('data', { name: 'file', formname, value: file });\n});\n\nform.on('field', (fieldName, fieldValue) => {\n  form.emit('data', { name: 'field', key: fieldName, value: fieldValue });\n});\n\nform.once('end', () => {\n  console.log('Done!');\n});\n\n// If you want to customize whatever you want...\nform.on('data', ({ name, key, value, buffer, start, end, formname, ...more }) => {\n  if (name === 'partBegin') {\n  }\n  if (name === 'partData') {\n  }\n  if (name === 'headerField') {\n  }\n  if (name === 'headerValue') {\n  }\n  if (name === 'headerEnd') {\n  }\n  if (name === 'headersEnd') {\n  }\n  if (name === 'field') {\n    console.log('field name:', key);\n    console.log('field value:', value);\n  }\n  if (name === 'file') {\n    console.log('file:', formname, value);\n  }\n  if (name === 'fileBegin') {\n    console.log('fileBegin:', formname, value);\n  }\n});\n```\n\n### .use(plugin: Plugin)\n\nA method that allows you to extend the Formidable library. By default we include\n4 plugins, which essentially are adapters to plug the different built-in parsers.\n\n**The plugins added by this method are always enabled.**\n\n_See [src/plugins/](./src/plugins/) for more detailed look on default plugins._\n\nThe `plugin` param has such signature:\n\n```typescript\nfunction(formidable: Formidable, options: Options): void;\n```\n\nThe architecture is simple. The `plugin` is a function that is passed with the\nFormidable instance (the `form` across the README examples) and the options.\n\n**Note:** the plugin function's `this` context is also the same instance.\n\n```js\nconst form = formidable({ keepExtensions: true });\n\nform.use((self, options) => {\n  // self === this === form\n  console.log('woohoo, custom plugin');\n  // do your stuff; check `src/plugins` for inspiration\n});\n\nform.parse(req, (error, fields, files) => {\n  console.log('done!');\n});\n```\n\n**Important to note**, is that inside plugin `this.options`, `self.options` and\n`options` MAY or MAY NOT be the same. General best practice is to always use the\n`this`, so you can later test your plugin independently and more easily.\n\nIf you want to disable some parsing capabilities of Formidable, you can disable\nthe plugin which corresponds to the parser. For example, if you want to disable\nmultipart parsing (so the [src/parsers/Multipart.js](./src/parsers/Multipart.js)\nwhich is used in [src/plugins/multipart.js](./src/plugins/multipart.js)), then\nyou can remove it from the `options.enabledPlugins`, like so\n\n```js\nimport formidable, {octetstream, querystring, json} from \"formidable\";\nconst form = formidable({\n  hashAlgorithm: 'sha1',\n  enabledPlugins: [octetstream, querystring, json],\n});\n```\n\n**Be aware** that the order _MAY_ be important too. The names corresponds 1:1 to\nfiles in [src/plugins/](./src/plugins) folder.\n\nPull requests for new built-in plugins MAY be accepted - for example, more\nadvanced querystring parser. Add your plugin as a new file in `src/plugins/`\nfolder (lowercased) and follow how the other plugins are made.\n\n### form.onPart\n\nIf you want to use Formidable to only handle certain parts for you, you can do\nsomething similar. Or see\n[#387](https://github.com/node-formidable/node-formidable/issues/387) for\ninspiration, you can for example validate the mime-type.\n\n```js\nconst form = formidable();\n\nform.onPart = (part) => {\n  part.on('data', (buffer) => {\n    // do whatever you want here\n  });\n};\n```\n\nFor example, force Formidable to be used only on non-file \"parts\" (i.e., html\nfields)\n\n```js\nconst form = formidable();\n\nform.onPart = function (part) {\n  // let formidable handle only non-file parts\n  if (part.originalFilename === '' || !part.mimetype) {\n    // used internally, please do not override!\n    form._handlePart(part);\n  }\n};\n```\n\n### File\n\n```ts\nexport interface File {\n  // The size of the uploaded file in bytes.\n  // If the file is still being uploaded (see `'fileBegin'` event),\n  // this property says how many bytes of the file have been written to disk yet.\n  file.size: number;\n\n  // The path this file is being written to. You can modify this in the `'fileBegin'` event in\n  // case you are unhappy with the way formidable generates a temporary path for your files.\n  file.filepath: string;\n\n  // The name this file had according to the uploading client.\n  file.originalFilename: string | null;\n  \n  // calculated based on options provided\n  file.newFilename: string | null;\n\n  // The mime type of this file, according to the uploading client.\n  file.mimetype: string | null;\n\n  // A Date object (or `null`) containing the time this file was last written to.\n  // Mostly here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).\n  file.mtime: Date | null;\n\n  file.hashAlgorithm: false | |'sha1' | 'md5' | 'sha256'\n  // If `options.hashAlgorithm` calculation was set, you can read the hex digest out of this var (at the end it will be a string)\n  file.hash: string | object | null;\n}\n```\n\n#### file.toJSON()\n\nThis method returns a JSON-representation of the file, allowing you to\n`JSON.stringify()` the file which is useful for logging and responding to\nrequests.\n\n### Events\n\n#### `'progress'`\n\nEmitted after each incoming chunk of data that has been parsed. Can be used to\nroll your own progress bar. **Warning** Use this only for server side progress bar. On the client side better use `XMLHttpRequest` with `xhr.upload.onprogress =`\n\n```js\nform.on('progress', (bytesReceived, bytesExpected) => {});\n```\n\n#### `'field'`\n\nEmitted whenever a field / value pair has been received.\n\n```js\nform.on('field', (name, value) => {});\n```\n\n#### `'fileBegin'`\n\nEmitted whenever a new file is detected in the upload stream. Use this event if\nyou want to stream the file to somewhere else while buffering the upload on the\nfile system.\n\n```js\nform.on('fileBegin', (formName, file) => {\n    // accessible here \n    // formName the name in the form (<input name=\"thisname\" type=\"file\">) or http filename for octetstream\n    // file.originalFilename http filename or null if there was a parsing error\n    // file.newFilename generated hexoid or what options.filename returned\n    // file.filepath default pathname as per options.uploadDir and options.filename\n    // file.filepath = CUSTOM_PATH // to change the final path\n});\n```\n\n#### `'file'`\n\nEmitted whenever a field / file pair has been received. `file` is an instance of\n`File`.\n\n```js\nform.on('file', (formname, file) => {\n    // same as fileBegin, except\n    // it is too late to change file.filepath\n    // file.hash is available if options.hash was used\n});\n```\n\n#### `'error'`\n\nEmitted when there is an error processing the incoming form. A request that\nexperiences an error is automatically paused, you will have to manually call\n`request.resume()` if you want the request to continue firing `'data'` events.\n\nMay have `error.httpCode` and `error.code` attached.\n\n```js\nform.on('error', (err) => {});\n```\n\n#### `'aborted'`\n\nEmitted when the request was aborted by the user. Right now this can be due to a\n'timeout' or 'close' event on the socket. After this event is emitted, an\n`error` event will follow. In the future there will be a separate 'timeout'\nevent (needs a change in the node core).\n\n```js\nform.on('aborted', () => {});\n```\n\n#### `'end'`\n\nEmitted when the entire request has been received, and all contained files have\nfinished flushing to disk. This is a great place for you to send your response.\n\n```js\nform.on('end', () => {});\n```\n\n\n### Helpers\n\n#### firstValues\n\nGets first values of fields, like pre 3.0.0 without multiples pass in a list of optional exceptions where arrays of strings is still wanted (`<select multiple>` for example)\n\n```js\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\n\n// ...\nform.parse(request, async (error, fieldsMultiple, files) => {\n    if (error) {\n        //...\n    }\n    const exceptions = ['thisshouldbeanarray'];\n    const fieldsSingle = firstValues(form, fieldsMultiple, exceptions);\n    // ...\n```\n\n#### readBooleans\n\nHtml form input type=\"checkbox\" only send the value \"on\" if checked,\nconvert it to booleans for each input that is expected to be sent as a checkbox, only use after firstValues or similar was called.\n\n```js\nimport { firstValues } from 'formidable/src/helpers/firstValues.js';\nimport { readBooleans } from 'formidable/src/helpers/readBooleans.js';\n\n// ...\nform.parse(request, async (error, fieldsMultiple, files) => {\n    if (error) {\n        //...\n    }\n    const fieldsSingle = firstValues(form, fieldsMultiple);\n    \n    const expectedBooleans = ['checkbox1', 'wantsNewsLetter', 'hasACar'];\n    const fieldsWithBooleans = readBooleans(fieldsSingle, expectedBooleans);\n    // ...\n```\n\n## Changelog\n\n[./CHANGELOG.md](./CHANGELOG.md)\n\n## Ports & Credits\n\n- [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++\n  parser based on formidable\n- [Ryan Dahl](http://twitter.com/ryah) for his work on\n  [http-parser](http://github.com/ry/http-parser) which heavily inspired the\n  initial `multipart_parser.js`.\n\n## Contributing\n\nIf the documentation is unclear or has a typo, please click on the page's `Edit`\nbutton (pencil icon) and suggest a correction. If you would like to help us fix\na bug or add a new feature, please check our [Contributing\nGuide][contributing-url]. Pull requests are welcome!\n\nThanks goes to these wonderful people\n([emoji key](https://allcontributors.org/docs/en/emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://twitter.com/felixge\"><img src=\"https://avatars3.githubusercontent.com/u/15000?s=460&v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Felix Geisendörfer</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Code\">💻</a> <a href=\"#design-felixge\" title=\"Design\">🎨</a> <a href=\"#ideas-felixge\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=felixge\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://tunnckoCore.com\"><img src=\"https://avatars3.githubusercontent.com/u/5038030?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charlike Mike Reagent</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AtunnckoCore\" title=\"Bug reports\">🐛</a> <a href=\"#infra-tunnckoCore\" title=\"Infrastructure (Hosting, Build-Tools, etc)\">🚇</a> <a href=\"#design-tunnckoCore\" title=\"Design\">🎨</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Documentation\">📖</a> <a href=\"#example-tunnckoCore\" title=\"Examples\">💡</a> <a href=\"#ideas-tunnckoCore\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-tunnckoCore\" title=\"Maintenance\">🚧</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=tunnckoCore\" title=\"Tests\">⚠️</a></td>\n    <td align=\"center\"><a href=\"https://github.com/kedarv\"><img src=\"https://avatars1.githubusercontent.com/u/1365665?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Kedar</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=kedarv\" title=\"Tests\">⚠️</a> <a href=\"#question-kedarv\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Akedarv\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/GrosSacASac\"><img src=\"https://avatars0.githubusercontent.com/u/5721194?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Walle Cyril</b></sub></a><br /><a href=\"#question-GrosSacASac\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AGrosSacASac\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=GrosSacASac\" title=\"Code\">💻</a> <a href=\"#financial-GrosSacASac\" title=\"Financial\">💵</a> <a href=\"#ideas-GrosSacASac\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-GrosSacASac\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/xarguments\"><img src=\"https://avatars2.githubusercontent.com/u/40522463?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Xargs</b></sub></a><br /><a href=\"#question-xarguments\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Axarguments\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=xarguments\" title=\"Code\">💻</a> <a href=\"#maintenance-xarguments\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Amit-A\"><img src=\"https://avatars1.githubusercontent.com/u/7987238?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Amit-A</b></sub></a><br /><a href=\"#question-Amit-A\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AAmit-A\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=Amit-A\" title=\"Code\">💻</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://charmander.me/\"><img src=\"https://avatars1.githubusercontent.com/u/1889843?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Charmander</b></sub></a><br /><a href=\"#question-charmander\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Acharmander\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=charmander\" title=\"Code\">💻</a> <a href=\"#ideas-charmander\" title=\"Ideas, Planning, & Feedback\">🤔</a> <a href=\"#maintenance-charmander\" title=\"Maintenance\">🚧</a></td>\n    <td align=\"center\"><a href=\"https://twitter.com/dylan_piercey\"><img src=\"https://avatars2.githubusercontent.com/u/4985201?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dylan Piercey</b></sub></a><br /><a href=\"#ideas-DylanPiercey\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"http://ochrona.jawne.info.pl\"><img src=\"https://avatars1.githubusercontent.com/u/3618479?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Adam Dobrawy</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Aad-m\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=ad-m\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://github.com/amitrohatgi\"><img src=\"https://avatars3.githubusercontent.com/u/12177021?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>amitrohatgi</b></sub></a><br /><a href=\"#ideas-amitrohatgi\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/fengxinming\"><img src=\"https://avatars2.githubusercontent.com/u/6262382?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Jesse Feng</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Afengxinming\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://qtmsheep.com\"><img src=\"https://avatars1.githubusercontent.com/u/7271496?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Nathanael Demacon</b></sub></a><br /><a href=\"#question-quantumsheep\" title=\"Answering Questions\">💬</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=quantumsheep\" title=\"Code\">💻</a> <a href=\"https://github.com/node-formidable/node-formidable/pulls?q=is%3Apr+reviewed-by%3Aquantumsheep\" title=\"Reviewed Pull Requests\">👀</a></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/MunMunMiao\"><img src=\"https://avatars1.githubusercontent.com/u/18216142?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>MunMunMiao</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3AMunMunMiao\" title=\"Bug reports\">🐛</a></td>\n    <td align=\"center\"><a href=\"https://github.com/gabipetrovay\"><img src=\"https://avatars0.githubusercontent.com/u/1170398?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Gabriel Petrovay</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/issues?q=author%3Agabipetrovay\" title=\"Bug reports\">🐛</a> <a href=\"https://github.com/node-formidable/node-formidable/commits?author=gabipetrovay\" title=\"Code\">💻</a></td>\n    <td align=\"center\"><a href=\"https://github.com/Elzair\"><img src=\"https://avatars0.githubusercontent.com/u/2352818?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Philip Woods</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=Elzair\" title=\"Code\">💻</a> <a href=\"#ideas-Elzair\" title=\"Ideas, Planning, & Feedback\">🤔</a></td>\n    <td align=\"center\"><a href=\"https://github.com/dmolim\"><img src=\"https://avatars2.githubusercontent.com/u/7090374?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Dmitry Ivonin</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=dmolim\" title=\"Documentation\">📖</a></td>\n    <td align=\"center\"><a href=\"https://audiobox.fm\"><img src=\"https://avatars1.githubusercontent.com/u/12844?v=4\" width=\"100px;\" alt=\"\"/><br /><sub><b>Claudio Poli</b></sub></a><br /><a href=\"https://github.com/node-formidable/node-formidable/commits?author=masterkain\" title=\"Code\">💻</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-enable -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\nFrom a [Felix blog post](https://felixge.de/2013/03/11/the-pull-request-hack/):\n\n- [Sven Lito](https://github.com/svnlto) for fixing bugs and merging patches\n- [egirshov](https://github.com/egirshov) for contributing many improvements to the node-formidable multipart parser\n- [Andrew Kelley](https://github.com/superjoe30) for also helping with fixing bugs and making improvements\n- [Mike Frey](https://github.com/mikefrey) for contributing JSON support\n\n## License\n\nFormidable is licensed under the [MIT License][license-url].\n\n<!-- badges -->\n<!-- prettier-ignore-start -->\n\n[codestyle-url]: https://github.com/airbnb/javascript\n[codestyle-img]: https://badgen.net/badge/code%20style/airbnb%20%2B%20prettier/ff5a5f?icon=airbnb&cache=300\n[codecov-url]: https://codecov.io/gh/node-formidable/formidable\n[codecov-img]: https://badgen.net/codecov/c/github/node-formidable/formidable/master?icon=codecov\n[npmv-canary-img]: https://badgen.net/npm/v/formidable/canary?icon=npm\n[npmv-dev-img]: https://badgen.net/npm/v/formidable/dev?icon=npm\n[npmv-img]: https://badgen.net/npm/v/formidable?icon=npm\n[npmv-url]: https://npmjs.com/package/formidable\n[license-img]: https://badgen.net/npm/license/formidable\n[license-url]: https://github.com/node-formidable/formidable/blob/master/LICENSE\n[chat-img]: https://badgen.net/badge/chat/on%20gitter/46BC99?icon=gitter\n[chat-url]: https://gitter.im/node-formidable/Lobby\n[libera-manifesto-url]: https://liberamanifesto.com\n[libera-manifesto-img]: https://badgen.net/badge/libera/manifesto/grey\n[renovateapp-url]: https://renovatebot.com\n[renovateapp-img]: https://badgen.net/badge/renovate/enabled/green?cache=300\n[prs-welcome-img]: https://badgen.net/badge/PRs/welcome/green?cache=300\n[prs-welcome-url]: http://makeapullrequest.com\n[twitter-url]: https://twitter.com/3a1fcBx0\n[twitter-img]: https://badgen.net/twitter/follow/3a1fcBx0?icon=twitter&color=1da1f2&cache=300\n\n[npm-weekly-img]: https://badgen.net/npm/dw/formidable?icon=npm&cache=300\n[npm-monthly-img]: https://badgen.net/npm/dm/formidable?icon=npm&cache=300\n[npm-yearly-img]: https://badgen.net/npm/dy/formidable?icon=npm&cache=300\n[npm-alltime-img]: https://badgen.net/npm/dt/formidable?icon=npm&cache=300&label=total%20downloads\n\n[nodejs-img]: https://badgen.net/badge/node/>=%2010.13/green?cache=300\n\n[ccommits-url]: https://conventionalcommits.org/\n[ccommits-img]: https://badgen.net/badge/conventional%20commits/v1.0.0/green?cache=300\n\n[contributing-url]: https://github.com/node-formidable/.github/blob/master/CONTRIBUTING.md\n[code_of_conduct-url]: https://github.com/node-formidable/.github/blob/master/CODE_OF_CONDUCT.md\n\n[open-issue-url]: https://github.com/node-formidable/formidable/issues/new\n\n[tidelift-url]: https://tidelift.com/subscription/pkg/npm-formidable?utm_source=npm-formidable&utm_medium=referral&utm_campaign=enterprise\n[tidelift-img]: https://badgen.net/badge/tidelift/subscription/4B5168?labelColor=F6914D\n\n[kofi-url]: https://ko-fi.com/tunnckoCore/commissions\n[kofi-img]: https://badgen.net/badge/ko-fi/support/29abe0c2?cache=300&icon=https://rawcdn.githack.com/tunnckoCore/badgen-icons/f8264c6414e0bec449dd86f2241d50a9b89a1203/icons/kofi.svg\n\n[linux-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/ubuntu?cache=300&label=linux%20build&icon=github\n[macos-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/macos?cache=300&label=macos%20build&icon=github\n[windows-build-img]: https://badgen.net/github/checks/node-formidable/formidable/master/windows?cache=300&label=windows%20build&icon=github\n[build-url]: https://github.com/node-formidable/formidable/actions?query=workflow%3Anodejs\n<!-- prettier-ignore-end -->\n","homepage":"https://github.com/node-formidable/formidable","bugs":{"url":"https://github.com/node-formidable/formidable/issues"},"readmeFilename":"README.md","license":"MIT","keywords":["multipart","form","data","querystring","www","json","ulpoad","file"]}